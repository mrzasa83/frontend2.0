{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":["file:///users/mrzasa/projects/current/frontend2.4/lib/db/mysql-primary.ts"],"sourcesContent":["import mysql from 'mysql2/promise'\r\n\r\nlet pool: mysql.Pool | null = null\r\n\r\nexport function getMySQLPrimaryPool() {\r\n  if (!pool) {\r\n    pool = mysql.createPool({\r\n      host: process.env.DB_MYSQL_PRIMARY_HOST,\r\n      port: parseInt(process.env.DB_MYSQL_PRIMARY_PORT || '3306'),\r\n      user: process.env.DB_MYSQL_PRIMARY_USER,\r\n      password: process.env.DB_MYSQL_PRIMARY_PASSWORD,\r\n      database: process.env.DB_MYSQL_PRIMARY_DATABASE,\r\n      waitForConnections: true,\r\n      connectionLimit: 10,\r\n      queueLimit: 0,\r\n      enableKeepAlive: true,\r\n      keepAliveInitialDelay: 0\r\n    })\r\n  }\r\n  return pool\r\n}\r\n\r\nexport async function queryPrimary<T = any>(\r\n  sql: string,\r\n  params?: any[]\r\n): Promise<T> {\r\n  const pool = getMySQLPrimaryPool()\r\n  const [rows] = await pool.execute(sql, params)\r\n  return rows as T\r\n}\r\n\r\n// Test connection\r\nexport async function testMySQLPrimaryConnection() {\r\n  try {\r\n    const pool = getMySQLPrimaryPool()\r\n    const connection = await pool.getConnection()\r\n    await connection.ping()\r\n    connection.release()\r\n    return { success: true, message: 'MySQL Primary connected' }\r\n  } catch (error) {\r\n    return { success: false, message: `MySQL Primary error: ${error}` }\r\n  }\r\n}\r\n\r\n// At the end of mysql-primary.ts\r\nexport async function getUsers() {\r\n  return queryPrimary<any[]>(\r\n    `SELECT \r\n      id,\r\n      username,\r\n      name,\r\n      email,\r\n      nickname,\r\n      phone,\r\n      mobile,\r\n      title,\r\n      role,\r\n      active\r\n    FROM Users \r\n    WHERE active = 1\r\n    ORDER BY name ASC`\r\n  )\r\n}"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAEA,IAAI,OAA0B;AAEvB,SAAS;IACd,IAAI,CAAC,MAAM;QACT,OAAO,gKAAK,CAAC,UAAU,CAAC;YACtB,MAAM,QAAQ,GAAG,CAAC,qBAAqB;YACvC,MAAM,SAAS,QAAQ,GAAG,CAAC,qBAAqB,IAAI;YACpD,MAAM,QAAQ,GAAG,CAAC,qBAAqB;YACvC,UAAU,QAAQ,GAAG,CAAC,yBAAyB;YAC/C,UAAU,QAAQ,GAAG,CAAC,yBAAyB;YAC/C,oBAAoB;YACpB,iBAAiB;YACjB,YAAY;YACZ,iBAAiB;YACjB,uBAAuB;QACzB;IACF;IACA,OAAO;AACT;AAEO,eAAe,aACpB,GAAW,EACX,MAAc;IAEd,MAAM,OAAO;IACb,MAAM,CAAC,KAAK,GAAG,MAAM,KAAK,OAAO,CAAC,KAAK;IACvC,OAAO;AACT;AAGO,eAAe;IACpB,IAAI;QACF,MAAM,OAAO;QACb,MAAM,aAAa,MAAM,KAAK,aAAa;QAC3C,MAAM,WAAW,IAAI;QACrB,WAAW,OAAO;QAClB,OAAO;YAAE,SAAS;YAAM,SAAS;QAA0B;IAC7D,EAAE,OAAO,OAAO;QACd,OAAO;YAAE,SAAS;YAAO,SAAS,CAAC,qBAAqB,EAAE,OAAO;QAAC;IACpE;AACF;AAGO,eAAe;IACpB,OAAO,aACL,CAAC;;;;;;;;;;;;;qBAagB,CAAC;AAEtB","debugId":null}},
    {"offset": {"line": 214, "column": 0}, "map": {"version":3,"sources":["file:///users/mrzasa/projects/current/frontend2.4/lib/auth.ts"],"sourcesContent":["import { NextAuthOptions } from 'next-auth'\r\nimport CredentialsProvider from 'next-auth/providers/credentials'\r\nimport bcrypt from 'bcryptjs'\r\nimport { queryPrimary } from './db/mysql-primary'\r\n\r\ninterface User {\r\n  id: number\r\n  username: string\r\n  name: string | null\r\n  email: string | null\r\n  password: string\r\n  active: number | null\r\n}\r\n\r\ninterface Role {\r\n  id: number\r\n  name: string\r\n}\r\n\r\nexport const authOptions: NextAuthOptions = {\r\n  providers: [\r\n    CredentialsProvider({\r\n      name: 'Credentials',\r\n      credentials: {\r\n        username: { label: 'Username', type: 'text' },\r\n        password: { label: 'Password', type: 'password' }\r\n      },\r\n      async authorize(credentials) {\r\n        if (!credentials?.username || !credentials?.password) {\r\n          return null\r\n        }\r\n\r\n        try {\r\n          // Get user\r\n          const users = await queryPrimary<User[]>(\r\n            'SELECT * FROM Users WHERE username = ? AND active = 1',\r\n            [credentials.username]\r\n          )\r\n\r\n          const user = users[0]\r\n\r\n          if (!user || !user.password) {\r\n            return null\r\n          }\r\n\r\n          // Verify password\r\n          const isValid = await bcrypt.compare(credentials.password, user.password)\r\n\r\n          if (!isValid) {\r\n            return null\r\n          }\r\n\r\n          // Get user roles\r\n          const roles = await queryPrimary<Role[]>(\r\n            `SELECT r.id, r.name \r\n             FROM roles r\r\n             INNER JOIN user_roles ur ON r.id = ur.roleId\r\n             WHERE ur.userId = ?`,\r\n            [user.id]\r\n          )\r\n\r\n          const roleNames = roles.map(r => r.name)\r\n\r\n          return {\r\n            id: user.id.toString(),\r\n            name: user.name || user.username,\r\n            email: user.email || '',\r\n            username: user.username,\r\n            roles: roleNames\r\n          }\r\n        } catch (error) {\r\n          console.error('Auth error:', error)\r\n          return null\r\n        }\r\n      }\r\n    })\r\n  ],\r\n  callbacks: {\r\n    async jwt({ token, user }) {\r\n      if (user) {\r\n        token.id = user.id\r\n        token.username = user.username\r\n        token.roles = user.roles\r\n      }\r\n      return token\r\n    },\r\n    async session({ session, token }) {\r\n      if (session.user) {\r\n        session.user.id = token.id as string\r\n        session.user.username = token.username as string\r\n        session.user.roles = token.roles as string[]\r\n        \r\n        // Create initials from name\r\n        const nameParts = session.user.name?.split(' ') || ['U']\r\n        session.user.initials = nameParts.length > 1 \r\n          ? `${nameParts[0][0]}${nameParts[1][0]}`.toUpperCase()\r\n          : nameParts[0].substring(0, 2).toUpperCase()\r\n      }\r\n      return session\r\n    }\r\n  },\r\n  pages: {\r\n    signIn: '/login',\r\n  },\r\n  session: {\r\n    strategy: 'jwt',\r\n    maxAge: 30 * 24 * 60 * 60, // 30 days\r\n  },\r\n  secret: process.env.NEXTAUTH_SECRET,\r\n}"],"names":[],"mappings":";;;;AACA;AACA;AACA;;;;AAgBO,MAAM,cAA+B;IAC1C,WAAW;QACT,IAAA,uLAAmB,EAAC;YAClB,MAAM;YACN,aAAa;gBACX,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAO;gBAC5C,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YAClD;YACA,MAAM,WAAU,WAAW;gBACzB,IAAI,CAAC,aAAa,YAAY,CAAC,aAAa,UAAU;oBACpD,OAAO;gBACT;gBAEA,IAAI;oBACF,WAAW;oBACX,MAAM,QAAQ,MAAM,IAAA,iKAAY,EAC9B,yDACA;wBAAC,YAAY,QAAQ;qBAAC;oBAGxB,MAAM,OAAO,KAAK,CAAC,EAAE;oBAErB,IAAI,CAAC,QAAQ,CAAC,KAAK,QAAQ,EAAE;wBAC3B,OAAO;oBACT;oBAEA,kBAAkB;oBAClB,MAAM,UAAU,MAAM,gKAAM,CAAC,OAAO,CAAC,YAAY,QAAQ,EAAE,KAAK,QAAQ;oBAExE,IAAI,CAAC,SAAS;wBACZ,OAAO;oBACT;oBAEA,iBAAiB;oBACjB,MAAM,QAAQ,MAAM,IAAA,iKAAY,EAC9B,CAAC;;;gCAGmB,CAAC,EACrB;wBAAC,KAAK,EAAE;qBAAC;oBAGX,MAAM,YAAY,MAAM,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI;oBAEvC,OAAO;wBACL,IAAI,KAAK,EAAE,CAAC,QAAQ;wBACpB,MAAM,KAAK,IAAI,IAAI,KAAK,QAAQ;wBAChC,OAAO,KAAK,KAAK,IAAI;wBACrB,UAAU,KAAK,QAAQ;wBACvB,OAAO;oBACT;gBACF,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,eAAe;oBAC7B,OAAO;gBACT;YACF;QACF;KACD;IACD,WAAW;QACT,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACvB,IAAI,MAAM;gBACR,MAAM,EAAE,GAAG,KAAK,EAAE;gBAClB,MAAM,QAAQ,GAAG,KAAK,QAAQ;gBAC9B,MAAM,KAAK,GAAG,KAAK,KAAK;YAC1B;YACA,OAAO;QACT;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC9B,IAAI,QAAQ,IAAI,EAAE;gBAChB,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,EAAE;gBAC1B,QAAQ,IAAI,CAAC,QAAQ,GAAG,MAAM,QAAQ;gBACtC,QAAQ,IAAI,CAAC,KAAK,GAAG,MAAM,KAAK;gBAEhC,4BAA4B;gBAC5B,MAAM,YAAY,QAAQ,IAAI,CAAC,IAAI,EAAE,MAAM,QAAQ;oBAAC;iBAAI;gBACxD,QAAQ,IAAI,CAAC,QAAQ,GAAG,UAAU,MAAM,GAAG,IACvC,GAAG,SAAS,CAAC,EAAE,CAAC,EAAE,GAAG,SAAS,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,WAAW,KAClD,SAAS,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,GAAG,WAAW;YAC9C;YACA,OAAO;QACT;IACF;IACA,OAAO;QACL,QAAQ;IACV;IACA,SAAS;QACP,UAAU;QACV,QAAQ,KAAK,KAAK,KAAK;IACzB;IACA,QAAQ,QAAQ,GAAG,CAAC,eAAe;AACrC","debugId":null}},
    {"offset": {"line": 434, "column": 0}, "map": {"version":3,"sources":["file:///users/mrzasa/projects/current/frontend2.4/lib/db/mssql.ts"],"sourcesContent":["import sql from 'mssql'\r\n\r\n// Connection pools\r\nconst pools: { [key: string]: sql.ConnectionPool } = {}\r\n\r\nexport interface MSSQLConfig {\r\n  name: string\r\n  host: string\r\n  port: number\r\n  user: string\r\n  password: string\r\n  database: string\r\n}\r\n\r\nexport function getMSSQLConfig(name: string): MSSQLConfig | null {\r\n  const host = process.env[`DB_MSSQL_${name}_HOST`]\r\n  const port = process.env[`DB_MSSQL_${name}_PORT`]\r\n  const user = process.env[`DB_MSSQL_${name}_USER`]\r\n  const password = process.env[`DB_MSSQL_${name}_PASSWORD`]\r\n  const database = process.env[`DB_MSSQL_${name}_DATABASE`]\r\n\r\n  if (!host || !user || !password || !database) {\r\n    return null\r\n  }\r\n\r\n  return {\r\n    name,\r\n    host,\r\n    port: parseInt(port || '1433'),\r\n    user,\r\n    password, // Password will be used directly, not in connection string\r\n    database\r\n  }\r\n}\r\n\r\nexport async function getMSSQLPool(name: string): Promise<sql.ConnectionPool> {\r\n  if (pools[name]) {\r\n    return pools[name]\r\n  }\r\n\r\n  const config = getMSSQLConfig(name)\r\n  if (!config) {\r\n    throw new Error(`MSSQL configuration not found for: ${name}`)\r\n  }\r\n\r\n  const pool = new sql.ConnectionPool({\r\n    server: config.host,\r\n    port: config.port,\r\n    user: config.user,\r\n    password: config.password, // Pass password directly as string\r\n    database: config.database,\r\n    options: {\r\n      encrypt: false, // Set to true if using Azure\r\n      trustServerCertificate: true,\r\n      enableArithAbort: true\r\n    },\r\n    pool: {\r\n      max: 10,\r\n      min: 0,\r\n      idleTimeoutMillis: 30000\r\n    }\r\n  })\r\n\r\n  await pool.connect()\r\n  pools[name] = pool\r\n  return pool\r\n}\r\n\r\nexport async function queryMSSQL<T = any>(\r\n  name: string,\r\n  query: string,\r\n  params?: { [key: string]: any }\r\n): Promise<T> {\r\n  const pool = await getMSSQLPool(name)\r\n  const request = pool.request()\r\n\r\n  if (params) {\r\n    Object.entries(params).forEach(([key, value]) => {\r\n      request.input(key, value)\r\n    })\r\n  }\r\n\r\n  const result = await request.query(query)\r\n  return result.recordset as T\r\n}\r\n\r\n// Test connection\r\nexport async function testMSSQLConnection(name: string) {\r\n  try {\r\n    const pool = await getMSSQLPool(name)\r\n    await pool.query('SELECT 1 as test')\r\n    return { success: true, message: `MSSQL ${name} connected` }\r\n  } catch (error) {\r\n    return { success: false, message: `MSSQL ${name} error: ${error}` }\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAEA,mBAAmB;AACnB,MAAM,QAA+C,CAAC;AAW/C,SAAS,eAAe,IAAY;IACzC,MAAM,OAAO,QAAQ,GAAG,CAAC,CAAC,SAAS,EAAE,KAAK,KAAK,CAAC,CAAC;IACjD,MAAM,OAAO,QAAQ,GAAG,CAAC,CAAC,SAAS,EAAE,KAAK,KAAK,CAAC,CAAC;IACjD,MAAM,OAAO,QAAQ,GAAG,CAAC,CAAC,SAAS,EAAE,KAAK,KAAK,CAAC,CAAC;IACjD,MAAM,WAAW,QAAQ,GAAG,CAAC,CAAC,SAAS,EAAE,KAAK,SAAS,CAAC,CAAC;IACzD,MAAM,WAAW,QAAQ,GAAG,CAAC,CAAC,SAAS,EAAE,KAAK,SAAS,CAAC,CAAC;IAEzD,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,YAAY,CAAC,UAAU;QAC5C,OAAO;IACT;IAEA,OAAO;QACL;QACA;QACA,MAAM,SAAS,QAAQ;QACvB;QACA;QACA;IACF;AACF;AAEO,eAAe,aAAa,IAAY;IAC7C,IAAI,KAAK,CAAC,KAAK,EAAE;QACf,OAAO,KAAK,CAAC,KAAK;IACpB;IAEA,MAAM,SAAS,eAAe;IAC9B,IAAI,CAAC,QAAQ;QACX,MAAM,IAAI,MAAM,CAAC,mCAAmC,EAAE,MAAM;IAC9D;IAEA,MAAM,OAAO,IAAI,6JAAG,CAAC,cAAc,CAAC;QAClC,QAAQ,OAAO,IAAI;QACnB,MAAM,OAAO,IAAI;QACjB,MAAM,OAAO,IAAI;QACjB,UAAU,OAAO,QAAQ;QACzB,UAAU,OAAO,QAAQ;QACzB,SAAS;YACP,SAAS;YACT,wBAAwB;YACxB,kBAAkB;QACpB;QACA,MAAM;YACJ,KAAK;YACL,KAAK;YACL,mBAAmB;QACrB;IACF;IAEA,MAAM,KAAK,OAAO;IAClB,KAAK,CAAC,KAAK,GAAG;IACd,OAAO;AACT;AAEO,eAAe,WACpB,IAAY,EACZ,KAAa,EACb,MAA+B;IAE/B,MAAM,OAAO,MAAM,aAAa;IAChC,MAAM,UAAU,KAAK,OAAO;IAE5B,IAAI,QAAQ;QACV,OAAO,OAAO,CAAC,QAAQ,OAAO,CAAC,CAAC,CAAC,KAAK,MAAM;YAC1C,QAAQ,KAAK,CAAC,KAAK;QACrB;IACF;IAEA,MAAM,SAAS,MAAM,QAAQ,KAAK,CAAC;IACnC,OAAO,OAAO,SAAS;AACzB;AAGO,eAAe,oBAAoB,IAAY;IACpD,IAAI;QACF,MAAM,OAAO,MAAM,aAAa;QAChC,MAAM,KAAK,KAAK,CAAC;QACjB,OAAO;YAAE,SAAS;YAAM,SAAS,CAAC,MAAM,EAAE,KAAK,UAAU,CAAC;QAAC;IAC7D,EAAE,OAAO,OAAO;QACd,OAAO;YAAE,SAAS;YAAO,SAAS,CAAC,MAAM,EAAE,KAAK,QAAQ,EAAE,OAAO;QAAC;IACpE;AACF","debugId":null}},
    {"offset": {"line": 525, "column": 0}, "map": {"version":3,"sources":["file:///users/mrzasa/projects/current/frontend2.4/app/api/products/bom/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\r\nimport { getServerSession } from 'next-auth'\r\nimport { authOptions } from '@/lib/auth'\r\nimport { queryMSSQL } from '@/lib/db/mssql'\r\n\r\nexport async function POST(request: NextRequest) {\r\n  console.log('ðŸ” BOM API called')\r\n  \r\n  const session = await getServerSession(authOptions)\r\n  \r\n  if (!session) {\r\n    console.log('âŒ No session - unauthorized')\r\n    return NextResponse.json({ error: 'Unauthorized' }, { status: 401 })\r\n  }\r\n\r\n  try {\r\n    const body = await request.json()\r\n    console.log('ðŸ“¦ Request body:', body)\r\n    \r\n    const { apcPN, level = 0, isInventoryPart = false } = body\r\n\r\n    if (!apcPN) {\r\n      console.log('âŒ No apcPN provided')\r\n      return NextResponse.json(\r\n        { error: 'apcPN is required' },\r\n        { status: 400 }\r\n      )\r\n    }\r\n\r\n    console.log(`ðŸ”Ž Fetching BOM for: ${apcPN}, isInventoryPart: ${isInventoryPart}, level: ${level}`)\r\n\r\n    let query: string\r\n    let params: any\r\n\r\n    // Two different queries depending on if this is a customer part or inventory part\r\n    if (isInventoryPart) {\r\n      console.log('ðŸ“‹ Using inventory part query')\r\n      // For inventory parts (manufactured parts from data0017)\r\n      // Find BOM via data0017.RKEY -> data0025.INVENTORY_PTR\r\n      query = `\r\n        SELECT \r\n          d17.INV_PART_NUMBER AS parent_part,\r\n          d17.P_M AS parent_type,\r\n          d25.RKEY AS bom_header_key,\r\n          d25.EFF_END AS eff_end,\r\n          d26.QTY_BOM AS quantity,\r\n          d26.UNIT_PTR AS unit_ptr,\r\n          d17_1.INV_PART_NUMBER AS component_part,\r\n          d17_1.P_M AS component_type,\r\n          d17_1.RKEY AS component_rkey,\r\n          CASE WHEN d17_1.P_M = 'M' THEN 1 ELSE 0 END AS has_children\r\n        FROM data0017 d17\r\n        JOIN data0025 d25 ON d17.RKEY = d25.INVENTORY_PTR\r\n        JOIN data0026 d26 ON d25.RKEY = d26.PARENT_NODE_INVENT\r\n        JOIN data0017 d17_1 ON d17_1.RKEY = d26.INVENTORY_PTR\r\n        WHERE d17.INV_PART_NUMBER = @partNumber\r\n          AND d17.P_M = 'M'\r\n          AND (d25.EFF_END IS NULL OR d25.EFF_END > GETDATE())\r\n        ORDER BY d17_1.INV_PART_NUMBER\r\n      `\r\n      params = { partNumber: apcPN }\r\n    } else {\r\n      console.log('ðŸ“‹ Using customer part query')\r\n      // For customer parts (from data0050)\r\n      // Find BOM via data0050.BOM_PTR -> data0025.RKEY\r\n      query = `\r\n        SELECT \r\n          d50.CUSTOMER_PART_NUMBER AS parent_part,\r\n          'C' AS parent_type,\r\n          d25.RKEY AS bom_header_key,\r\n          d25.EFF_END AS eff_end,\r\n          d26.QTY_BOM AS quantity,\r\n          d26.UNIT_PTR AS unit_ptr,\r\n          d17.INV_PART_NUMBER AS component_part,\r\n          d17.P_M AS component_type,\r\n          d17.RKEY AS component_rkey,\r\n          CASE WHEN d17.P_M = 'M' THEN 1 ELSE 0 END AS has_children\r\n        FROM data0050 d50\r\n        JOIN data0025 d25 ON d50.BOM_PTR = d25.RKEY\r\n        JOIN data0026 d26 ON d25.RKEY = d26.PARENT_NODE_INVENT\r\n        JOIN data0017 d17 ON d26.INVENTORY_PTR = d17.RKEY\r\n        WHERE d50.CUSTOMER_PART_NUMBER LIKE @partNumber\r\n          AND (d25.EFF_END IS NULL OR d25.EFF_END > GETDATE())\r\n        ORDER BY d17.INV_PART_NUMBER\r\n      `\r\n      params = { partNumber: `${apcPN}%` }\r\n    }\r\n\r\n    console.log('ðŸ—„ï¸ Executing query with params:', params)\r\n\r\n    // Query using existing MSSQL connector\r\n    const rows = await queryMSSQL('1', query, params)\r\n\r\n    console.log(`âœ… Query successful! Found ${rows.length} components`)\r\n\r\n    // Transform results to match BOMItem type\r\n    const results = rows.map((row: any, index: number) => ({\r\n      id: `${row.component_part}-${level}-${index}`,\r\n      part_number: row.component_part,\r\n      description: row.description || '',\r\n      quantity: parseFloat(row.quantity) || 0,\r\n      ref_des: row.ref_des || '',\r\n      unit: row.unit_ptr || '',\r\n      level: level,\r\n      has_children: Boolean(row.has_children),\r\n      parent_part: row.parent_part,\r\n      component_type: row.component_type,\r\n      eff_end: row.eff_end\r\n    }))\r\n\r\n    console.log('ðŸ“¤ Returning results:', results.length)\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      results,\r\n      count: results.length,\r\n      debug: {\r\n        partNumber: apcPN,\r\n        isInventoryPart,\r\n        level\r\n      }\r\n    })\r\n  } catch (error) {\r\n    console.error('ðŸ’¥ BOM API Error:', error)\r\n    console.error('Error details:', error instanceof Error ? error.message : String(error))\r\n    console.error('Error stack:', error instanceof Error ? error.stack : 'No stack')\r\n    \r\n    return NextResponse.json(\r\n      { \r\n        error: 'Failed to fetch BOM data',\r\n        details: error instanceof Error ? error.message : 'Unknown error',\r\n        stack: process.env.NODE_ENV === 'development' ? (error instanceof Error ? error.stack : undefined) : undefined\r\n      },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n\r\n/* ============================================\r\n   SCHEMA UNDERSTANDING\r\n   ============================================\r\n   \r\n   TWO TYPES OF PARTS:\r\n   \r\n   1. CUSTOMER PARTS (data0050)\r\n      - CUSTOMER_PART_NUMBER (unique ID)\r\n      - BOM_PTR â†’ points to data0025.RKEY\r\n   \r\n   2. INVENTORY PARTS (data0017)\r\n      - INV_PART_NUMBER (unique ID)\r\n      - P_M flag: 'P' = Purchased, 'M' = Manufactured\r\n      - RKEY (primary key)\r\n   \r\n   BOM STRUCTURE:\r\n   \r\n   data0025 - BOM Headers\r\n     - RKEY (primary key)\r\n     - INVENTORY_PTR â†’ points to data0017.RKEY\r\n     - EFF_END (effectivity date)\r\n   \r\n   data0026 - BOM Line Items\r\n     - PARENT_NODE_INVENT â†’ points to data0025.RKEY\r\n     - INVENTORY_PTR â†’ points to data0017.RKEY\r\n     - QTY_BOM, REFERENCE_DESIGNATORS, SEQUENCE\r\n   \r\n   RELATIONSHIPS:\r\n   \r\n   Customer Part BOM:\r\n   data0050 â†’ data0025 â†’ data0026 â†’ data0017\r\n   \r\n   Manufactured Part BOM:\r\n   data0017 â†’ data0025 â†’ data0026 â†’ data0017\r\n   \r\n   ============================================ */"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,QAAQ,GAAG,CAAC;IAEZ,MAAM,UAAU,MAAM,IAAA,6KAAgB,EAAC,8IAAW;IAElD,IAAI,CAAC,SAAS;QACZ,QAAQ,GAAG,CAAC;QACZ,OAAO,kKAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;IACpE;IAEA,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,QAAQ,GAAG,CAAC,oBAAoB;QAEhC,MAAM,EAAE,KAAK,EAAE,QAAQ,CAAC,EAAE,kBAAkB,KAAK,EAAE,GAAG;QAEtD,IAAI,CAAC,OAAO;YACV,QAAQ,GAAG,CAAC;YACZ,OAAO,kKAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAoB,GAC7B;gBAAE,QAAQ;YAAI;QAElB;QAEA,QAAQ,GAAG,CAAC,CAAC,qBAAqB,EAAE,MAAM,mBAAmB,EAAE,gBAAgB,SAAS,EAAE,OAAO;QAEjG,IAAI;QACJ,IAAI;QAEJ,kFAAkF;QAClF,IAAI,iBAAiB;YACnB,QAAQ,GAAG,CAAC;YACZ,yDAAyD;YACzD,uDAAuD;YACvD,QAAQ,CAAC;;;;;;;;;;;;;;;;;;;;MAoBT,CAAC;YACD,SAAS;gBAAE,YAAY;YAAM;QAC/B,OAAO;YACL,QAAQ,GAAG,CAAC;YACZ,qCAAqC;YACrC,iDAAiD;YACjD,QAAQ,CAAC;;;;;;;;;;;;;;;;;;;MAmBT,CAAC;YACD,SAAS;gBAAE,YAAY,GAAG,MAAM,CAAC,CAAC;YAAC;QACrC;QAEA,QAAQ,GAAG,CAAC,oCAAoC;QAEhD,uCAAuC;QACvC,MAAM,OAAO,MAAM,IAAA,oJAAU,EAAC,KAAK,OAAO;QAE1C,QAAQ,GAAG,CAAC,CAAC,0BAA0B,EAAE,KAAK,MAAM,CAAC,WAAW,CAAC;QAEjE,0CAA0C;QAC1C,MAAM,UAAU,KAAK,GAAG,CAAC,CAAC,KAAU,QAAkB,CAAC;gBACrD,IAAI,GAAG,IAAI,cAAc,CAAC,CAAC,EAAE,MAAM,CAAC,EAAE,OAAO;gBAC7C,aAAa,IAAI,cAAc;gBAC/B,aAAa,IAAI,WAAW,IAAI;gBAChC,UAAU,WAAW,IAAI,QAAQ,KAAK;gBACtC,SAAS,IAAI,OAAO,IAAI;gBACxB,MAAM,IAAI,QAAQ,IAAI;gBACtB,OAAO;gBACP,cAAc,QAAQ,IAAI,YAAY;gBACtC,aAAa,IAAI,WAAW;gBAC5B,gBAAgB,IAAI,cAAc;gBAClC,SAAS,IAAI,OAAO;YACtB,CAAC;QAED,QAAQ,GAAG,CAAC,yBAAyB,QAAQ,MAAM;QAEnD,OAAO,kKAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT;YACA,OAAO,QAAQ,MAAM;YACrB,OAAO;gBACL,YAAY;gBACZ;gBACA;YACF;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qBAAqB;QACnC,QAAQ,KAAK,CAAC,kBAAkB,iBAAiB,QAAQ,MAAM,OAAO,GAAG,OAAO;QAChF,QAAQ,KAAK,CAAC,gBAAgB,iBAAiB,QAAQ,MAAM,KAAK,GAAG;QAErE,OAAO,kKAAY,CAAC,IAAI,CACtB;YACE,OAAO;YACP,SAAS,iBAAiB,QAAQ,MAAM,OAAO,GAAG;YAClD,OAAO,uCAA0C,iBAAiB,QAAQ,MAAM,KAAK,GAAG,YAAa;QACvG,GACA;YAAE,QAAQ;QAAI;IAElB;AACF,EAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gDAmCgD","debugId":null}}]
}