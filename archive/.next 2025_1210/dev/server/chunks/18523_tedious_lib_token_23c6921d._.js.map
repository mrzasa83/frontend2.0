{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///users/mrzasa/projects/current/frontend2.4/node_modules/tedious/src/token/token.ts"],"sourcesContent":["import { Collation } from '../collation';\nimport { type Metadata } from '../metadata-parser';\nimport { type ColumnMetadata } from './colmetadata-token-parser';\nimport { TokenHandler } from './handler';\n\nexport const TYPE = {\n  ALTMETADATA: 0x88,\n  ALTROW: 0xD3,\n  COLMETADATA: 0x81,\n  COLINFO: 0xA5,\n  DONE: 0xFD,\n  DONEPROC: 0xFE,\n  DONEINPROC: 0xFF,\n  ENVCHANGE: 0xE3,\n  ERROR: 0xAA,\n  FEATUREEXTACK: 0xAE,\n  FEDAUTHINFO: 0xEE,\n  INFO: 0xAB,\n  LOGINACK: 0xAD,\n  NBCROW: 0xD2,\n  OFFSET: 0x78,\n  ORDER: 0xA9,\n  RETURNSTATUS: 0x79,\n  RETURNVALUE: 0xAC,\n  ROW: 0xD1,\n  SSPI: 0xED,\n  TABNAME: 0xA4\n};\n\ntype HandlerName = keyof TokenHandler;\n\nexport abstract class Token {\n  declare name: string;\n  declare handlerName: keyof TokenHandler;\n\n  constructor(name: string, handlerName: HandlerName) {\n    this.name = name;\n    this.handlerName = handlerName;\n  }\n}\n\nexport class ColMetadataToken extends Token {\n  declare name: 'COLMETADATA';\n  declare handlerName: 'onColMetadata';\n\n  declare columns: ColumnMetadata[];\n\n  constructor(columns: ColumnMetadata[]) {\n    super('COLMETADATA', 'onColMetadata');\n\n    this.columns = columns;\n  }\n}\n\nexport class DoneToken extends Token {\n  declare name: 'DONE';\n  declare handlerName: 'onDone';\n\n  declare more: boolean;\n  declare sqlError: boolean;\n  declare attention: boolean;\n  declare serverError: boolean;\n  declare rowCount: number | undefined;\n  declare curCmd: number;\n\n  constructor({ more, sqlError, attention, serverError, rowCount, curCmd }: { more: boolean, sqlError: boolean, attention: boolean, serverError: boolean, rowCount: number | undefined, curCmd: number }) {\n    super('DONE', 'onDone');\n\n    this.more = more;\n    this.sqlError = sqlError;\n    this.attention = attention;\n    this.serverError = serverError;\n    this.rowCount = rowCount;\n    this.curCmd = curCmd;\n  }\n}\n\nexport class DoneInProcToken extends Token {\n  declare name: 'DONEINPROC';\n  declare handlerName: 'onDoneInProc';\n\n  declare more: boolean;\n  declare sqlError: boolean;\n  declare attention: boolean;\n  declare serverError: boolean;\n  declare rowCount: number | undefined;\n  declare curCmd: number;\n\n  constructor({ more, sqlError, attention, serverError, rowCount, curCmd }: { more: boolean, sqlError: boolean, attention: boolean, serverError: boolean, rowCount: number | undefined, curCmd: number }) {\n    super('DONEINPROC', 'onDoneInProc');\n\n    this.more = more;\n    this.sqlError = sqlError;\n    this.attention = attention;\n    this.serverError = serverError;\n    this.rowCount = rowCount;\n    this.curCmd = curCmd;\n  }\n}\n\nexport class DoneProcToken extends Token {\n  declare name: 'DONEPROC';\n  declare handlerName: 'onDoneProc';\n\n  declare more: boolean;\n  declare sqlError: boolean;\n  declare attention: boolean;\n  declare serverError: boolean;\n  declare rowCount: number | undefined;\n  declare curCmd: number;\n\n  constructor({ more, sqlError, attention, serverError, rowCount, curCmd }: { more: boolean, sqlError: boolean, attention: boolean, serverError: boolean, rowCount: number | undefined, curCmd: number }) {\n    super('DONEPROC', 'onDoneProc');\n\n    this.more = more;\n    this.sqlError = sqlError;\n    this.attention = attention;\n    this.serverError = serverError;\n    this.rowCount = rowCount;\n    this.curCmd = curCmd;\n  }\n}\n\nexport class DatabaseEnvChangeToken extends Token {\n  declare name: 'ENVCHANGE';\n  declare handlerName: 'onDatabaseChange';\n\n  declare type: 'DATABASE';\n  declare newValue: string;\n  declare oldValue: string;\n\n  constructor(newValue: string, oldValue: string) {\n    super('ENVCHANGE', 'onDatabaseChange');\n\n    this.type = 'DATABASE';\n    this.newValue = newValue;\n    this.oldValue = oldValue;\n  }\n}\n\nexport class LanguageEnvChangeToken extends Token {\n  declare name: 'ENVCHANGE';\n  declare handlerName: 'onLanguageChange';\n\n  declare type: 'LANGUAGE';\n  declare newValue: string;\n  declare oldValue: string;\n\n  constructor(newValue: string, oldValue: string) {\n    super('ENVCHANGE', 'onLanguageChange');\n\n    this.type = 'LANGUAGE';\n    this.newValue = newValue;\n    this.oldValue = oldValue;\n  }\n}\n\nexport class CharsetEnvChangeToken extends Token {\n  declare name: 'ENVCHANGE';\n  declare handlerName: 'onCharsetChange';\n\n  declare type: 'CHARSET';\n  declare newValue: string;\n  declare oldValue: string;\n\n  constructor(newValue: string, oldValue: string) {\n    super('ENVCHANGE', 'onCharsetChange');\n\n    this.type = 'CHARSET';\n    this.newValue = newValue;\n    this.oldValue = oldValue;\n  }\n}\n\nexport class PacketSizeEnvChangeToken extends Token {\n  declare name: 'ENVCHANGE';\n  declare handlerName: 'onPacketSizeChange';\n\n  declare type: 'PACKET_SIZE';\n  declare newValue: number;\n  declare oldValue: number;\n\n  constructor(newValue: number, oldValue: number) {\n    super('ENVCHANGE', 'onPacketSizeChange');\n\n    this.type = 'PACKET_SIZE';\n    this.newValue = newValue;\n    this.oldValue = oldValue;\n  }\n}\n\nexport class BeginTransactionEnvChangeToken extends Token {\n  declare name: 'ENVCHANGE';\n  declare handlerName: 'onBeginTransaction';\n\n  declare type: 'BEGIN_TXN';\n  declare newValue: Buffer;\n  declare oldValue: Buffer;\n\n  constructor(newValue: Buffer, oldValue: Buffer) {\n    super('ENVCHANGE', 'onBeginTransaction');\n\n    this.type = 'BEGIN_TXN';\n    this.newValue = newValue;\n    this.oldValue = oldValue;\n  }\n}\n\nexport class CommitTransactionEnvChangeToken extends Token {\n  declare name: 'ENVCHANGE';\n  declare handlerName: 'onCommitTransaction';\n\n  declare type: 'COMMIT_TXN';\n  declare newValue: Buffer;\n  declare oldValue: Buffer;\n\n  constructor(newValue: Buffer, oldValue: Buffer) {\n    super('ENVCHANGE', 'onCommitTransaction');\n\n    this.type = 'COMMIT_TXN';\n    this.newValue = newValue;\n    this.oldValue = oldValue;\n  }\n}\n\nexport class RollbackTransactionEnvChangeToken extends Token {\n  declare name: 'ENVCHANGE';\n  declare handlerName: 'onRollbackTransaction';\n\n  declare type: 'ROLLBACK_TXN';\n  declare oldValue: Buffer;\n  declare newValue: Buffer;\n\n  constructor(newValue: Buffer, oldValue: Buffer) {\n    super('ENVCHANGE', 'onRollbackTransaction');\n\n    this.type = 'ROLLBACK_TXN';\n    this.newValue = newValue;\n    this.oldValue = oldValue;\n  }\n}\n\nexport class DatabaseMirroringPartnerEnvChangeToken extends Token {\n  declare name: 'ENVCHANGE';\n  declare handlerName: 'onDatabaseMirroringPartner';\n\n  declare type: 'DATABASE_MIRRORING_PARTNER';\n  declare oldValue: string;\n  declare newValue: string;\n\n  constructor(newValue: string, oldValue: string) {\n    super('ENVCHANGE', 'onDatabaseMirroringPartner');\n\n    this.type = 'DATABASE_MIRRORING_PARTNER';\n    this.newValue = newValue;\n    this.oldValue = oldValue;\n  }\n}\n\nexport class ResetConnectionEnvChangeToken extends Token {\n  declare name: 'ENVCHANGE';\n  declare handlerName: 'onResetConnection';\n\n  declare type: 'RESET_CONNECTION';\n  declare oldValue: Buffer;\n  declare newValue: Buffer;\n\n  constructor(newValue: Buffer, oldValue: Buffer) {\n    super('ENVCHANGE', 'onResetConnection');\n\n    this.type = 'RESET_CONNECTION';\n    this.newValue = newValue;\n    this.oldValue = oldValue;\n  }\n}\n\nexport type EnvChangeToken =\n  DatabaseEnvChangeToken |\n  LanguageEnvChangeToken |\n  CharsetEnvChangeToken |\n  PacketSizeEnvChangeToken |\n  BeginTransactionEnvChangeToken |\n  CommitTransactionEnvChangeToken |\n  RollbackTransactionEnvChangeToken |\n  DatabaseMirroringPartnerEnvChangeToken |\n  ResetConnectionEnvChangeToken |\n  RoutingEnvChangeToken |\n  CollationChangeToken;\n\nexport class CollationChangeToken extends Token {\n  declare name: 'ENVCHANGE';\n  declare handlerName: 'onSqlCollationChange';\n\n  declare type: 'SQL_COLLATION';\n  declare oldValue: Collation | undefined;\n  declare newValue: Collation | undefined;\n\n  constructor(newValue: Collation | undefined, oldValue: Collation | undefined) {\n    super('ENVCHANGE', 'onSqlCollationChange');\n\n    this.type = 'SQL_COLLATION';\n    this.newValue = newValue;\n    this.oldValue = oldValue;\n  }\n}\n\nexport class RoutingEnvChangeToken extends Token {\n  declare name: 'ENVCHANGE';\n  declare handlerName: 'onRoutingChange';\n\n  declare type: 'ROUTING_CHANGE';\n  declare newValue: { protocol: number, port: number, server: string };\n  declare oldValue: Buffer;\n\n  constructor(newValue: { protocol: number, port: number, server: string }, oldValue: Buffer) {\n    super('ENVCHANGE', 'onRoutingChange');\n\n    this.type = 'ROUTING_CHANGE';\n    this.newValue = newValue;\n    this.oldValue = oldValue;\n  }\n}\n\nexport class FeatureExtAckToken extends Token {\n  declare name: 'FEATUREEXTACK';\n  declare handlerName: 'onFeatureExtAck';\n\n  declare fedAuth: Buffer | undefined;\n\n  /** Value of UTF8_SUPPORT acknowledgement.\n   *\n   * undefined when UTF8_SUPPORT not included in token. */\n  declare utf8Support: boolean | undefined;\n\n  constructor(fedAuth: Buffer | undefined, utf8Support: boolean | undefined) {\n    super('FEATUREEXTACK', 'onFeatureExtAck');\n\n    this.fedAuth = fedAuth;\n    this.utf8Support = utf8Support;\n  }\n}\n\nexport class FedAuthInfoToken extends Token {\n  declare name: 'FEDAUTHINFO';\n  declare handlerName: 'onFedAuthInfo';\n\n  declare spn: string | undefined;\n  declare stsurl: string | undefined;\n\n  constructor(spn: string | undefined, stsurl: string | undefined) {\n    super('FEDAUTHINFO', 'onFedAuthInfo');\n\n    this.spn = spn;\n    this.stsurl = stsurl;\n  }\n}\n\nexport class InfoMessageToken extends Token {\n  declare name: 'INFO';\n  declare handlerName: 'onInfoMessage';\n\n  declare number: number;\n  declare state: number;\n  declare class: number;\n  declare message: string;\n  declare serverName: string;\n  declare procName: string;\n  declare lineNumber: number;\n\n  constructor({ number, state, class: clazz, message, serverName, procName, lineNumber }: { number: number, state: number, class: number, message: string, serverName: string, procName: string, lineNumber: number }) {\n    super('INFO', 'onInfoMessage');\n\n    this.number = number;\n    this.state = state;\n    this.class = clazz;\n    this.message = message;\n    this.serverName = serverName;\n    this.procName = procName;\n    this.lineNumber = lineNumber;\n  }\n}\n\nexport class ErrorMessageToken extends Token {\n  declare name: 'ERROR';\n  declare handlerName: 'onErrorMessage';\n\n  declare number: number;\n  declare state: number;\n  declare class: number;\n  declare message: string;\n  declare serverName: string;\n  declare procName: string;\n  declare lineNumber: number;\n\n  constructor({ number, state, class: clazz, message, serverName, procName, lineNumber }: { number: number, state: number, class: number, message: string, serverName: string, procName: string, lineNumber: number }) {\n    super('ERROR', 'onErrorMessage');\n\n    this.number = number;\n    this.state = state;\n    this.class = clazz;\n    this.message = message;\n    this.serverName = serverName;\n    this.procName = procName;\n    this.lineNumber = lineNumber;\n  }\n}\n\nexport class LoginAckToken extends Token {\n  declare name: 'LOGINACK';\n  declare handlerName: 'onLoginAck';\n\n  declare interface: string;\n  declare tdsVersion: string;\n  declare progName: string;\n  declare progVersion: { major: number, minor: number, buildNumHi: number, buildNumLow: number };\n\n  constructor({ interface: interfaze, tdsVersion, progName, progVersion }: { interface: LoginAckToken['interface'], tdsVersion: LoginAckToken['tdsVersion'], progName: LoginAckToken['progName'], progVersion: LoginAckToken['progVersion'] }) {\n    super('LOGINACK', 'onLoginAck');\n\n    this.interface = interfaze;\n    this.tdsVersion = tdsVersion;\n    this.progName = progName;\n    this.progVersion = progVersion;\n  }\n}\n\nexport class NBCRowToken extends Token {\n  declare name: 'NBCROW';\n  declare handlerName: 'onRow';\n\n  declare columns: any;\n\n  constructor(columns: any) {\n    super('NBCROW', 'onRow');\n\n    this.columns = columns;\n  }\n}\n\nexport class OrderToken extends Token {\n  declare name: 'ORDER';\n  declare handlerName: 'onOrder';\n\n  declare orderColumns: number[];\n\n  constructor(orderColumns: number[]) {\n    super('ORDER', 'onOrder');\n\n    this.orderColumns = orderColumns;\n  }\n}\n\nexport class ReturnStatusToken extends Token {\n  declare name: 'RETURNSTATUS';\n  declare handlerName: 'onReturnStatus';\n\n  declare value: number;\n\n  constructor(value: number) {\n    super('RETURNSTATUS', 'onReturnStatus');\n\n    this.value = value;\n  }\n}\n\nexport class ReturnValueToken extends Token {\n  declare name: 'RETURNVALUE';\n  declare handlerName: 'onReturnValue';\n\n  declare paramOrdinal: number;\n  declare paramName: string;\n  declare metadata: Metadata;\n  declare value: unknown;\n\n  constructor({ paramOrdinal, paramName, metadata, value }: { paramOrdinal: number, paramName: string, metadata: Metadata, value: unknown }) {\n    super('RETURNVALUE', 'onReturnValue');\n\n    this.paramOrdinal = paramOrdinal;\n    this.paramName = paramName;\n    this.metadata = metadata;\n    this.value = value;\n  }\n}\n\nexport class RowToken extends Token {\n  declare name: 'ROW';\n  declare handlerName: 'onRow';\n\n  declare columns: any;\n\n  constructor(columns: any) {\n    super('ROW', 'onRow');\n\n    this.columns = columns;\n  }\n}\n\nexport class SSPIToken extends Token {\n  declare name: 'SSPICHALLENGE';\n  declare handlerName: 'onSSPI';\n\n  declare ntlmpacket: any;\n  declare ntlmpacketBuffer: Buffer;\n\n  constructor(ntlmpacket: any, ntlmpacketBuffer: Buffer) {\n    super('SSPICHALLENGE', 'onSSPI');\n\n    this.ntlmpacket = ntlmpacket;\n    this.ntlmpacketBuffer = ntlmpacketBuffer;\n  }\n}\n"],"names":["TYPE","exports","ALTMETADATA","ALTROW","COLMETADATA","COLINFO","DONE","DONEPROC","DONEINPROC","ENVCHANGE","ERROR","FEATUREEXTACK","FEDAUTHINFO","INFO","LOGINACK","NBCROW","OFFSET","ORDER","RETURNSTATUS","RETURNVALUE","ROW","SSPI","TABNAME","Token","constructor","name","handlerName","ColMetadataToken","columns","DoneToken","more","sqlError","attention","serverError","rowCount","curCmd","DoneInProcToken","DoneProcToken","DatabaseEnvChangeToken","newValue","oldValue","type","LanguageEnvChangeToken","CharsetEnvChangeToken","PacketSizeEnvChangeToken","BeginTransactionEnvChangeToken","CommitTransactionEnvChangeToken","RollbackTransactionEnvChangeToken","DatabaseMirroringPartnerEnvChangeToken","ResetConnectionEnvChangeToken","CollationChangeToken","RoutingEnvChangeToken","FeatureExtAckToken","fedAuth","utf8Support","FedAuthInfoToken","spn","stsurl","InfoMessageToken","number","state","class","clazz","message","serverName","procName","lineNumber","ErrorMessageToken","LoginAckToken","interface","interfaze","tdsVersion","progName","progVersion","NBCRowToken","OrderToken","orderColumns","ReturnStatusToken","value","ReturnValueToken","paramOrdinal","paramName","metadata","RowToken","SSPIToken","ntlmpacket","ntlmpacketBuffer"],"mappings":"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","debugId":null}},
    {"offset": {"line": 284, "column": 0}, "map": {"version":3,"sources":["file:///users/mrzasa/projects/current/frontend2.4/node_modules/tedious/src/token/helpers.ts"],"sourcesContent":["export class Result<T> {\n  declare value: T;\n  declare offset: number;\n\n  constructor(value: T, offset: number) {\n    this.value = value;\n    this.offset = offset;\n  }\n}\n\nexport class NotEnoughDataError extends Error {\n  byteCount: number;\n\n  constructor(byteCount: number) {\n    super();\n\n    this.byteCount = byteCount;\n  }\n}\n\nexport function readUInt8(buf: Buffer, offset: number): Result<number> {\n  offset = +offset;\n\n  if (buf.length < offset + 1) {\n    throw new NotEnoughDataError(offset + 1);\n  }\n\n  return new Result(buf.readUInt8(offset), offset + 1);\n}\n\nexport function readUInt16LE(buf: Buffer, offset: number): Result<number> {\n  offset = +offset;\n\n  if (buf.length < offset + 2) {\n    throw new NotEnoughDataError(offset + 2);\n  }\n\n  return new Result(buf.readUInt16LE(offset), offset + 2);\n}\n\nexport function readInt16LE(buf: Buffer, offset: number): Result<number> {\n  offset = +offset;\n\n  if (buf.length < offset + 2) {\n    throw new NotEnoughDataError(offset + 2);\n  }\n\n  return new Result(buf.readInt16LE(offset), offset + 2);\n}\n\nexport function readUInt24LE(buf: Buffer, offset: number): Result<number> {\n  offset = +offset;\n\n  if (buf.length < offset + 3) {\n    throw new NotEnoughDataError(offset + 3);\n  }\n\n  return new Result(buf.readUIntLE(offset, 3), offset + 3);\n}\n\nexport function readUInt32LE(buf: Buffer, offset: number): Result<number> {\n  offset = +offset;\n\n  if (buf.length < offset + 4) {\n    throw new NotEnoughDataError(offset + 4);\n  }\n\n  return new Result(buf.readUInt32LE(offset), offset + 4);\n}\n\nexport function readUInt32BE(buf: Buffer, offset: number): Result<number> {\n  offset = +offset;\n\n  if (buf.length < offset + 4) {\n    throw new NotEnoughDataError(offset + 4);\n  }\n\n  return new Result(buf.readUInt32BE(offset), offset + 4);\n}\n\nexport function readUInt40LE(buf: Buffer, offset: number): Result<number> {\n  offset = +offset;\n\n  if (buf.length < offset + 5) {\n    throw new NotEnoughDataError(offset + 5);\n  }\n\n  return new Result(buf.readUIntLE(offset, 5), offset + 5);\n}\nexport function readInt32LE(buf: Buffer, offset: number): Result<number> {\n  offset = +offset;\n\n  if (buf.length < offset + 4) {\n    throw new NotEnoughDataError(offset + 4);\n  }\n\n  return new Result(buf.readInt32LE(offset), offset + 4);\n}\n\nexport function readBigUInt64LE(buf: Buffer, offset: number): Result<bigint> {\n  offset = +offset;\n\n  if (buf.length < offset + 8) {\n    throw new NotEnoughDataError(offset + 8);\n  }\n\n  return new Result(buf.readBigUInt64LE(offset), offset + 8);\n}\n\nexport function readBigInt64LE(buf: Buffer, offset: number): Result<bigint> {\n  offset = +offset;\n\n  if (buf.length < offset + 8) {\n    throw new NotEnoughDataError(offset + 8);\n  }\n\n  return new Result(buf.readBigInt64LE(offset), offset + 8);\n}\n\nexport function readFloatLE(buf: Buffer, offset: number): Result<number> {\n  offset = +offset;\n\n  if (buf.length < offset + 4) {\n    throw new NotEnoughDataError(offset + 4);\n  }\n\n  return new Result(buf.readFloatLE(offset), offset + 4);\n}\n\nexport function readDoubleLE(buf: Buffer, offset: number): Result<number> {\n  offset = +offset;\n\n  if (buf.length < offset + 8) {\n    throw new NotEnoughDataError(offset + 8);\n  }\n\n  return new Result(buf.readDoubleLE(offset), offset + 8);\n}\n\nexport function readBVarChar(buf: Buffer, offset: number): Result<string> {\n  offset = +offset;\n\n  let charCount;\n  ({ offset, value: charCount } = readUInt8(buf, offset));\n\n  const byteLength = charCount * 2;\n\n  if (buf.length < offset + byteLength) {\n    throw new NotEnoughDataError(offset + byteLength);\n  }\n\n  return new Result(buf.toString('ucs2', offset, offset + byteLength), offset + byteLength);\n}\n\nexport function readBVarByte(buf: Buffer, offset: number): Result<Buffer> {\n  offset = +offset;\n\n  let byteLength;\n  ({ offset, value: byteLength } = readUInt8(buf, offset));\n\n  if (buf.length < offset + byteLength) {\n    throw new NotEnoughDataError(offset + byteLength);\n  }\n\n  return new Result(buf.slice(offset, offset + byteLength), offset + byteLength);\n}\n\nexport function readUsVarChar(buf: Buffer, offset: number): Result<string> {\n  offset = +offset;\n\n  let charCount;\n  ({ offset, value: charCount } = readUInt16LE(buf, offset));\n\n  const byteLength = charCount * 2;\n\n  if (buf.length < offset + byteLength) {\n    throw new NotEnoughDataError(offset + byteLength);\n  }\n\n  return new Result(buf.toString('ucs2', offset, offset + byteLength), offset + byteLength);\n}\n\nexport function readUsVarByte(buf: Buffer, offset: number): Result<Buffer> {\n  offset = +offset;\n\n  let byteLength;\n  ({ offset, value: byteLength } = readUInt16LE(buf, offset));\n\n  if (buf.length < offset + byteLength) {\n    throw new NotEnoughDataError(offset + byteLength);\n  }\n\n  return new Result(buf.slice(offset, offset + byteLength), offset + byteLength);\n}\n\nexport function readUNumeric64LE(buf: Buffer, offset: number): Result<number> {\n  offset = +offset;\n\n  if (buf.length < offset + 8) {\n    throw new NotEnoughDataError(offset + 8);\n  }\n\n  const low = buf.readUInt32LE(offset);\n  const high = buf.readUInt32LE(offset + 4);\n\n  return new Result((0x100000000 * high) + low, offset + 8);\n}\n\nexport function readUNumeric96LE(buf: Buffer, offset: number): Result<number> {\n  offset = +offset;\n\n  if (buf.length < offset + 12) {\n    throw new NotEnoughDataError(offset + 12);\n  }\n\n  const dword1 = buf.readUInt32LE(offset);\n  const dword2 = buf.readUInt32LE(offset + 4);\n  const dword3 = buf.readUInt32LE(offset + 8);\n\n  return new Result(dword1 + (0x100000000 * dword2) + (0x100000000 * 0x100000000 * dword3), offset + 12);\n}\n\nexport function readUNumeric128LE(buf: Buffer, offset: number): Result<number> {\n  offset = +offset;\n\n  if (buf.length < offset + 16) {\n    throw new NotEnoughDataError(offset + 16);\n  }\n\n  const dword1 = buf.readUInt32LE(offset);\n  const dword2 = buf.readUInt32LE(offset + 4);\n  const dword3 = buf.readUInt32LE(offset + 8);\n  const dword4 = buf.readUInt32LE(offset + 12);\n\n  return new Result(dword1 + (0x100000000 * dword2) + (0x100000000 * 0x100000000 * dword3) + (0x100000000 * 0x100000000 * 0x100000000 * dword4), offset + 16);\n}\n"],"names":["Result","constructor","value","offset","exports","NotEnoughDataError","Error","byteCount","readUInt8","buf","length","readUInt16LE","readInt16LE","readUInt24LE","readUIntLE","readUInt32LE","readUInt32BE","readUInt40LE","readInt32LE","readBigUInt64LE","readBigInt64LE","readFloatLE","readDoubleLE","readBVarChar","charCount","byteLength","toString","readBVarByte","slice","readUsVarChar","readUsVarByte","readUNumeric64LE","low","high","readUNumeric96LE","dword1","dword2","dword3","readUNumeric128LE","dword4"],"mappings":"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","debugId":null}},
    {"offset": {"line": 478, "column": 0}, "map": {"version":3,"sources":["file:///users/mrzasa/projects/current/frontend2.4/node_modules/tedious/src/token/colmetadata-token-parser.ts"],"sourcesContent":["import { readMetadata, type Metadata } from '../metadata-parser';\n\nimport Parser, { type ParserOptions } from './stream-parser';\nimport { ColMetadataToken } from './token';\nimport { NotEnoughDataError, Result, readBVarChar, readUInt16LE, readUInt8, readUsVarChar } from './helpers';\n\nexport interface ColumnMetadata extends Metadata {\n  /**\n   * The column's nameã€‚\n   */\n  colName: string;\n\n  tableName?: string | string[] | undefined;\n}\n\nfunction readTableName(buf: Buffer, offset: number, metadata: Metadata, options: ParserOptions): Result<string | string[] | undefined> {\n  if (!metadata.type.hasTableName) {\n    return new Result(undefined, offset);\n  }\n\n  if (options.tdsVersion < '7_2') {\n    return readUsVarChar(buf, offset);\n  }\n\n  let numberOfTableNameParts;\n  ({ offset, value: numberOfTableNameParts } = readUInt8(buf, offset));\n\n  const tableName: string[] = [];\n  for (let i = 0; i < numberOfTableNameParts; i++) {\n    let tableNamePart;\n    ({ offset, value: tableNamePart } = readUsVarChar(buf, offset));\n\n    tableName.push(tableNamePart);\n  }\n\n  return new Result(tableName, offset);\n}\n\nfunction readColumnName(buf: Buffer, offset: number, index: number, metadata: Metadata, options: ParserOptions): Result<string> {\n  let colName;\n  ({ offset, value: colName } = readBVarChar(buf, offset));\n\n  if (options.columnNameReplacer) {\n    return new Result(options.columnNameReplacer(colName, index, metadata), offset);\n  } else if (options.camelCaseColumns) {\n    return new Result(colName.replace(/^[A-Z]/, function(s) {\n      return s.toLowerCase();\n    }), offset);\n  } else {\n    return new Result(colName, offset);\n  }\n}\n\nfunction readColumn(buf: Buffer, offset: number, options: ParserOptions, index: number) {\n  let metadata;\n  ({ offset, value: metadata } = readMetadata(buf, offset, options));\n\n  let tableName;\n  ({ offset, value: tableName } = readTableName(buf, offset, metadata, options));\n\n  let colName;\n  ({ offset, value: colName } = readColumnName(buf, offset, index, metadata, options));\n\n  return new Result({\n    userType: metadata.userType,\n    flags: metadata.flags,\n    type: metadata.type,\n    collation: metadata.collation,\n    precision: metadata.precision,\n    scale: metadata.scale,\n    udtInfo: metadata.udtInfo,\n    dataLength: metadata.dataLength,\n    schema: metadata.schema,\n    colName: colName,\n    tableName: tableName\n  }, offset);\n}\n\nasync function colMetadataParser(parser: Parser): Promise<ColMetadataToken> {\n  let columnCount;\n\n  while (true) {\n    let offset;\n\n    try {\n      ({ offset, value: columnCount } = readUInt16LE(parser.buffer, parser.position));\n    } catch (err) {\n      if (err instanceof NotEnoughDataError) {\n        await parser.waitForChunk();\n        continue;\n      }\n\n      throw err;\n    }\n\n    parser.position = offset;\n    break;\n  }\n\n  const columns: ColumnMetadata[] = [];\n  for (let i = 0; i < columnCount; i++) {\n    while (true) {\n      let column: ColumnMetadata;\n      let offset;\n\n      try {\n        ({ offset, value: column } = readColumn(parser.buffer, parser.position, parser.options, i));\n      } catch (err: any) {\n        if (err instanceof NotEnoughDataError) {\n          await parser.waitForChunk();\n          continue;\n        }\n\n        throw err;\n      }\n\n      parser.position = offset;\n      columns.push(column);\n\n      break;\n    }\n  }\n\n  return new ColMetadataToken(columns);\n}\n\nexport default colMetadataParser;\nmodule.exports = colMetadataParser;\n"],"names":["_metadataParser","require","_token","_helpers","readTableName","buf","offset","metadata","options","type","hasTableName","Result","undefined","tdsVersion","readUsVarChar","numberOfTableNameParts","value","readUInt8","tableName","i","tableNamePart","push","readColumnName","index","colName","readBVarChar","columnNameReplacer","camelCaseColumns","replace","s","toLowerCase","readColumn","readMetadata","userType","flags","collation","precision","scale","udtInfo","dataLength","schema","colMetadataParser","parser","columnCount","readUInt16LE","buffer","position","err","NotEnoughDataError","waitForChunk","columns","column","ColMetadataToken","_default","exports","default","module"],"mappings":"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","debugId":null}},
    {"offset": {"line": 579, "column": 0}, "map": {"version":3,"sources":["file:///users/mrzasa/projects/current/frontend2.4/node_modules/tedious/src/token/done-token-parser.ts"],"sourcesContent":["import { type ParserOptions } from './stream-parser';\nimport { DoneToken, DoneInProcToken, DoneProcToken } from './token';\nimport { Result, readBigUInt64LE, readUInt16LE, readUInt32LE } from './helpers';\n\n// s2.2.7.5/6/7\n\nconst STATUS = {\n  MORE: 0x0001,\n  ERROR: 0x0002,\n  // This bit is not yet in use by SQL Server, so is not exposed in the returned token\n  INXACT: 0x0004,\n  COUNT: 0x0010,\n  ATTN: 0x0020,\n  SRVERROR: 0x0100\n};\n\ninterface TokenData {\n  more: boolean;\n  sqlError: boolean;\n  attention: boolean;\n  serverError: boolean;\n  rowCount: number | undefined;\n  curCmd: number;\n}\n\nfunction readToken(buf: Buffer, offset: number, options: ParserOptions): Result<TokenData> {\n  let status;\n  ({ offset, value: status } = readUInt16LE(buf, offset));\n\n  const more = !!(status & STATUS.MORE);\n  const sqlError = !!(status & STATUS.ERROR);\n  const rowCountValid = !!(status & STATUS.COUNT);\n  const attention = !!(status & STATUS.ATTN);\n  const serverError = !!(status & STATUS.SRVERROR);\n\n  let curCmd;\n  ({ offset, value: curCmd } = readUInt16LE(buf, offset));\n\n  let rowCount;\n  ({ offset, value: rowCount } = (options.tdsVersion < '7_2' ? readUInt32LE : readBigUInt64LE)(buf, offset));\n\n  return new Result({\n    more: more,\n    sqlError: sqlError,\n    attention: attention,\n    serverError: serverError,\n    rowCount: rowCountValid ? Number(rowCount) : undefined,\n    curCmd: curCmd\n  }, offset);\n}\n\nexport function doneParser(buf: Buffer, offset: number, options: ParserOptions): Result<DoneToken> {\n  let value;\n  ({ offset, value } = readToken(buf, offset, options));\n  return new Result(new DoneToken(value), offset);\n}\n\nexport function doneInProcParser(buf: Buffer, offset: number, options: ParserOptions): Result<DoneInProcToken> {\n  let value;\n  ({ offset, value } = readToken(buf, offset, options));\n  return new Result(new DoneInProcToken(value), offset);\n}\n\nexport function doneProcParser(buf: Buffer, offset: number, options: ParserOptions): Result<DoneProcToken> {\n  let value;\n  ({ offset, value } = readToken(buf, offset, options));\n  return new Result(new DoneProcToken(value), offset);\n}\n"],"names":["_token","require","_helpers","STATUS","MORE","ERROR","INXACT","COUNT","ATTN","SRVERROR","readToken","buf","offset","options","status","value","readUInt16LE","more","sqlError","rowCountValid","attention","serverError","curCmd","rowCount","tdsVersion","readUInt32LE","readBigUInt64LE","Result","Number","undefined","doneParser","DoneToken","doneInProcParser","DoneInProcToken","doneProcParser","DoneProcToken"],"mappings":"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","debugId":null}},
    {"offset": {"line": 637, "column": 0}, "map": {"version":3,"sources":["file:///users/mrzasa/projects/current/frontend2.4/node_modules/tedious/src/token/env-change-token-parser.ts"],"sourcesContent":["import { type ParserOptions } from './stream-parser';\nimport { Collation } from '../collation';\n\nimport {\n  DatabaseEnvChangeToken,\n  LanguageEnvChangeToken,\n  CharsetEnvChangeToken,\n  PacketSizeEnvChangeToken,\n  BeginTransactionEnvChangeToken,\n  CommitTransactionEnvChangeToken,\n  RollbackTransactionEnvChangeToken,\n  DatabaseMirroringPartnerEnvChangeToken,\n  ResetConnectionEnvChangeToken,\n  RoutingEnvChangeToken,\n  CollationChangeToken,\n  type EnvChangeToken\n} from './token';\n\nimport { NotEnoughDataError, readBVarByte, readBVarChar, readUInt16LE, readUInt8, readUsVarByte, Result } from './helpers';\n\nconst types: { [key: number]: { name: string, event?: string }} = {\n  1: {\n    name: 'DATABASE',\n    event: 'databaseChange'\n  },\n  2: {\n    name: 'LANGUAGE',\n    event: 'languageChange'\n  },\n  3: {\n    name: 'CHARSET',\n    event: 'charsetChange'\n  },\n  4: {\n    name: 'PACKET_SIZE',\n    event: 'packetSizeChange'\n  },\n  7: {\n    name: 'SQL_COLLATION',\n    event: 'sqlCollationChange'\n  },\n  8: {\n    name: 'BEGIN_TXN',\n    event: 'beginTransaction'\n  },\n  9: {\n    name: 'COMMIT_TXN',\n    event: 'commitTransaction'\n  },\n  10: {\n    name: 'ROLLBACK_TXN',\n    event: 'rollbackTransaction'\n  },\n  13: {\n    name: 'DATABASE_MIRRORING_PARTNER',\n    event: 'partnerNode'\n  },\n  17: {\n    name: 'TXN_ENDED'\n  },\n  18: {\n    name: 'RESET_CONNECTION',\n    event: 'resetConnection'\n  },\n  20: {\n    name: 'ROUTING_CHANGE',\n    event: 'routingChange'\n  }\n};\n\nfunction _readNewAndOldValue(buf: Buffer, offset: number, length: number, type: { name: string, event?: string }): Result<EnvChangeToken | undefined> {\n  switch (type.name) {\n    case 'DATABASE':\n    case 'LANGUAGE':\n    case 'CHARSET':\n    case 'PACKET_SIZE':\n    case 'DATABASE_MIRRORING_PARTNER': {\n      let newValue;\n      ({ offset, value: newValue } = readBVarChar(buf, offset));\n\n      let oldValue;\n      ({ offset, value: oldValue } = readBVarChar(buf, offset));\n\n      switch (type.name) {\n        case 'PACKET_SIZE':\n          return new Result(new PacketSizeEnvChangeToken(parseInt(newValue), parseInt(oldValue)), offset);\n\n        case 'DATABASE':\n          return new Result(new DatabaseEnvChangeToken(newValue, oldValue), offset);\n\n        case 'LANGUAGE':\n          return new Result(new LanguageEnvChangeToken(newValue, oldValue), offset);\n\n        case 'CHARSET':\n          return new Result(new CharsetEnvChangeToken(newValue, oldValue), offset);\n\n        case 'DATABASE_MIRRORING_PARTNER':\n          return new Result(new DatabaseMirroringPartnerEnvChangeToken(newValue, oldValue), offset);\n      }\n\n      throw new Error('unreachable');\n    }\n\n    case 'SQL_COLLATION':\n    case 'BEGIN_TXN':\n    case 'COMMIT_TXN':\n    case 'ROLLBACK_TXN':\n    case 'RESET_CONNECTION': {\n      let newValue;\n      ({ offset, value: newValue } = readBVarByte(buf, offset));\n\n      let oldValue;\n      ({ offset, value: oldValue } = readBVarByte(buf, offset));\n\n      switch (type.name) {\n        case 'SQL_COLLATION': {\n          const newCollation = newValue.length ? Collation.fromBuffer(newValue) : undefined;\n          const oldCollation = oldValue.length ? Collation.fromBuffer(oldValue) : undefined;\n\n          return new Result(new CollationChangeToken(newCollation, oldCollation), offset);\n        }\n\n        case 'BEGIN_TXN':\n          return new Result(new BeginTransactionEnvChangeToken(newValue, oldValue), offset);\n\n        case 'COMMIT_TXN':\n          return new Result(new CommitTransactionEnvChangeToken(newValue, oldValue), offset);\n\n        case 'ROLLBACK_TXN':\n          return new Result(new RollbackTransactionEnvChangeToken(newValue, oldValue), offset);\n\n        case 'RESET_CONNECTION':\n          return new Result(new ResetConnectionEnvChangeToken(newValue, oldValue), offset);\n      }\n\n      throw new Error('unreachable');\n    }\n\n    case 'ROUTING_CHANGE': {\n      let routePacket;\n      ({ offset, value: routePacket } = readUsVarByte(buf, offset));\n\n      let oldValue;\n      ({ offset, value: oldValue } = readUsVarByte(buf, offset));\n\n      // Routing Change:\n      // Byte 1: Protocol (must be 0)\n      // Bytes 2-3 (USHORT): Port number\n      // Bytes 4-5 (USHORT): Length of server data in unicode (2byte chars)\n      // Bytes 6-*: Server name in unicode characters\n      const protocol = routePacket.readUInt8(0);\n      if (protocol !== 0) {\n        throw new Error('Unknown protocol byte in routing change event');\n      }\n\n      const port = routePacket.readUInt16LE(1);\n      const serverLen = routePacket.readUInt16LE(3);\n      // 2 bytes per char, starting at offset 5\n      const server = routePacket.toString('ucs2', 5, 5 + (serverLen * 2));\n\n      const newValue = {\n        protocol: protocol,\n        port: port,\n        server: server\n      };\n\n      return new Result(new RoutingEnvChangeToken(newValue, oldValue), offset);\n    }\n\n    default: {\n      console.error('Tedious > Unsupported ENVCHANGE type ' + type.name);\n\n      // skip unknown bytes\n      return new Result(undefined, offset + length - 1);\n    }\n  }\n}\n\nfunction envChangeParser(buf: Buffer, offset: number, _options: ParserOptions): Result<EnvChangeToken | undefined> {\n  let tokenLength;\n  ({ offset, value: tokenLength } = readUInt16LE(buf, offset));\n\n  if (buf.length < offset + tokenLength) {\n    throw new NotEnoughDataError(offset + tokenLength);\n  }\n\n  let typeNumber;\n  ({ offset, value: typeNumber } = readUInt8(buf, offset));\n\n  const type = types[typeNumber];\n\n  if (!type) {\n    console.error('Tedious > Unsupported ENVCHANGE type ' + typeNumber);\n    return new Result(undefined, offset + tokenLength - 1);\n  }\n\n  return _readNewAndOldValue(buf, offset, tokenLength, type);\n}\n\nexport default envChangeParser;\nmodule.exports = envChangeParser;\n"],"names":["_collation","require","_token","_helpers","types","name","event","_readNewAndOldValue","buf","offset","length","type","newValue","value","readBVarChar","oldValue","Result","PacketSizeEnvChangeToken","parseInt","DatabaseEnvChangeToken","LanguageEnvChangeToken","CharsetEnvChangeToken","DatabaseMirroringPartnerEnvChangeToken","Error","readBVarByte","newCollation","Collation","fromBuffer","undefined","oldCollation","CollationChangeToken","BeginTransactionEnvChangeToken","CommitTransactionEnvChangeToken","RollbackTransactionEnvChangeToken","ResetConnectionEnvChangeToken","routePacket","readUsVarByte","protocol","readUInt8","port","readUInt16LE","serverLen","server","toString","RoutingEnvChangeToken","console","error","envChangeParser","_options","tokenLength","NotEnoughDataError","typeNumber","_default","exports","default","module"],"mappings":"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","debugId":null}},
    {"offset": {"line": 802, "column": 0}, "map": {"version":3,"sources":["file:///users/mrzasa/projects/current/frontend2.4/node_modules/tedious/src/token/infoerror-token-parser.ts"],"sourcesContent":["import { NotEnoughDataError, readBVarChar, readUInt16LE, readUInt32LE, readUInt8, readUsVarChar, Result } from './helpers';\nimport { type ParserOptions } from './stream-parser';\n\nimport { InfoMessageToken, ErrorMessageToken } from './token';\n\ninterface TokenData {\n  number: number;\n  state: number;\n  class: number;\n  message: string;\n  serverName: string;\n  procName: string;\n  lineNumber: number;\n}\n\nfunction readToken(buf: Buffer, offset: number, options: ParserOptions): Result<TokenData> {\n  let tokenLength;\n  ({ offset, value: tokenLength } = readUInt16LE(buf, offset));\n\n  if (buf.length < tokenLength + offset) {\n    throw new NotEnoughDataError(tokenLength + offset);\n  }\n\n  let number;\n  ({ offset, value: number } = readUInt32LE(buf, offset));\n\n  let state;\n  ({ offset, value: state } = readUInt8(buf, offset));\n\n  let clazz;\n  ({ offset, value: clazz } = readUInt8(buf, offset));\n\n  let message;\n  ({ offset, value: message } = readUsVarChar(buf, offset));\n\n  let serverName;\n  ({ offset, value: serverName } = readBVarChar(buf, offset));\n\n  let procName;\n  ({ offset, value: procName } = readBVarChar(buf, offset));\n\n  let lineNumber;\n  ({ offset, value: lineNumber } = options.tdsVersion < '7_2' ? readUInt16LE(buf, offset) : readUInt32LE(buf, offset));\n\n  return new Result({\n    'number': number,\n    'state': state,\n    'class': clazz,\n    'message': message,\n    'serverName': serverName,\n    'procName': procName,\n    'lineNumber': lineNumber\n  }, offset);\n}\n\nexport function infoParser(buf: Buffer, offset: number, options: ParserOptions): Result<InfoMessageToken> {\n  let data;\n  ({ offset, value: data } = readToken(buf, offset, options));\n\n  return new Result(new InfoMessageToken(data), offset);\n}\n\nexport function errorParser(buf: Buffer, offset: number, options: ParserOptions): Result<ErrorMessageToken> {\n  let data;\n  ({ offset, value: data } = readToken(buf, offset, options));\n\n  return new Result(new ErrorMessageToken(data), offset);\n}\n"],"names":["_helpers","require","_token","readToken","buf","offset","options","tokenLength","value","readUInt16LE","length","NotEnoughDataError","number","readUInt32LE","state","readUInt8","clazz","message","readUsVarChar","serverName","readBVarChar","procName","lineNumber","tdsVersion","Result","infoParser","data","InfoMessageToken","errorParser","ErrorMessageToken"],"mappings":"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","debugId":null}},
    {"offset": {"line": 853, "column": 0}, "map": {"version":3,"sources":["file:///users/mrzasa/projects/current/frontend2.4/node_modules/tedious/src/token/fedauth-info-parser.ts"],"sourcesContent":["import { NotEnoughDataError, readUInt32LE, Result } from './helpers';\nimport { type ParserOptions } from './stream-parser';\nimport { FedAuthInfoToken } from './token';\n\nconst FEDAUTHINFOID = {\n  STSURL: 0x01,\n  SPN: 0x02\n};\n\nfunction readFedAuthInfo(data: Buffer): { spn: string | undefined, stsurl: string | undefined } {\n  let offset = 0;\n  let spn, stsurl;\n\n  const countOfInfoIDs = data.readUInt32LE(offset);\n  offset += 4;\n\n  for (let i = 0; i < countOfInfoIDs; i++) {\n    const fedauthInfoID = data.readUInt8(offset);\n    offset += 1;\n\n    const fedAuthInfoDataLen = data.readUInt32LE(offset);\n    offset += 4;\n\n    const fedAuthInfoDataOffset = data.readUInt32LE(offset);\n    offset += 4;\n\n    switch (fedauthInfoID) {\n      case FEDAUTHINFOID.SPN:\n        spn = data.toString('ucs2', fedAuthInfoDataOffset, fedAuthInfoDataOffset + fedAuthInfoDataLen);\n        break;\n\n      case FEDAUTHINFOID.STSURL:\n        stsurl = data.toString('ucs2', fedAuthInfoDataOffset, fedAuthInfoDataOffset + fedAuthInfoDataLen);\n        break;\n\n      // ignoring unknown fedauthinfo options\n      default:\n        break;\n    }\n  }\n\n  return { spn, stsurl };\n}\n\nfunction fedAuthInfoParser(buf: Buffer, offset: number, _options: ParserOptions): Result<FedAuthInfoToken> {\n  let tokenLength;\n  ({ offset, value: tokenLength } = readUInt32LE(buf, offset));\n\n  if (buf.length < offset + tokenLength) {\n    throw new NotEnoughDataError(offset + tokenLength);\n  }\n\n  const data = buf.slice(offset, offset + tokenLength);\n  offset += tokenLength;\n\n  const { spn, stsurl } = readFedAuthInfo(data);\n  return new Result(new FedAuthInfoToken(spn, stsurl), offset);\n}\n\nexport default fedAuthInfoParser;\nmodule.exports = fedAuthInfoParser;\n"],"names":["_helpers","require","_token","FEDAUTHINFOID","STSURL","SPN","readFedAuthInfo","data","offset","spn","stsurl","countOfInfoIDs","readUInt32LE","i","fedauthInfoID","readUInt8","fedAuthInfoDataLen","fedAuthInfoDataOffset","toString","fedAuthInfoParser","buf","_options","tokenLength","value","length","NotEnoughDataError","slice","Result","FedAuthInfoToken","_default","exports","default","module"],"mappings":";;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AAEA,IAAAC,MAAA,GAAAD,OAAA;AAEA,MAAME,aAAa,GAAG;IACpBC,MAAM,EAAE,IAAI;IACZC,GAAG,EAAE;AACP,CAAC;AAED,SAASC,eAAeA,CAACC,IAAY,EAA2D;IAC9F,IAAIC,MAAM,GAAG,CAAC;IACd,IAAIC,GAAG,EAAEC,MAAM;IAEf,MAAMC,cAAc,GAAGJ,IAAI,CAACK,YAAY,CAACJ,MAAM,CAAC;IAChDA,MAAM,IAAI,CAAC;IAEX,IAAK,IAAIK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,cAAc,EAAEE,CAAC,EAAE,CAAE;QACvC,MAAMC,aAAa,GAAGP,IAAI,CAACQ,SAAS,CAACP,MAAM,CAAC;QAC5CA,MAAM,IAAI,CAAC;QAEX,MAAMQ,kBAAkB,GAAGT,IAAI,CAACK,YAAY,CAACJ,MAAM,CAAC;QACpDA,MAAM,IAAI,CAAC;QAEX,MAAMS,qBAAqB,GAAGV,IAAI,CAACK,YAAY,CAACJ,MAAM,CAAC;QACvDA,MAAM,IAAI,CAAC;QAEX,OAAQM,aAAa;YACnB,KAAKX,aAAa,CAACE,GAAG;gBACpBI,GAAG,GAAGF,IAAI,CAACW,QAAQ,CAAC,MAAM,EAAED,qBAAqB,EAAEA,qBAAqB,GAAGD,kBAAkB,CAAC;gBAC9F;YAEF,KAAKb,aAAa,CAACC,MAAM;gBACvBM,MAAM,GAAGH,IAAI,CAACW,QAAQ,CAAC,MAAM,EAAED,qBAAqB,EAAEA,qBAAqB,GAAGD,kBAAkB,CAAC;gBACjG;YAEF,uCAAA;YACA;gBACE;QACJ;IACF;IAEA,OAAO;QAAEP,GAAG;QAAEC;IAAO,CAAC;AACxB;AAEA,SAASS,iBAAiBA,CAACC,GAAW,EAAEZ,MAAc,EAAEa,QAAuB,EAA4B;IACzG,IAAIC,WAAW;IACf,CAAC,EAAEd,MAAM,EAAEe,KAAK,EAAED,WAAAA,EAAa,GAAG,CAAA,GAAAV,SAAAA,YAAY,EAACQ,GAAG,EAAEZ,MAAM,CAAC;IAE3D,IAAIY,GAAG,CAACI,MAAM,GAAGhB,MAAM,GAAGc,WAAW,EAAE;QACrC,MAAM,IAAIG,SAAAA,kBAAkB,CAACjB,MAAM,GAAGc,WAAW,CAAC;IACpD;IAEA,MAAMf,IAAI,GAAGa,GAAG,CAACM,KAAK,CAAClB,MAAM,EAAEA,MAAM,GAAGc,WAAW,CAAC;IACpDd,MAAM,IAAIc,WAAW;IAErB,MAAM,EAAEb,GAAG,EAAEC,MAAAA,EAAQ,GAAGJ,eAAe,CAACC,IAAI,CAAC;IAC7C,OAAO,IAAIoB,SAAAA,MAAM,CAAC,IAAIC,OAAAA,gBAAgB,CAACnB,GAAG,EAAEC,MAAM,CAAC,EAAEF,MAAM,CAAC;AAC9D;AAAC,IAAAqB,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEcZ,iBAAiB;AAChCa,MAAM,CAACF,OAAO,GAAGX,iBAAiB","debugId":null}},
    {"offset": {"line": 909, "column": 0}, "map": {"version":3,"sources":["file:///users/mrzasa/projects/current/frontend2.4/node_modules/tedious/src/token/feature-ext-ack-parser.ts"],"sourcesContent":["import { NotEnoughDataError, readUInt32LE, readUInt8, Result } from './helpers';\nimport { type ParserOptions } from './stream-parser';\n\nimport { FeatureExtAckToken } from './token';\n\nconst FEATURE_ID = {\n  SESSIONRECOVERY: 0x01,\n  FEDAUTH: 0x02,\n  COLUMNENCRYPTION: 0x04,\n  GLOBALTRANSACTIONS: 0x05,\n  AZURESQLSUPPORT: 0x08,\n  UTF8_SUPPORT: 0x0A,\n  TERMINATOR: 0xFF\n};\n\nfunction featureExtAckParser(buf: Buffer, offset: number, _options: ParserOptions): Result<FeatureExtAckToken> {\n  let fedAuth: Buffer | undefined;\n  let utf8Support: boolean | undefined;\n\n  while (true) {\n    let featureId;\n    ({ value: featureId, offset } = readUInt8(buf, offset));\n\n    if (featureId === FEATURE_ID.TERMINATOR) {\n      return new Result(new FeatureExtAckToken(fedAuth, utf8Support), offset);\n    }\n\n    let featureAckDataLen;\n    ({ value: featureAckDataLen, offset } = readUInt32LE(buf, offset));\n\n    if (buf.length < offset + featureAckDataLen) {\n      throw new NotEnoughDataError(offset + featureAckDataLen);\n    }\n\n    const featureData = buf.slice(offset, offset + featureAckDataLen);\n    offset += featureAckDataLen;\n\n    switch (featureId) {\n      case FEATURE_ID.FEDAUTH:\n        fedAuth = featureData;\n        break;\n      case FEATURE_ID.UTF8_SUPPORT:\n        utf8Support = !!featureData[0];\n        break;\n    }\n  }\n}\n\nexport default featureExtAckParser;\nmodule.exports = featureExtAckParser;\n"],"names":["_helpers","require","_token","FEATURE_ID","SESSIONRECOVERY","FEDAUTH","COLUMNENCRYPTION","GLOBALTRANSACTIONS","AZURESQLSUPPORT","UTF8_SUPPORT","TERMINATOR","featureExtAckParser","buf","offset","_options","fedAuth","utf8Support","featureId","value","readUInt8","Result","FeatureExtAckToken","featureAckDataLen","readUInt32LE","length","NotEnoughDataError","featureData","slice","_default","exports","default","module"],"mappings":";;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AAGA,IAAAC,MAAA,GAAAD,OAAA;AAEA,MAAME,UAAU,GAAG;IACjBC,eAAe,EAAE,IAAI;IACrBC,OAAO,EAAE,IAAI;IACbC,gBAAgB,EAAE,IAAI;IACtBC,kBAAkB,EAAE,IAAI;IACxBC,eAAe,EAAE,IAAI;IACrBC,YAAY,EAAE,IAAI;IAClBC,UAAU,EAAE;AACd,CAAC;AAED,SAASC,mBAAmBA,CAACC,GAAW,EAAEC,MAAc,EAAEC,QAAuB,EAA8B;IAC7G,IAAIC,OAA2B;IAC/B,IAAIC,WAAgC;IAEpC,MAAO,IAAI,CAAE;QACX,IAAIC,SAAS;QACb,CAAC,EAAEC,KAAK,EAAED,SAAS,EAAEJ,MAAAA,EAAQ,GAAG,CAAA,GAAAM,SAAAA,SAAS,EAACP,GAAG,EAAEC,MAAM,CAAC;QAEtD,IAAII,SAAS,KAAKd,UAAU,CAACO,UAAU,EAAE;YACvC,OAAO,IAAIU,SAAAA,MAAM,CAAC,IAAIC,OAAAA,kBAAkB,CAACN,OAAO,EAAEC,WAAW,CAAC,EAAEH,MAAM,CAAC;QACzE;QAEA,IAAIS,iBAAiB;QACrB,CAAC,EAAEJ,KAAK,EAAEI,iBAAiB,EAAET,MAAAA,EAAQ,GAAG,CAAA,GAAAU,SAAAA,YAAY,EAACX,GAAG,EAAEC,MAAM,CAAC;QAEjE,IAAID,GAAG,CAACY,MAAM,GAAGX,MAAM,GAAGS,iBAAiB,EAAE;YAC3C,MAAM,IAAIG,SAAAA,kBAAkB,CAACZ,MAAM,GAAGS,iBAAiB,CAAC;QAC1D;QAEA,MAAMI,WAAW,GAAGd,GAAG,CAACe,KAAK,CAACd,MAAM,EAAEA,MAAM,GAAGS,iBAAiB,CAAC;QACjET,MAAM,IAAIS,iBAAiB;QAE3B,OAAQL,SAAS;YACf,KAAKd,UAAU,CAACE,OAAO;gBACrBU,OAAO,GAAGW,WAAW;gBACrB;YACF,KAAKvB,UAAU,CAACM,YAAY;gBAC1BO,WAAW,GAAG,CAAC,CAACU,WAAW,CAAC,CAAC,CAAC;gBAC9B;QACJ;IACF;AACF;AAAC,IAAAE,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEcnB,mBAAmB;AAClCoB,MAAM,CAACF,OAAO,GAAGlB,mBAAmB","debugId":null}},
    {"offset": {"line": 956, "column": 0}, "map": {"version":3,"sources":["file:///users/mrzasa/projects/current/frontend2.4/node_modules/tedious/src/token/loginack-token-parser.ts"],"sourcesContent":["import { type ParserOptions } from './stream-parser';\n\nimport { LoginAckToken } from './token';\n\nimport { versionsByValue as versions } from '../tds-versions';\nimport { NotEnoughDataError, readBVarChar, readUInt16LE, readUInt32BE, readUInt8, Result } from './helpers';\n\nconst interfaceTypes: { [key: number]: string } = {\n  0: 'SQL_DFLT',\n  1: 'SQL_TSQL'\n};\n\nfunction loginAckParser(buf: Buffer, offset: number, _options: ParserOptions): Result<LoginAckToken> {\n  // length\n  let tokenLength;\n  ({ offset, value: tokenLength } = readUInt16LE(buf, offset));\n\n  if (buf.length < tokenLength + offset) {\n    throw new NotEnoughDataError(tokenLength + offset);\n  }\n\n  let interfaceNumber;\n  ({ offset, value: interfaceNumber } = readUInt8(buf, offset));\n\n  const interfaceType = interfaceTypes[interfaceNumber];\n\n  let tdsVersionNumber;\n  ({ offset, value: tdsVersionNumber } = readUInt32BE(buf, offset));\n\n  const tdsVersion = versions[tdsVersionNumber];\n\n  let progName;\n  ({ offset, value: progName } = readBVarChar(buf, offset));\n\n  let major;\n  ({ offset, value: major } = readUInt8(buf, offset));\n\n  let minor;\n  ({ offset, value: minor } = readUInt8(buf, offset));\n\n  let buildNumHi;\n  ({ offset, value: buildNumHi } = readUInt8(buf, offset));\n\n  let buildNumLow;\n  ({ offset, value: buildNumLow } = readUInt8(buf, offset));\n\n  return new Result(new LoginAckToken({\n    interface: interfaceType,\n    tdsVersion: tdsVersion,\n    progName: progName,\n    progVersion: {\n      major: major,\n      minor: minor,\n      buildNumHi: buildNumHi,\n      buildNumLow: buildNumLow\n    }\n  }), offset);\n}\n\nexport default loginAckParser;\nmodule.exports = loginAckParser;\n"],"names":["_token","require","_tdsVersions","_helpers","interfaceTypes","loginAckParser","buf","offset","_options","tokenLength","value","readUInt16LE","length","NotEnoughDataError","interfaceNumber","readUInt8","interfaceType","tdsVersionNumber","readUInt32BE","tdsVersion","versions","progName","readBVarChar","major","minor","buildNumHi","buildNumLow","Result","LoginAckToken","interface","progVersion","_default","exports","default","module"],"mappings":";;;;AAEA,IAAAA,MAAA,GAAAC,OAAA;AAEA,IAAAC,YAAA,GAAAD,OAAA;AACA,IAAAE,QAAA,GAAAF,OAAA;AAEA,MAAMG,cAAyC,GAAG;IAChD,CAAC,EAAE,UAAU;IACb,CAAC,EAAE;AACL,CAAC;AAED,SAASC,cAAcA,CAACC,GAAW,EAAEC,MAAc,EAAEC,QAAuB,EAAyB;IACnG,SAAA;IACA,IAAIC,WAAW;IACf,CAAC,EAAEF,MAAM,EAAEG,KAAK,EAAED,WAAAA,EAAa,GAAG,CAAA,GAAAE,SAAAA,YAAY,EAACL,GAAG,EAAEC,MAAM,CAAC;IAE3D,IAAID,GAAG,CAACM,MAAM,GAAGH,WAAW,GAAGF,MAAM,EAAE;QACrC,MAAM,IAAIM,SAAAA,kBAAkB,CAACJ,WAAW,GAAGF,MAAM,CAAC;IACpD;IAEA,IAAIO,eAAe;IACnB,CAAC,EAAEP,MAAM,EAAEG,KAAK,EAAEI,eAAAA,EAAiB,GAAG,CAAA,GAAAC,SAAAA,SAAS,EAACT,GAAG,EAAEC,MAAM,CAAC;IAE5D,MAAMS,aAAa,GAAGZ,cAAc,CAACU,eAAe,CAAC;IAErD,IAAIG,gBAAgB;IACpB,CAAC,EAAEV,MAAM,EAAEG,KAAK,EAAEO,gBAAAA,EAAkB,GAAG,CAAA,GAAAC,SAAAA,YAAY,EAACZ,GAAG,EAAEC,MAAM,CAAC;IAEhE,MAAMY,UAAU,GAAGC,aAAAA,eAAQ,CAACH,gBAAgB,CAAC;IAE7C,IAAII,QAAQ;IACZ,CAAC,EAAEd,MAAM,EAAEG,KAAK,EAAEW,QAAAA,EAAU,GAAG,CAAA,GAAAC,SAAAA,YAAY,EAAChB,GAAG,EAAEC,MAAM,CAAC;IAExD,IAAIgB,KAAK;IACT,CAAC,EAAEhB,MAAM,EAAEG,KAAK,EAAEa,KAAAA,EAAO,GAAG,CAAA,GAAAR,SAAAA,SAAS,EAACT,GAAG,EAAEC,MAAM,CAAC;IAElD,IAAIiB,KAAK;IACT,CAAC,EAAEjB,MAAM,EAAEG,KAAK,EAAEc,KAAAA,EAAO,GAAG,CAAA,GAAAT,SAAAA,SAAS,EAACT,GAAG,EAAEC,MAAM,CAAC;IAElD,IAAIkB,UAAU;IACd,CAAC,EAAElB,MAAM,EAAEG,KAAK,EAAEe,UAAAA,EAAY,GAAG,CAAA,GAAAV,SAAAA,SAAS,EAACT,GAAG,EAAEC,MAAM,CAAC;IAEvD,IAAImB,WAAW;IACf,CAAC,EAAEnB,MAAM,EAAEG,KAAK,EAAEgB,WAAAA,EAAa,GAAG,CAAA,GAAAX,SAAAA,SAAS,EAACT,GAAG,EAAEC,MAAM,CAAC;IAExD,OAAO,IAAIoB,SAAAA,MAAM,CAAC,IAAIC,OAAAA,aAAa,CAAC;QAClCC,SAAS,EAAEb,aAAa;QACxBG,UAAU,EAAEA,UAAU;QACtBE,QAAQ,EAAEA,QAAQ;QAClBS,WAAW,EAAE;YACXP,KAAK,EAAEA,KAAK;YACZC,KAAK,EAAEA,KAAK;YACZC,UAAU,EAAEA,UAAU;YACtBC,WAAW,EAAEA;QACf;IACF,CAAC,CAAC,EAAEnB,MAAM,CAAC;AACb;AAAC,IAAAwB,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEc5B,cAAc;AAC7B6B,MAAM,CAACF,OAAO,GAAG3B,cAAc","debugId":null}},
    {"offset": {"line": 1008, "column": 0}, "map": {"version":3,"sources":["file:///users/mrzasa/projects/current/frontend2.4/node_modules/tedious/src/token/order-token-parser.ts"],"sourcesContent":["// s2.2.7.14\nimport { type ParserOptions } from './stream-parser';\n\nimport { OrderToken } from './token';\nimport { NotEnoughDataError, readUInt16LE, Result } from './helpers';\n\nfunction orderParser(buf: Buffer, offset: number, _options: ParserOptions): Result<OrderToken> {\n  // length\n  let tokenLength;\n  ({ offset, value: tokenLength } = readUInt16LE(buf, offset));\n\n  if (buf.length < offset + tokenLength) {\n    throw new NotEnoughDataError(offset + tokenLength);\n  }\n\n  const orderColumns: number[] = [];\n\n  for (let i = 0; i < tokenLength; i += 2) {\n    let column;\n    ({ offset, value: column } = readUInt16LE(buf, offset));\n\n    orderColumns.push(column);\n  }\n\n  return new Result(new OrderToken(orderColumns), offset);\n}\n\nexport default orderParser;\nmodule.exports = orderParser;\n"],"names":["_token","require","_helpers","orderParser","buf","offset","_options","tokenLength","value","readUInt16LE","length","NotEnoughDataError","orderColumns","i","column","push","Result","OrderToken","_default","exports","default","module"],"mappings":";;;;AAGA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,QAAA,GAAAD,OAAA;AAJA,YAAA;AAMA,SAASE,WAAWA,CAACC,GAAW,EAAEC,MAAc,EAAEC,QAAuB,EAAsB;IAC7F,SAAA;IACA,IAAIC,WAAW;IACf,CAAC,EAAEF,MAAM,EAAEG,KAAK,EAAED,WAAAA,EAAa,GAAG,CAAA,GAAAE,SAAAA,YAAY,EAACL,GAAG,EAAEC,MAAM,CAAC;IAE3D,IAAID,GAAG,CAACM,MAAM,GAAGL,MAAM,GAAGE,WAAW,EAAE;QACrC,MAAM,IAAII,SAAAA,kBAAkB,CAACN,MAAM,GAAGE,WAAW,CAAC;IACpD;IAEA,MAAMK,YAAsB,GAAG,EAAE;IAEjC,IAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGN,WAAW,EAAEM,CAAC,IAAI,CAAC,CAAE;QACvC,IAAIC,MAAM;QACV,CAAC,EAAET,MAAM,EAAEG,KAAK,EAAEM,MAAAA,EAAQ,GAAG,CAAA,GAAAL,SAAAA,YAAY,EAACL,GAAG,EAAEC,MAAM,CAAC;QAEtDO,YAAY,CAACG,IAAI,CAACD,MAAM,CAAC;IAC3B;IAEA,OAAO,IAAIE,SAAAA,MAAM,CAAC,IAAIC,OAAAA,UAAU,CAACL,YAAY,CAAC,EAAEP,MAAM,CAAC;AACzD;AAAC,IAAAa,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEcjB,WAAW;AAC1BkB,MAAM,CAACF,OAAO,GAAGhB,WAAW","debugId":null}},
    {"offset": {"line": 1036, "column": 0}, "map": {"version":3,"sources":["file:///users/mrzasa/projects/current/frontend2.4/node_modules/tedious/src/token/returnstatus-token-parser.ts"],"sourcesContent":["// s2.2.7.16\nimport { readInt32LE, Result } from './helpers';\nimport { type ParserOptions } from './stream-parser';\n\nimport { ReturnStatusToken } from './token';\n\nfunction returnStatusParser(buf: Buffer, offset: number, _options: ParserOptions): Result<ReturnStatusToken> {\n  let value;\n  ({ value, offset } = readInt32LE(buf, offset));\n  return new Result(new ReturnStatusToken(value), offset);\n}\n\nexport default returnStatusParser;\nmodule.exports = returnStatusParser;\n"],"names":["_helpers","require","_token","returnStatusParser","buf","offset","_options","value","readInt32LE","Result","ReturnStatusToken","_default","exports","default","module"],"mappings":";;;;AACA,IAAAA,QAAA,GAAAC,OAAA;AAGA,IAAAC,MAAA,GAAAD,OAAA;AAJA,YAAA;AAMA,SAASE,kBAAkBA,CAACC,GAAW,EAAEC,MAAc,EAAEC,QAAuB,EAA6B;IAC3G,IAAIC,KAAK;IACT,CAAC,EAAEA,KAAK,EAAEF,MAAAA,EAAQ,GAAG,CAAA,GAAAG,SAAAA,WAAW,EAACJ,GAAG,EAAEC,MAAM,CAAC;IAC7C,OAAO,IAAII,SAAAA,MAAM,CAAC,IAAIC,OAAAA,iBAAiB,CAACH,KAAK,CAAC,EAAEF,MAAM,CAAC;AACzD;AAAC,IAAAM,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEcV,kBAAkB;AACjCW,MAAM,CAACF,OAAO,GAAGT,kBAAkB","debugId":null}},
    {"offset": {"line": 1054, "column": 0}, "map": {"version":3,"sources":["file:///users/mrzasa/projects/current/frontend2.4/node_modules/tedious/src/token/returnvalue-token-parser.ts"],"sourcesContent":["// s2.2.7.16\n\nimport Parser from './stream-parser';\n\nimport { ReturnValueToken } from './token';\n\nimport { readMetadata } from '../metadata-parser';\nimport { isPLPStream, readPLPStream, readValue } from '../value-parser';\nimport { NotEnoughDataError, readBVarChar, readUInt16LE, readUInt8 } from './helpers';\nimport * as iconv from 'iconv-lite';\n\nasync function returnParser(parser: Parser): Promise<ReturnValueToken> {\n  let paramName;\n  let paramOrdinal;\n  let metadata;\n\n  while (true) {\n    const buf = parser.buffer;\n    let offset = parser.position;\n\n    try {\n      ({ offset, value: paramOrdinal } = readUInt16LE(buf, offset));\n      ({ offset, value: paramName } = readBVarChar(buf, offset));\n      // status\n      ({ offset } = readUInt8(buf, offset));\n      ({ offset, value: metadata } = readMetadata(buf, offset, parser.options));\n\n      if (paramName.charAt(0) === '@') {\n        paramName = paramName.slice(1);\n      }\n    } catch (err) {\n      if (err instanceof NotEnoughDataError) {\n        await parser.waitForChunk();\n        continue;\n      }\n\n      throw err;\n    }\n\n    parser.position = offset;\n    break;\n  }\n\n  let value;\n  while (true) {\n    const buf = parser.buffer;\n    let offset = parser.position;\n\n    if (isPLPStream(metadata)) {\n      const chunks = await readPLPStream(parser);\n\n      if (chunks === null) {\n        value = chunks;\n      } else if (metadata.type.name === 'NVarChar' || metadata.type.name === 'Xml') {\n        value = Buffer.concat(chunks).toString('ucs2');\n      } else if (metadata.type.name === 'VarChar') {\n        value = iconv.decode(Buffer.concat(chunks), metadata.collation?.codepage ?? 'utf8');\n      } else if (metadata.type.name === 'VarBinary' || metadata.type.name === 'UDT') {\n        value = Buffer.concat(chunks);\n      }\n    } else {\n      try {\n        ({ value, offset } = readValue(buf, offset, metadata, parser.options));\n      } catch (err) {\n        if (err instanceof NotEnoughDataError) {\n          await parser.waitForChunk();\n          continue;\n        }\n\n        throw err;\n      }\n\n      parser.position = offset;\n    }\n\n    break;\n  }\n\n  return new ReturnValueToken({\n    paramOrdinal: paramOrdinal,\n    paramName: paramName,\n    metadata: metadata,\n    value: value\n  });\n}\n\nexport default returnParser;\nmodule.exports = returnParser;\n"],"names":["_token","require","_metadataParser","_valueParser","_helpers","iconv","_interopRequireWildcard","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","returnParser","parser","paramName","paramOrdinal","metadata","buf","buffer","offset","position","value","readUInt16LE","readBVarChar","readUInt8","readMetadata","options","charAt","slice","err","NotEnoughDataError","waitForChunk","isPLPStream","chunks","readPLPStream","type","name","Buffer","concat","toString","decode","collation","codepage","readValue","ReturnValueToken","_default","exports","module"],"mappings":";;;;AAIA,IAAAA,MAAA,GAAAC,OAAA;AAEA,IAAAC,eAAA,GAAAD,OAAA;AACA,IAAAE,YAAA,GAAAF,OAAA;AACA,IAAAG,QAAA,GAAAH,OAAA;AACA,IAAAI,KAAA,GAAAC,uBAAA,CAAAL,OAAA;AAAoC,SAAAM,yBAAAC,CAAA;IAAA,IAAA,cAAA,OAAAC,OAAA,EAAA,OAAA;IAAA,IAAAC,CAAA,GAAA,IAAAD,OAAA,IAAAE,CAAA,GAAA,IAAAF,OAAA;IAAA,OAAA,CAAAF,wBAAA,GAAA,SAAAA,AAAAC,CAAA;QAAA,OAAAA,CAAA,GAAAG,CAAA,GAAAD,CAAA;IAAA,CAAA,EAAAF,CAAA;AAAA;AAAA,SAAAF,wBAAAE,CAAA,EAAAE,CAAA;IAAA,IAAA,CAAAA,CAAA,IAAAF,CAAA,IAAAA,CAAA,CAAAI,UAAA,EAAA,OAAAJ,CAAA;IAAA,IAAA,SAAAA,CAAA,IAAA,YAAA,OAAAA,CAAA,IAAA,cAAA,OAAAA,CAAA,EAAA,OAAA;QAAAK,OAAA,EAAAL,CAAA;IAAA;IAAA,IAAAG,CAAA,GAAAJ,wBAAA,CAAAG,CAAA;IAAA,IAAAC,CAAA,IAAAA,CAAA,CAAAG,GAAA,CAAAN,CAAA,GAAA,OAAAG,CAAA,CAAAI,GAAA,CAAAP,CAAA;IAAA,IAAAQ,CAAA,GAAA;QAAAC,SAAA,EAAA;IAAA,GAAAC,CAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA;IAAA,IAAA,IAAAC,CAAA,IAAAd,CAAA,CAAA,IAAA,cAAAc,CAAA,IAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAjB,CAAA,EAAAc,CAAA,GAAA;QAAA,IAAAI,CAAA,GAAAR,CAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAb,CAAA,EAAAc,CAAA,IAAA;QAAAI,CAAA,IAAA,CAAAA,CAAA,CAAAX,GAAA,IAAAW,CAAA,CAAAC,GAAA,IAAAR,MAAA,CAAAC,cAAA,CAAAJ,CAAA,EAAAM,CAAA,EAAAI,CAAA,IAAAV,CAAA,CAAAM,CAAA,CAAA,GAAAd,CAAA,CAAAc,CAAA,CAAA;IAAA;IAAA,OAAAN,CAAA,CAAAH,OAAA,GAAAL,CAAA,EAAAG,CAAA,IAAAA,CAAA,CAAAgB,GAAA,CAAAnB,CAAA,EAAAQ,CAAA,GAAAA,CAAA;AAAA;AATpC,YAAA;AAWA,eAAeY,YAAYA,CAACC,MAAc,EAA6B;IACrE,IAAIC,SAAS;IACb,IAAIC,YAAY;IAChB,IAAIC,QAAQ;IAEZ,MAAO,IAAI,CAAE;QACX,MAAMC,GAAG,GAAGJ,MAAM,CAACK,MAAM;QACzB,IAAIC,MAAM,GAAGN,MAAM,CAACO,QAAQ;QAE5B,IAAI;YACF,CAAC,EAAED,MAAM,EAAEE,KAAK,EAAEN,YAAAA,EAAc,GAAG,CAAA,GAAAO,SAAAA,YAAY,EAACL,GAAG,EAAEE,MAAM,CAAC;YAC5D,CAAC,EAAEA,MAAM,EAAEE,KAAK,EAAEP,SAAAA,EAAW,GAAG,CAAA,GAAAS,SAAAA,YAAY,EAACN,GAAG,EAAEE,MAAM,CAAC;YACzD,SAAA;YACA,CAAC,EAAEA,MAAAA,EAAQ,GAAG,CAAA,GAAAK,SAAAA,SAAS,EAACP,GAAG,EAAEE,MAAM,CAAC;YACpC,CAAC,EAAEA,MAAM,EAAEE,KAAK,EAAEL,QAAAA,EAAU,GAAG,CAAA,GAAAS,gBAAAA,YAAY,EAACR,GAAG,EAAEE,MAAM,EAAEN,MAAM,CAACa,OAAO,CAAC;YAExE,IAAIZ,SAAS,CAACa,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;gBAC/Bb,SAAS,GAAGA,SAAS,CAACc,KAAK,CAAC,CAAC,CAAC;YAChC;QACF,CAAC,CAAC,OAAOC,GAAG,EAAE;YACZ,IAAIA,GAAG,YAAYC,SAAAA,kBAAkB,EAAE;gBACrC,MAAMjB,MAAM,CAACkB,YAAY,CAAC,CAAC;gBAC3B;YACF;YAEA,MAAMF,GAAG;QACX;QAEAhB,MAAM,CAACO,QAAQ,GAAGD,MAAM;QACxB;IACF;IAEA,IAAIE,KAAK;IACT,MAAO,IAAI,CAAE;QACX,MAAMJ,GAAG,GAAGJ,MAAM,CAACK,MAAM;QACzB,IAAIC,MAAM,GAAGN,MAAM,CAACO,QAAQ;QAE5B,IAAI,CAAA,GAAAY,aAAAA,WAAW,EAAChB,QAAQ,CAAC,EAAE;YACzB,MAAMiB,MAAM,GAAG,MAAM,CAAA,GAAAC,aAAAA,aAAa,EAACrB,MAAM,CAAC;YAE1C,IAAIoB,MAAM,KAAK,IAAI,EAAE;gBACnBZ,KAAK,GAAGY,MAAM;YAChB,CAAC,MAAM,IAAIjB,QAAQ,CAACmB,IAAI,CAACC,IAAI,KAAK,UAAU,IAAIpB,QAAQ,CAACmB,IAAI,CAACC,IAAI,KAAK,KAAK,EAAE;gBAC5Ef,KAAK,GAAGgB,MAAM,CAACC,MAAM,CAACL,MAAM,CAAC,CAACM,QAAQ,CAAC,MAAM,CAAC;YAChD,CAAC,MAAM,IAAIvB,QAAQ,CAACmB,IAAI,CAACC,IAAI,KAAK,SAAS,EAAE;gBAC3Cf,KAAK,GAAGhC,KAAK,CAACmD,MAAM,CAACH,MAAM,CAACC,MAAM,CAACL,MAAM,CAAC,EAAEjB,QAAQ,CAACyB,SAAS,EAAEC,QAAQ,IAAI,MAAM,CAAC;YACrF,CAAC,MAAM,IAAI1B,QAAQ,CAACmB,IAAI,CAACC,IAAI,KAAK,WAAW,IAAIpB,QAAQ,CAACmB,IAAI,CAACC,IAAI,KAAK,KAAK,EAAE;gBAC7Ef,KAAK,GAAGgB,MAAM,CAACC,MAAM,CAACL,MAAM,CAAC;YAC/B;QACF,CAAC,MAAM;YACL,IAAI;gBACF,CAAC,EAAEZ,KAAK,EAAEF,MAAAA,EAAQ,GAAG,CAAA,GAAAwB,aAAAA,SAAS,EAAC1B,GAAG,EAAEE,MAAM,EAAEH,QAAQ,EAAEH,MAAM,CAACa,OAAO,CAAC;YACvE,CAAC,CAAC,OAAOG,GAAG,EAAE;gBACZ,IAAIA,GAAG,YAAYC,SAAAA,kBAAkB,EAAE;oBACrC,MAAMjB,MAAM,CAACkB,YAAY,CAAC,CAAC;oBAC3B;gBACF;gBAEA,MAAMF,GAAG;YACX;YAEAhB,MAAM,CAACO,QAAQ,GAAGD,MAAM;QAC1B;QAEA;IACF;IAEA,OAAO,IAAIyB,OAAAA,gBAAgB,CAAC;QAC1B7B,YAAY,EAAEA,YAAY;QAC1BD,SAAS,EAAEA,SAAS;QACpBE,QAAQ,EAAEA,QAAQ;QAClBK,KAAK,EAAEA;IACT,CAAC,CAAC;AACJ;AAAC,IAAAwB,QAAA,GAAAC,OAAA,CAAAjD,OAAA,GAEce,YAAY;AAC3BmC,MAAM,CAACD,OAAO,GAAGlC,YAAY","debugId":null}},
    {"offset": {"line": 1155, "column": 0}, "map": {"version":3,"sources":["file:///users/mrzasa/projects/current/frontend2.4/node_modules/tedious/src/token/row-token-parser.ts"],"sourcesContent":["// s2.2.7.17\n\nimport Parser from './stream-parser';\nimport { type ColumnMetadata } from './colmetadata-token-parser';\n\nimport { RowToken } from './token';\nimport * as iconv from 'iconv-lite';\n\nimport { isPLPStream, readPLPStream, readValue } from '../value-parser';\nimport { NotEnoughDataError } from './helpers';\n\ninterface Column {\n  value: unknown;\n  metadata: ColumnMetadata;\n}\n\nasync function rowParser(parser: Parser): Promise<RowToken> {\n  const columns: Column[] = [];\n\n  for (const metadata of parser.colMetadata) {\n    while (true) {\n      if (isPLPStream(metadata)) {\n        const chunks = await readPLPStream(parser);\n\n        if (chunks === null) {\n          columns.push({ value: chunks, metadata });\n        } else if (metadata.type.name === 'NVarChar' || metadata.type.name === 'Xml') {\n          columns.push({ value: Buffer.concat(chunks).toString('ucs2'), metadata });\n        } else if (metadata.type.name === 'VarChar') {\n          columns.push({ value: iconv.decode(Buffer.concat(chunks), metadata.collation?.codepage ?? 'utf8'), metadata });\n        } else if (metadata.type.name === 'VarBinary' || metadata.type.name === 'UDT') {\n          columns.push({ value: Buffer.concat(chunks), metadata });\n        }\n      } else {\n        let result;\n        try {\n          result = readValue(parser.buffer, parser.position, metadata, parser.options);\n        } catch (err) {\n          if (err instanceof NotEnoughDataError) {\n            await parser.waitForChunk();\n            continue;\n          }\n\n          throw err;\n        }\n\n        parser.position = result.offset;\n        columns.push({ value: result.value, metadata });\n      }\n\n      break;\n    }\n  }\n\n  if (parser.options.useColumnNames) {\n    const columnsMap: { [key: string]: Column } = Object.create(null);\n\n    columns.forEach((column) => {\n      const colName = column.metadata.colName;\n      if (columnsMap[colName] == null) {\n        columnsMap[colName] = column;\n      }\n    });\n\n    return new RowToken(columnsMap);\n  } else {\n    return new RowToken(columns);\n  }\n}\n\nexport default rowParser;\nmodule.exports = rowParser;\n"],"names":["_token","require","iconv","_interopRequireWildcard","_valueParser","_helpers","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","rowParser","parser","columns","metadata","colMetadata","isPLPStream","chunks","readPLPStream","push","value","type","name","Buffer","concat","toString","decode","collation","codepage","result","readValue","buffer","position","options","err","NotEnoughDataError","waitForChunk","offset","useColumnNames","columnsMap","create","forEach","column","colName","RowToken","_default","exports","module"],"mappings":"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","debugId":null}},
    {"offset": {"line": 1253, "column": 0}, "map": {"version":3,"sources":["file:///users/mrzasa/projects/current/frontend2.4/node_modules/tedious/src/token/nbcrow-token-parser.ts"],"sourcesContent":["// s2.2.7.13 (introduced in TDS 7.3.B)\n\nimport Parser from './stream-parser';\nimport { type ColumnMetadata } from './colmetadata-token-parser';\n\nimport { NBCRowToken } from './token';\nimport * as iconv from 'iconv-lite';\n\nimport { isPLPStream, readPLPStream, readValue } from '../value-parser';\nimport { NotEnoughDataError } from './helpers';\n\ninterface Column {\n  value: unknown;\n  metadata: ColumnMetadata;\n}\n\nasync function nbcRowParser(parser: Parser): Promise<NBCRowToken> {\n  const colMetadata = parser.colMetadata;\n  const columns: Column[] = [];\n  const bitmap: boolean[] = [];\n  const bitmapByteLength = Math.ceil(colMetadata.length / 8);\n\n  while (parser.buffer.length - parser.position < bitmapByteLength) {\n    await parser.waitForChunk();\n  }\n\n  const bytes = parser.buffer.slice(parser.position, parser.position + bitmapByteLength);\n  parser.position += bitmapByteLength;\n\n  for (let i = 0, len = bytes.length; i < len; i++) {\n    const byte = bytes[i];\n\n    bitmap.push(byte & 0b1 ? true : false);\n    bitmap.push(byte & 0b10 ? true : false);\n    bitmap.push(byte & 0b100 ? true : false);\n    bitmap.push(byte & 0b1000 ? true : false);\n    bitmap.push(byte & 0b10000 ? true : false);\n    bitmap.push(byte & 0b100000 ? true : false);\n    bitmap.push(byte & 0b1000000 ? true : false);\n    bitmap.push(byte & 0b10000000 ? true : false);\n  }\n\n  for (let i = 0; i < colMetadata.length; i++) {\n    const metadata = colMetadata[i];\n    if (bitmap[i]) {\n      columns.push({ value: null, metadata });\n      continue;\n    }\n\n    while (true) {\n      if (isPLPStream(metadata)) {\n        const chunks = await readPLPStream(parser);\n\n        if (chunks === null) {\n          columns.push({ value: chunks, metadata });\n        } else if (metadata.type.name === 'NVarChar' || metadata.type.name === 'Xml') {\n          columns.push({ value: Buffer.concat(chunks).toString('ucs2'), metadata });\n        } else if (metadata.type.name === 'VarChar') {\n          columns.push({ value: iconv.decode(Buffer.concat(chunks), metadata.collation?.codepage ?? 'utf8'), metadata });\n        } else if (metadata.type.name === 'VarBinary' || metadata.type.name === 'UDT') {\n          columns.push({ value: Buffer.concat(chunks), metadata });\n        }\n      } else {\n        let result;\n        try {\n          result = readValue(parser.buffer, parser.position, metadata, parser.options);\n        } catch (err) {\n          if (err instanceof NotEnoughDataError) {\n            await parser.waitForChunk();\n            continue;\n          }\n\n          throw err;\n        }\n\n        parser.position = result.offset;\n        columns.push({ value: result.value, metadata });\n      }\n\n      break;\n    }\n  }\n\n  if (parser.options.useColumnNames) {\n    const columnsMap: { [key: string]: Column } = Object.create(null);\n\n    columns.forEach((column) => {\n      const colName = column.metadata.colName;\n      if (columnsMap[colName] == null) {\n        columnsMap[colName] = column;\n      }\n    });\n\n    return new NBCRowToken(columnsMap);\n  } else {\n    return new NBCRowToken(columns);\n  }\n}\n\n\nexport default nbcRowParser;\nmodule.exports = nbcRowParser;\n"],"names":["_token","require","iconv","_interopRequireWildcard","_valueParser","_helpers","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","nbcRowParser","parser","colMetadata","columns","bitmap","bitmapByteLength","Math","ceil","length","buffer","position","waitForChunk","bytes","slice","len","byte","push","metadata","value","isPLPStream","chunks","readPLPStream","type","name","Buffer","concat","toString","decode","collation","codepage","result","readValue","options","err","NotEnoughDataError","offset","useColumnNames","columnsMap","create","forEach","column","colName","NBCRowToken","_default","exports","module"],"mappings":"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","debugId":null}},
    {"offset": {"line": 1378, "column": 0}, "map": {"version":3,"sources":["file:///users/mrzasa/projects/current/frontend2.4/node_modules/tedious/src/token/sspi-token-parser.ts"],"sourcesContent":["import { NotEnoughDataError, readUInt16LE, Result } from './helpers';\nimport { type ParserOptions } from './stream-parser';\n\nimport { SSPIToken } from './token';\n\ninterface Data {\n  magic: string;\n  type: number;\n  domainLen: number;\n  domainMax: number;\n  domainOffset: number;\n  flags: number;\n  nonce: Buffer;\n  zeroes: Buffer;\n  targetLen: number;\n  targetMax: number;\n  targetOffset: number;\n  oddData: Buffer;\n  domain: string;\n  target: Buffer;\n}\n\nfunction parseChallenge(buffer: Buffer) {\n  const challenge: Partial<Data> = {};\n\n  challenge.magic = buffer.slice(0, 8).toString('utf8');\n  challenge.type = buffer.readInt32LE(8);\n  challenge.domainLen = buffer.readInt16LE(12);\n  challenge.domainMax = buffer.readInt16LE(14);\n  challenge.domainOffset = buffer.readInt32LE(16);\n  challenge.flags = buffer.readInt32LE(20);\n  challenge.nonce = buffer.slice(24, 32);\n  challenge.zeroes = buffer.slice(32, 40);\n  challenge.targetLen = buffer.readInt16LE(40);\n  challenge.targetMax = buffer.readInt16LE(42);\n  challenge.targetOffset = buffer.readInt32LE(44);\n  challenge.oddData = buffer.slice(48, 56);\n  challenge.domain = buffer.slice(56, 56 + challenge.domainLen).toString('ucs2');\n  challenge.target = buffer.slice(56 + challenge.domainLen, 56 + challenge.domainLen + challenge.targetLen);\n\n  return challenge as Data;\n}\n\nfunction sspiParser(buf: Buffer, offset: number, _options: ParserOptions): Result<SSPIToken> {\n  let tokenLength;\n  ({ offset, value: tokenLength } = readUInt16LE(buf, offset));\n\n  if (buf.length < offset + tokenLength) {\n    throw new NotEnoughDataError(offset + tokenLength);\n  }\n\n  const data = buf.slice(offset, offset + tokenLength);\n  offset += tokenLength;\n\n  return new Result(new SSPIToken(parseChallenge(data), data), offset);\n}\n\nexport default sspiParser;\nmodule.exports = sspiParser;\n"],"names":["_helpers","require","_token","parseChallenge","buffer","challenge","magic","slice","toString","type","readInt32LE","domainLen","readInt16LE","domainMax","domainOffset","flags","nonce","zeroes","targetLen","targetMax","targetOffset","oddData","domain","target","sspiParser","buf","offset","_options","tokenLength","value","readUInt16LE","length","NotEnoughDataError","data","Result","SSPIToken","_default","exports","default","module"],"mappings":";;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AAGA,IAAAC,MAAA,GAAAD,OAAA;AAmBA,SAASE,cAAcA,CAACC,MAAc,EAAE;IACtC,MAAMC,SAAwB,GAAG,CAAC,CAAC;IAEnCA,SAAS,CAACC,KAAK,GAAGF,MAAM,CAACG,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAACC,QAAQ,CAAC,MAAM,CAAC;IACrDH,SAAS,CAACI,IAAI,GAAGL,MAAM,CAACM,WAAW,CAAC,CAAC,CAAC;IACtCL,SAAS,CAACM,SAAS,GAAGP,MAAM,CAACQ,WAAW,CAAC,EAAE,CAAC;IAC5CP,SAAS,CAACQ,SAAS,GAAGT,MAAM,CAACQ,WAAW,CAAC,EAAE,CAAC;IAC5CP,SAAS,CAACS,YAAY,GAAGV,MAAM,CAACM,WAAW,CAAC,EAAE,CAAC;IAC/CL,SAAS,CAACU,KAAK,GAAGX,MAAM,CAACM,WAAW,CAAC,EAAE,CAAC;IACxCL,SAAS,CAACW,KAAK,GAAGZ,MAAM,CAACG,KAAK,CAAC,EAAE,EAAE,EAAE,CAAC;IACtCF,SAAS,CAACY,MAAM,GAAGb,MAAM,CAACG,KAAK,CAAC,EAAE,EAAE,EAAE,CAAC;IACvCF,SAAS,CAACa,SAAS,GAAGd,MAAM,CAACQ,WAAW,CAAC,EAAE,CAAC;IAC5CP,SAAS,CAACc,SAAS,GAAGf,MAAM,CAACQ,WAAW,CAAC,EAAE,CAAC;IAC5CP,SAAS,CAACe,YAAY,GAAGhB,MAAM,CAACM,WAAW,CAAC,EAAE,CAAC;IAC/CL,SAAS,CAACgB,OAAO,GAAGjB,MAAM,CAACG,KAAK,CAAC,EAAE,EAAE,EAAE,CAAC;IACxCF,SAAS,CAACiB,MAAM,GAAGlB,MAAM,CAACG,KAAK,CAAC,EAAE,EAAE,EAAE,GAAGF,SAAS,CAACM,SAAS,CAAC,CAACH,QAAQ,CAAC,MAAM,CAAC;IAC9EH,SAAS,CAACkB,MAAM,GAAGnB,MAAM,CAACG,KAAK,CAAC,EAAE,GAAGF,SAAS,CAACM,SAAS,EAAE,EAAE,GAAGN,SAAS,CAACM,SAAS,GAAGN,SAAS,CAACa,SAAS,CAAC;IAEzG,OAAOb,SAAS;AAClB;AAEA,SAASmB,UAAUA,CAACC,GAAW,EAAEC,MAAc,EAAEC,QAAuB,EAAqB;IAC3F,IAAIC,WAAW;IACf,CAAC,EAAEF,MAAM,EAAEG,KAAK,EAAED,WAAAA,EAAa,GAAG,CAAA,GAAAE,SAAAA,YAAY,EAACL,GAAG,EAAEC,MAAM,CAAC;IAE3D,IAAID,GAAG,CAACM,MAAM,GAAGL,MAAM,GAAGE,WAAW,EAAE;QACrC,MAAM,IAAII,SAAAA,kBAAkB,CAACN,MAAM,GAAGE,WAAW,CAAC;IACpD;IAEA,MAAMK,IAAI,GAAGR,GAAG,CAAClB,KAAK,CAACmB,MAAM,EAAEA,MAAM,GAAGE,WAAW,CAAC;IACpDF,MAAM,IAAIE,WAAW;IAErB,OAAO,IAAIM,SAAAA,MAAM,CAAC,IAAIC,OAAAA,SAAS,CAAChC,cAAc,CAAC8B,IAAI,CAAC,EAAEA,IAAI,CAAC,EAAEP,MAAM,CAAC;AACtE;AAAC,IAAAU,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEcd,UAAU;AACzBe,MAAM,CAACF,OAAO,GAAGb,UAAU","debugId":null}},
    {"offset": {"line": 1418, "column": 0}, "map": {"version":3,"sources":["file:///users/mrzasa/projects/current/frontend2.4/node_modules/tedious/src/token/stream-parser.ts"],"sourcesContent":["import Debug from '../debug';\nimport { type InternalConnectionOptions } from '../connection';\n\nimport { TYPE, ColMetadataToken, DoneProcToken, DoneToken, DoneInProcToken, ErrorMessageToken, InfoMessageToken, RowToken, type EnvChangeToken, LoginAckToken, ReturnStatusToken, OrderToken, FedAuthInfoToken, SSPIToken, ReturnValueToken, NBCRowToken, FeatureExtAckToken, Token } from './token';\n\nimport colMetadataParser, { type ColumnMetadata } from './colmetadata-token-parser';\nimport { doneParser, doneInProcParser, doneProcParser } from './done-token-parser';\nimport envChangeParser from './env-change-token-parser';\nimport { errorParser, infoParser } from './infoerror-token-parser';\nimport fedAuthInfoParser from './fedauth-info-parser';\nimport featureExtAckParser from './feature-ext-ack-parser';\nimport loginAckParser from './loginack-token-parser';\nimport orderParser from './order-token-parser';\nimport returnStatusParser from './returnstatus-token-parser';\nimport returnValueParser from './returnvalue-token-parser';\nimport rowParser from './row-token-parser';\nimport nbcRowParser from './nbcrow-token-parser';\nimport sspiParser from './sspi-token-parser';\nimport { NotEnoughDataError } from './helpers';\n\nexport type ParserOptions = Pick<InternalConnectionOptions, 'useUTC' | 'lowerCaseGuids' | 'tdsVersion' | 'useColumnNames' | 'columnNameReplacer' | 'camelCaseColumns'>;\n\nclass Parser {\n  debug: Debug;\n  colMetadata: ColumnMetadata[];\n  options: ParserOptions;\n\n  iterator: AsyncIterator<Buffer, any, undefined> | Iterator<Buffer, any, undefined>;\n  buffer: Buffer;\n  position: number;\n\n  static async *parseTokens(iterable: AsyncIterable<Buffer> | Iterable<Buffer>, debug: Debug, options: ParserOptions, colMetadata: ColumnMetadata[] = []) {\n    const parser = new Parser(iterable, debug, options);\n    parser.colMetadata = colMetadata;\n\n    while (true) {\n      try {\n        await parser.waitForChunk();\n      } catch (err: unknown) {\n        if (parser.position === parser.buffer.length) {\n          return;\n        }\n\n        throw err;\n      }\n\n      while (parser.buffer.length >= parser.position + 1) {\n        const type = parser.buffer.readUInt8(parser.position);\n        parser.position += 1;\n\n        const token = parser.readToken(type);\n        if (token !== undefined) {\n          yield token;\n        }\n      }\n    }\n  }\n\n  readToken(type: number): Token | undefined | Promise<Token | undefined> {\n    switch (type) {\n      case TYPE.DONE: {\n        return this.readDoneToken();\n      }\n\n      case TYPE.DONEPROC: {\n        return this.readDoneProcToken();\n      }\n\n      case TYPE.DONEINPROC: {\n        return this.readDoneInProcToken();\n      }\n\n      case TYPE.ERROR: {\n        return this.readErrorToken();\n      }\n\n      case TYPE.INFO: {\n        return this.readInfoToken();\n      }\n\n      case TYPE.ENVCHANGE: {\n        return this.readEnvChangeToken();\n      }\n\n      case TYPE.LOGINACK: {\n        return this.readLoginAckToken();\n      }\n\n      case TYPE.RETURNSTATUS: {\n        return this.readReturnStatusToken();\n      }\n\n      case TYPE.ORDER: {\n        return this.readOrderToken();\n      }\n\n      case TYPE.FEDAUTHINFO: {\n        return this.readFedAuthInfoToken();\n      }\n\n      case TYPE.SSPI: {\n        return this.readSSPIToken();\n      }\n\n      case TYPE.COLMETADATA: {\n        return this.readColMetadataToken();\n      }\n\n      case TYPE.RETURNVALUE: {\n        return this.readReturnValueToken();\n      }\n\n      case TYPE.ROW: {\n        return this.readRowToken();\n      }\n\n      case TYPE.NBCROW: {\n        return this.readNbcRowToken();\n      }\n\n      case TYPE.FEATUREEXTACK: {\n        return this.readFeatureExtAckToken();\n      }\n\n      default: {\n        throw new Error('Unknown type: ' + type);\n      }\n    }\n  }\n\n  readFeatureExtAckToken(): FeatureExtAckToken | Promise<FeatureExtAckToken> {\n    let result;\n\n    try {\n      result = featureExtAckParser(this.buffer, this.position, this.options);\n    } catch (err: any) {\n      if (err instanceof NotEnoughDataError) {\n        return this.waitForChunk().then(() => {\n          return this.readFeatureExtAckToken();\n        });\n      }\n\n      throw err;\n    }\n\n    this.position = result.offset;\n    return result.value;\n  }\n\n  async readNbcRowToken(): Promise<NBCRowToken> {\n    return await nbcRowParser(this);\n  }\n\n  async readReturnValueToken(): Promise<ReturnValueToken> {\n    return await returnValueParser(this);\n  }\n\n  async readColMetadataToken(): Promise<ColMetadataToken> {\n    const token = await colMetadataParser(this);\n    this.colMetadata = token.columns;\n    return token;\n  }\n\n  readSSPIToken(): SSPIToken | Promise<SSPIToken> {\n    let result;\n\n    try {\n      result = sspiParser(this.buffer, this.position, this.options);\n    } catch (err: any) {\n      if (err instanceof NotEnoughDataError) {\n        return this.waitForChunk().then(() => {\n          return this.readSSPIToken();\n        });\n      }\n\n      throw err;\n    }\n\n    this.position = result.offset;\n    return result.value;\n  }\n\n  readFedAuthInfoToken(): FedAuthInfoToken | Promise<FedAuthInfoToken> {\n    let result;\n\n    try {\n      result = fedAuthInfoParser(this.buffer, this.position, this.options);\n    } catch (err: any) {\n      if (err instanceof NotEnoughDataError) {\n        return this.waitForChunk().then(() => {\n          return this.readFedAuthInfoToken();\n        });\n      }\n\n      throw err;\n    }\n\n    this.position = result.offset;\n    return result.value;\n  }\n\n  readOrderToken(): OrderToken | Promise<OrderToken> {\n    let result;\n\n    try {\n      result = orderParser(this.buffer, this.position, this.options);\n    } catch (err: any) {\n      if (err instanceof NotEnoughDataError) {\n        return this.waitForChunk().then(() => {\n          return this.readOrderToken();\n        });\n      }\n\n      throw err;\n    }\n\n    this.position = result.offset;\n    return result.value;\n  }\n\n  readReturnStatusToken(): ReturnStatusToken | Promise<ReturnStatusToken> {\n    let result;\n\n    try {\n      result = returnStatusParser(this.buffer, this.position, this.options);\n    } catch (err: any) {\n      if (err instanceof NotEnoughDataError) {\n        return this.waitForChunk().then(() => {\n          return this.readReturnStatusToken();\n        });\n      }\n\n      throw err;\n    }\n\n    this.position = result.offset;\n    return result.value;\n  }\n\n  readLoginAckToken(): LoginAckToken | Promise<LoginAckToken> {\n    let result;\n\n    try {\n      result = loginAckParser(this.buffer, this.position, this.options);\n    } catch (err: any) {\n      if (err instanceof NotEnoughDataError) {\n        return this.waitForChunk().then(() => {\n          return this.readLoginAckToken();\n        });\n      }\n\n      throw err;\n    }\n\n    this.position = result.offset;\n    return result.value;\n  }\n\n  readEnvChangeToken(): EnvChangeToken | undefined | Promise<EnvChangeToken | undefined> {\n    let result;\n\n    try {\n      result = envChangeParser(this.buffer, this.position, this.options);\n    } catch (err: any) {\n      if (err instanceof NotEnoughDataError) {\n        return this.waitForChunk().then(() => {\n          return this.readEnvChangeToken();\n        });\n      }\n\n      throw err;\n    }\n\n    this.position = result.offset;\n    return result.value;\n  }\n\n  readRowToken(): RowToken | Promise<RowToken> {\n    return rowParser(this);\n  }\n\n  readInfoToken(): InfoMessageToken | Promise<InfoMessageToken> {\n    let result;\n\n    try {\n      result = infoParser(this.buffer, this.position, this.options);\n    } catch (err: any) {\n      if (err instanceof NotEnoughDataError) {\n        return this.waitForChunk().then(() => {\n          return this.readInfoToken();\n        });\n      }\n\n      throw err;\n    }\n\n    this.position = result.offset;\n    return result.value;\n  }\n\n  readErrorToken(): ErrorMessageToken | Promise<ErrorMessageToken> {\n    let result;\n\n    try {\n      result = errorParser(this.buffer, this.position, this.options);\n    } catch (err: any) {\n      if (err instanceof NotEnoughDataError) {\n        return this.waitForChunk().then(() => {\n          return this.readErrorToken();\n        });\n      }\n\n      throw err;\n    }\n\n    this.position = result.offset;\n    return result.value;\n  }\n\n  readDoneInProcToken(): DoneInProcToken | Promise<DoneInProcToken> {\n    let result;\n\n    try {\n      result = doneInProcParser(this.buffer, this.position, this.options);\n    } catch (err: any) {\n      if (err instanceof NotEnoughDataError) {\n        return this.waitForChunk().then(() => {\n          return this.readDoneInProcToken();\n        });\n      }\n\n      throw err;\n    }\n\n    this.position = result.offset;\n    return result.value;\n  }\n\n  readDoneProcToken(): DoneProcToken | Promise<DoneProcToken> {\n    let result;\n\n    try {\n      result = doneProcParser(this.buffer, this.position, this.options);\n    } catch (err: any) {\n      if (err instanceof NotEnoughDataError) {\n        return this.waitForChunk().then(() => {\n          return this.readDoneProcToken();\n        });\n      }\n\n      throw err;\n    }\n\n    this.position = result.offset;\n    return result.value;\n  }\n\n  readDoneToken(): DoneToken | Promise<DoneToken> {\n    let result;\n\n    try {\n      result = doneParser(this.buffer, this.position, this.options);\n    } catch (err: any) {\n      if (err instanceof NotEnoughDataError) {\n        return this.waitForChunk().then(() => {\n          return this.readDoneToken();\n        });\n      }\n\n      throw err;\n    }\n\n    this.position = result.offset;\n    return result.value;\n  }\n\n  constructor(iterable: AsyncIterable<Buffer> | Iterable<Buffer>, debug: Debug, options: ParserOptions) {\n    this.debug = debug;\n    this.colMetadata = [];\n    this.options = options;\n\n    this.iterator = ((iterable as AsyncIterable<Buffer>)[Symbol.asyncIterator] || (iterable as Iterable<Buffer>)[Symbol.iterator]).call(iterable);\n\n    this.buffer = Buffer.alloc(0);\n    this.position = 0;\n  }\n\n  async waitForChunk() {\n    const result = await this.iterator.next();\n    if (result.done) {\n      throw new Error('unexpected end of data');\n    }\n\n    if (this.position === this.buffer.length) {\n      this.buffer = result.value;\n    } else {\n      this.buffer = Buffer.concat([this.buffer.slice(this.position), result.value]);\n    }\n\n    this.position = 0;\n  }\n}\n\nexport default Parser;\nmodule.exports = Parser;\n"],"names":["_token","require","_colmetadataTokenParser","_interopRequireDefault","_doneTokenParser","_envChangeTokenParser","_infoerrorTokenParser","_fedauthInfoParser","_featureExtAckParser","_loginackTokenParser","_orderTokenParser","_returnstatusTokenParser","_returnvalueTokenParser","_rowTokenParser","_nbcrowTokenParser","_sspiTokenParser","_helpers","obj","__esModule","default","Parser","debug","colMetadata","options","iterator","buffer","position","parseTokens","iterable","parser","waitForChunk","err","length","type","readUInt8","token","readToken","undefined","TYPE","DONE","readDoneToken","DONEPROC","readDoneProcToken","DONEINPROC","readDoneInProcToken","ERROR","readErrorToken","INFO","readInfoToken","ENVCHANGE","readEnvChangeToken","LOGINACK","readLoginAckToken","RETURNSTATUS","readReturnStatusToken","ORDER","readOrderToken","FEDAUTHINFO","readFedAuthInfoToken","SSPI","readSSPIToken","COLMETADATA","readColMetadataToken","RETURNVALUE","readReturnValueToken","ROW","readRowToken","NBCROW","readNbcRowToken","FEATUREEXTACK","readFeatureExtAckToken","Error","result","featureExtAckParser","NotEnoughDataError","then","offset","value","nbcRowParser","returnValueParser","colMetadataParser","columns","sspiParser","fedAuthInfoParser","orderParser","returnStatusParser","loginAckParser","envChangeParser","rowParser","infoParser","errorParser","doneInProcParser","doneProcParser","doneParser","constructor","Symbol","asyncIterator","call","Buffer","alloc","next","done","concat","slice","_default","exports","module"],"mappings":"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","debugId":null}},
    {"offset": {"line": 1767, "column": 0}, "map": {"version":3,"sources":["file:///users/mrzasa/projects/current/frontend2.4/node_modules/tedious/src/token/token-stream-parser.ts"],"sourcesContent":["import { EventEmitter } from 'events';\nimport StreamParser, { type ParserOptions } from './stream-parser';\nimport Debug from '../debug';\nimport { Token } from './token';\nimport { Readable } from 'stream';\nimport Message from '../message';\nimport { TokenHandler } from './handler';\n\nexport class Parser extends EventEmitter {\n  declare debug: Debug;\n  declare options: ParserOptions;\n  declare parser: Readable;\n\n  constructor(message: Message, debug: Debug, handler: TokenHandler, options: ParserOptions) {\n    super();\n\n    this.debug = debug;\n    this.options = options;\n\n    this.parser = Readable.from(StreamParser.parseTokens(message, this.debug, this.options));\n    this.parser.on('data', (token: Token) => {\n      debug.token(token);\n      handler[token.handlerName as keyof TokenHandler](token as any);\n    });\n\n    this.parser.on('drain', () => {\n      this.emit('drain');\n    });\n\n    this.parser.on('end', () => {\n      this.emit('end');\n    });\n  }\n\n  declare on: (\n    ((event: 'end', listener: () => void) => this) &\n    ((event: string | symbol, listener: (...args: any[]) => void) => this)\n  );\n\n  pause() {\n    return this.parser.pause();\n  }\n\n  resume() {\n    return this.parser.resume();\n  }\n}\n"],"names":["_events","require","_streamParser","_interopRequireDefault","_stream","obj","__esModule","default","Parser","EventEmitter","constructor","message","debug","handler","options","parser","Readable","from","StreamParser","parseTokens","on","token","handlerName","emit","pause","resume","exports"],"mappings":";;;;AAAA,IAAAA,OAAA,GAAAC,OAAA;AACA,IAAAC,aAAA,GAAAC,sBAAA,CAAAF,OAAA;AAGA,IAAAG,OAAA,GAAAH,OAAA;AAAkC,SAAAE,uBAAAE,GAAA;IAAA,OAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,GAAA;QAAAE,OAAA,EAAAF,GAAA;IAAA;AAAA;AAI3B,MAAMG,MAAM,SAASC,QAAAA,YAAY,CAAC;IAKvCC,WAAWA,CAACC,OAAgB,EAAEC,KAAY,EAAEC,OAAqB,EAAEC,OAAsB,CAAE;QACzF,KAAK,CAAC,CAAC;QAEP,IAAI,CAACF,KAAK,GAAGA,KAAK;QAClB,IAAI,CAACE,OAAO,GAAGA,OAAO;QAEtB,IAAI,CAACC,MAAM,GAAGC,QAAAA,QAAQ,CAACC,IAAI,CAACC,cAAAA,OAAY,CAACC,WAAW,CAACR,OAAO,EAAE,IAAI,CAACC,KAAK,EAAE,IAAI,CAACE,OAAO,CAAC,CAAC;QACxF,IAAI,CAACC,MAAM,CAACK,EAAE,CAAC,MAAM,GAAGC,KAAY,IAAK;YACvCT,KAAK,CAACS,KAAK,CAACA,KAAK,CAAC;YAClBR,OAAO,CAACQ,KAAK,CAACC,WAAW,CAAuB,CAACD,KAAY,CAAC;QAChE,CAAC,CAAC;QAEF,IAAI,CAACN,MAAM,CAACK,EAAE,CAAC,OAAO,EAAE,MAAM;YAC5B,IAAI,CAACG,IAAI,CAAC,OAAO,CAAC;QACpB,CAAC,CAAC;QAEF,IAAI,CAACR,MAAM,CAACK,EAAE,CAAC,KAAK,EAAE,MAAM;YAC1B,IAAI,CAACG,IAAI,CAAC,KAAK,CAAC;QAClB,CAAC,CAAC;IACJ;IAOAC,KAAKA,CAAA,EAAG;QACN,OAAO,IAAI,CAACT,MAAM,CAACS,KAAK,CAAC,CAAC;IAC5B;IAEAC,MAAMA,CAAA,EAAG;QACP,OAAO,IAAI,CAACV,MAAM,CAACU,MAAM,CAAC,CAAC;IAC7B;AACF;AAACC,OAAA,CAAAlB,MAAA,GAAAA,MAAA","debugId":null}},
    {"offset": {"line": 1808, "column": 0}, "map": {"version":3,"sources":["file:///users/mrzasa/projects/current/frontend2.4/node_modules/tedious/src/token/handler.ts"],"sourcesContent":["import Connection from '../connection';\nimport Request from '../request';\nimport { ConnectionError, RequestError } from '../errors';\nimport { type ColumnMetadata } from './colmetadata-token-parser';\nimport {\n  BeginTransactionEnvChangeToken,\n  CharsetEnvChangeToken,\n  CollationChangeToken,\n  ColMetadataToken,\n  CommitTransactionEnvChangeToken,\n  DatabaseEnvChangeToken,\n  DatabaseMirroringPartnerEnvChangeToken,\n  DoneInProcToken,\n  DoneProcToken,\n  DoneToken,\n  ErrorMessageToken,\n  FeatureExtAckToken,\n  FedAuthInfoToken,\n  InfoMessageToken,\n  LanguageEnvChangeToken,\n  LoginAckToken,\n  NBCRowToken,\n  OrderToken,\n  PacketSizeEnvChangeToken,\n  ResetConnectionEnvChangeToken,\n  ReturnStatusToken,\n  ReturnValueToken,\n  RollbackTransactionEnvChangeToken,\n  RoutingEnvChangeToken,\n  RowToken,\n  SSPIToken,\n  Token\n} from './token';\nimport BulkLoad from '../bulk-load';\n\nexport class UnexpectedTokenError extends Error {\n  constructor(handler: TokenHandler, token: Token) {\n    super('Unexpected token `' + token.name + '` in `' + handler.constructor.name + '`');\n  }\n}\n\nexport class TokenHandler {\n  onInfoMessage(token: InfoMessageToken) {\n    throw new UnexpectedTokenError(this, token);\n  }\n\n  onErrorMessage(token: ErrorMessageToken) {\n    throw new UnexpectedTokenError(this, token);\n  }\n\n  onSSPI(token: SSPIToken) {\n    throw new UnexpectedTokenError(this, token);\n  }\n\n  onDatabaseChange(token: DatabaseEnvChangeToken) {\n    throw new UnexpectedTokenError(this, token);\n  }\n\n  onLanguageChange(token: LanguageEnvChangeToken) {\n    throw new UnexpectedTokenError(this, token);\n  }\n\n  onCharsetChange(token: CharsetEnvChangeToken) {\n    throw new UnexpectedTokenError(this, token);\n  }\n\n  onSqlCollationChange(token: CollationChangeToken) {\n    throw new UnexpectedTokenError(this, token);\n  }\n\n  onRoutingChange(token: RoutingEnvChangeToken) {\n    throw new UnexpectedTokenError(this, token);\n  }\n\n  onPacketSizeChange(token: PacketSizeEnvChangeToken) {\n    throw new UnexpectedTokenError(this, token);\n  }\n\n  onResetConnection(token: ResetConnectionEnvChangeToken) {\n    throw new UnexpectedTokenError(this, token);\n  }\n\n  onBeginTransaction(token: BeginTransactionEnvChangeToken) {\n    throw new UnexpectedTokenError(this, token);\n  }\n\n  onCommitTransaction(token: CommitTransactionEnvChangeToken) {\n    throw new UnexpectedTokenError(this, token);\n  }\n\n  onRollbackTransaction(token: RollbackTransactionEnvChangeToken) {\n    throw new UnexpectedTokenError(this, token);\n  }\n\n  onFedAuthInfo(token: FedAuthInfoToken) {\n    throw new UnexpectedTokenError(this, token);\n  }\n\n  onFeatureExtAck(token: FeatureExtAckToken) {\n    throw new UnexpectedTokenError(this, token);\n  }\n\n  onLoginAck(token: LoginAckToken) {\n    throw new UnexpectedTokenError(this, token);\n  }\n\n  onColMetadata(token: ColMetadataToken) {\n    throw new UnexpectedTokenError(this, token);\n  }\n\n  onOrder(token: OrderToken) {\n    throw new UnexpectedTokenError(this, token);\n  }\n\n  onRow(token: RowToken | NBCRowToken) {\n    throw new UnexpectedTokenError(this, token);\n  }\n\n  onReturnStatus(token: ReturnStatusToken) {\n    throw new UnexpectedTokenError(this, token);\n  }\n\n  onReturnValue(token: ReturnValueToken) {\n    throw new UnexpectedTokenError(this, token);\n  }\n\n  onDoneProc(token: DoneProcToken) {\n    throw new UnexpectedTokenError(this, token);\n  }\n\n  onDoneInProc(token: DoneInProcToken) {\n    throw new UnexpectedTokenError(this, token);\n  }\n\n  onDone(token: DoneToken) {\n    throw new UnexpectedTokenError(this, token);\n  }\n\n  onDatabaseMirroringPartner(token: DatabaseMirroringPartnerEnvChangeToken) {\n    throw new UnexpectedTokenError(this, token);\n  }\n}\n\n/**\n * A handler for tokens received in the response message to the initial SQL Batch request\n * that sets up different connection settings.\n */\nexport class InitialSqlTokenHandler extends TokenHandler {\n  declare connection: Connection;\n\n  constructor(connection: Connection) {\n    super();\n\n    this.connection = connection;\n  }\n\n  onInfoMessage(token: InfoMessageToken) {\n    this.connection.emit('infoMessage', token);\n  }\n\n  onErrorMessage(token: ErrorMessageToken) {\n    this.connection.emit('errorMessage', token);\n  }\n\n  onDatabaseChange(token: DatabaseEnvChangeToken) {\n    this.connection.emit('databaseChange', token.newValue);\n  }\n\n  onLanguageChange(token: LanguageEnvChangeToken) {\n    this.connection.emit('languageChange', token.newValue);\n  }\n\n  onCharsetChange(token: CharsetEnvChangeToken) {\n    this.connection.emit('charsetChange', token.newValue);\n  }\n\n  onSqlCollationChange(token: CollationChangeToken) {\n    this.connection.databaseCollation = token.newValue;\n  }\n\n  onPacketSizeChange(token: PacketSizeEnvChangeToken) {\n    this.connection.messageIo.packetSize(token.newValue);\n  }\n\n  onBeginTransaction(token: BeginTransactionEnvChangeToken) {\n    this.connection.transactionDescriptors.push(token.newValue);\n    this.connection.inTransaction = true;\n  }\n\n  onCommitTransaction(token: CommitTransactionEnvChangeToken) {\n    this.connection.transactionDescriptors.length = 1;\n    this.connection.inTransaction = false;\n  }\n\n  onRollbackTransaction(token: RollbackTransactionEnvChangeToken) {\n    this.connection.transactionDescriptors.length = 1;\n    // An outermost transaction was rolled back. Reset the transaction counter\n    this.connection.inTransaction = false;\n    this.connection.emit('rollbackTransaction');\n  }\n\n  onColMetadata(token: ColMetadataToken) {\n    this.connection.emit('error', new Error(\"Received 'columnMetadata' when no sqlRequest is in progress\"));\n    this.connection.close();\n  }\n\n  onOrder(token: OrderToken) {\n    this.connection.emit('error', new Error(\"Received 'order' when no sqlRequest is in progress\"));\n    this.connection.close();\n  }\n\n  onRow(token: RowToken | NBCRowToken) {\n    this.connection.emit('error', new Error(\"Received 'row' when no sqlRequest is in progress\"));\n    this.connection.close();\n  }\n\n  onReturnStatus(token: ReturnStatusToken) {\n    // Do nothing\n  }\n\n  onReturnValue(token: ReturnValueToken) {\n    // Do nothing\n  }\n\n  onDoneProc(token: DoneProcToken) {\n    // Do nothing\n  }\n\n  onDoneInProc(token: DoneInProcToken) {\n    // Do nothing\n  }\n\n  onDone(token: DoneToken) {\n    // Do nothing\n  }\n\n  onResetConnection(token: ResetConnectionEnvChangeToken) {\n    this.connection.emit('resetConnection');\n  }\n}\n\n/**\n * A handler for tokens received in the response message to a Login7 message.\n */\nexport class Login7TokenHandler extends TokenHandler {\n  declare connection: Connection;\n\n  declare fedAuthInfoToken: FedAuthInfoToken | undefined;\n  declare routingData: { server: string, port: number } | undefined;\n\n  declare loginAckReceived: boolean;\n\n  constructor(connection: Connection) {\n    super();\n    this.loginAckReceived = false;\n    this.connection = connection;\n  }\n\n  onInfoMessage(token: InfoMessageToken) {\n    this.connection.emit('infoMessage', token);\n  }\n\n  onErrorMessage(token: ErrorMessageToken) {\n    this.connection.emit('errorMessage', token);\n\n    const error = new ConnectionError(token.message, 'ELOGIN');\n\n    const isLoginErrorTransient = this.connection.transientErrorLookup.isTransientError(token.number);\n    if (isLoginErrorTransient && this.connection.curTransientRetryCount !== this.connection.config.options.maxRetriesOnTransientErrors) {\n      error.isTransient = true;\n    }\n\n    this.connection.loginError = error;\n  }\n\n  onSSPI(token: SSPIToken) {\n    if (token.ntlmpacket) {\n      this.connection.ntlmpacket = token.ntlmpacket;\n      this.connection.ntlmpacketBuffer = token.ntlmpacketBuffer;\n    }\n  }\n\n  onDatabaseChange(token: DatabaseEnvChangeToken) {\n    this.connection.emit('databaseChange', token.newValue);\n  }\n\n  onLanguageChange(token: LanguageEnvChangeToken) {\n    this.connection.emit('languageChange', token.newValue);\n  }\n\n  onCharsetChange(token: CharsetEnvChangeToken) {\n    this.connection.emit('charsetChange', token.newValue);\n  }\n\n  onSqlCollationChange(token: CollationChangeToken) {\n    this.connection.databaseCollation = token.newValue;\n  }\n\n  onFedAuthInfo(token: FedAuthInfoToken) {\n    this.fedAuthInfoToken = token;\n  }\n\n  onFeatureExtAck(token: FeatureExtAckToken) {\n    const { authentication } = this.connection.config;\n\n    if (authentication.type === 'azure-active-directory-password' || authentication.type === 'azure-active-directory-access-token' || authentication.type === 'azure-active-directory-msi-vm' || authentication.type === 'azure-active-directory-msi-app-service' || authentication.type === 'azure-active-directory-service-principal-secret' || authentication.type === 'azure-active-directory-default') {\n      if (token.fedAuth === undefined) {\n        this.connection.loginError = new ConnectionError('Did not receive Active Directory authentication acknowledgement');\n      } else if (token.fedAuth.length !== 0) {\n        this.connection.loginError = new ConnectionError(`Active Directory authentication acknowledgment for ${authentication.type} authentication method includes extra data`);\n      }\n    } else if (token.fedAuth === undefined && token.utf8Support === undefined) {\n      this.connection.loginError = new ConnectionError('Received acknowledgement for unknown feature');\n    } else if (token.fedAuth) {\n      this.connection.loginError = new ConnectionError('Did not request Active Directory authentication, but received the acknowledgment');\n    }\n  }\n\n  onLoginAck(token: LoginAckToken) {\n    if (!token.tdsVersion) {\n      // unsupported TDS version\n      this.connection.loginError = new ConnectionError('Server responded with unknown TDS version.', 'ETDS');\n      return;\n    }\n\n    if (!token.interface) {\n      // unsupported interface\n      this.connection.loginError = new ConnectionError('Server responded with unsupported interface.', 'EINTERFACENOTSUPP');\n      return;\n    }\n\n    // use negotiated version\n    this.connection.config.options.tdsVersion = token.tdsVersion;\n\n    this.loginAckReceived = true;\n  }\n\n  onRoutingChange(token: RoutingEnvChangeToken) {\n    // Removes instance name attached to the redirect url. E.g., redirect.db.net\\instance1 --> redirect.db.net\n    const [ server ] = token.newValue.server.split('\\\\');\n\n    this.routingData = {\n      server, port: token.newValue.port\n    };\n  }\n\n  onDoneInProc(token: DoneInProcToken) {\n    // Do nothing\n  }\n\n  onDone(token: DoneToken) {\n    // Do nothing\n  }\n\n  onPacketSizeChange(token: PacketSizeEnvChangeToken) {\n    this.connection.messageIo.packetSize(token.newValue);\n  }\n\n  onDatabaseMirroringPartner(token: DatabaseMirroringPartnerEnvChangeToken) {\n    // Do nothing\n  }\n}\n\n/**\n * A handler for tokens received in the response message to a RPC Request,\n * a SQL Batch Request, a Bulk Load BCP Request or a Transaction Manager Request.\n */\nexport class RequestTokenHandler extends TokenHandler {\n  declare connection: Connection;\n  declare request: Request | BulkLoad;\n  declare errors: RequestError[];\n\n  constructor(connection: Connection, request: Request | BulkLoad) {\n    super();\n\n    this.connection = connection;\n    this.request = request;\n    this.errors = [];\n  }\n\n  onInfoMessage(token: InfoMessageToken) {\n    this.connection.emit('infoMessage', token);\n  }\n\n  onErrorMessage(token: ErrorMessageToken) {\n    this.connection.emit('errorMessage', token);\n\n    if (!this.request.canceled) {\n      const error = new RequestError(token.message, 'EREQUEST');\n\n      error.number = token.number;\n      error.state = token.state;\n      error.class = token.class;\n      error.serverName = token.serverName;\n      error.procName = token.procName;\n      error.lineNumber = token.lineNumber;\n      this.errors.push(error);\n      this.request.error = error;\n      if (this.request instanceof Request && this.errors.length > 1) {\n        this.request.error = new AggregateError(this.errors);\n      }\n    }\n  }\n\n  onDatabaseChange(token: DatabaseEnvChangeToken) {\n    this.connection.emit('databaseChange', token.newValue);\n  }\n\n  onLanguageChange(token: LanguageEnvChangeToken) {\n    this.connection.emit('languageChange', token.newValue);\n  }\n\n  onCharsetChange(token: CharsetEnvChangeToken) {\n    this.connection.emit('charsetChange', token.newValue);\n  }\n\n  onSqlCollationChange(token: CollationChangeToken) {\n    this.connection.databaseCollation = token.newValue;\n  }\n\n  onPacketSizeChange(token: PacketSizeEnvChangeToken) {\n    this.connection.messageIo.packetSize(token.newValue);\n  }\n\n  onBeginTransaction(token: BeginTransactionEnvChangeToken) {\n    this.connection.transactionDescriptors.push(token.newValue);\n    this.connection.inTransaction = true;\n  }\n\n  onCommitTransaction(token: CommitTransactionEnvChangeToken) {\n    this.connection.transactionDescriptors.length = 1;\n    this.connection.inTransaction = false;\n  }\n\n  onRollbackTransaction(token: RollbackTransactionEnvChangeToken) {\n    this.connection.transactionDescriptors.length = 1;\n    // An outermost transaction was rolled back. Reset the transaction counter\n    this.connection.inTransaction = false;\n    this.connection.emit('rollbackTransaction');\n  }\n\n  onColMetadata(token: ColMetadataToken) {\n    if (!this.request.canceled) {\n      if (this.connection.config.options.useColumnNames) {\n        const columns: { [key: string]: ColumnMetadata } = Object.create(null);\n\n        for (let j = 0, len = token.columns.length; j < len; j++) {\n          const col = token.columns[j];\n          if (columns[col.colName] == null) {\n            columns[col.colName] = col;\n          }\n        }\n\n        this.request.emit('columnMetadata', columns);\n      } else {\n        this.request.emit('columnMetadata', token.columns);\n      }\n    }\n  }\n\n  onOrder(token: OrderToken) {\n    if (!this.request.canceled) {\n      this.request.emit('order', token.orderColumns);\n    }\n  }\n\n  onRow(token: RowToken | NBCRowToken) {\n    if (!this.request.canceled) {\n      if (this.connection.config.options.rowCollectionOnRequestCompletion) {\n        this.request.rows!.push(token.columns);\n      }\n\n      if (this.connection.config.options.rowCollectionOnDone) {\n        this.request.rst!.push(token.columns);\n      }\n\n      this.request.emit('row', token.columns);\n    }\n  }\n\n  onReturnStatus(token: ReturnStatusToken) {\n    if (!this.request.canceled) {\n      // Keep value for passing in 'doneProc' event.\n      this.connection.procReturnStatusValue = token.value;\n    }\n  }\n\n  onReturnValue(token: ReturnValueToken) {\n    if (!this.request.canceled) {\n      this.request.emit('returnValue', token.paramName, token.value, token.metadata);\n    }\n  }\n\n  onDoneProc(token: DoneProcToken) {\n    if (!this.request.canceled) {\n      if (token.sqlError && !this.request.error) {\n        // check if the DONE_ERROR flags was set, but an ERROR token was not sent.\n        this.request.error = new RequestError('An unknown error has occurred.', 'UNKNOWN');\n      }\n\n      this.request.emit('doneProc', token.rowCount, token.more, this.connection.procReturnStatusValue, this.request.rst);\n\n      this.connection.procReturnStatusValue = undefined;\n\n      if (token.rowCount !== undefined) {\n        this.request.rowCount! += token.rowCount;\n      }\n\n      if (this.connection.config.options.rowCollectionOnDone) {\n        this.request.rst = [];\n      }\n    }\n  }\n\n  onDoneInProc(token: DoneInProcToken) {\n    if (!this.request.canceled) {\n      this.request.emit('doneInProc', token.rowCount, token.more, this.request.rst);\n\n      if (token.rowCount !== undefined) {\n        this.request.rowCount! += token.rowCount;\n      }\n\n      if (this.connection.config.options.rowCollectionOnDone) {\n        this.request.rst = [];\n      }\n    }\n  }\n\n  onDone(token: DoneToken) {\n    if (!this.request.canceled) {\n      if (token.sqlError && !this.request.error) {\n        // check if the DONE_ERROR flags was set, but an ERROR token was not sent.\n        this.request.error = new RequestError('An unknown error has occurred.', 'UNKNOWN');\n      }\n\n      this.request.emit('done', token.rowCount, token.more, this.request.rst);\n\n      if (token.rowCount !== undefined) {\n        this.request.rowCount! += token.rowCount;\n      }\n\n      if (this.connection.config.options.rowCollectionOnDone) {\n        this.request.rst = [];\n      }\n    }\n  }\n\n  onResetConnection(token: ResetConnectionEnvChangeToken) {\n    this.connection.emit('resetConnection');\n  }\n}\n\n/**\n * A handler for the attention acknowledgement message.\n *\n * This message only contains a `DONE` token that acknowledges\n * that the attention message was received by the server.\n */\nexport class AttentionTokenHandler extends TokenHandler {\n  declare connection: Connection;\n  declare request: Request | BulkLoad;\n\n  /**\n   * Returns whether an attention acknowledgement was received.\n   */\n  declare attentionReceived: boolean;\n\n  constructor(connection: Connection, request: Request | BulkLoad) {\n    super();\n\n    this.connection = connection;\n    this.request = request;\n\n    this.attentionReceived = false;\n  }\n\n  onDone(token: DoneToken) {\n    if (token.attention) {\n      this.attentionReceived = true;\n    }\n  }\n}\n"],"names":["_request","_interopRequireDefault","require","_errors","obj","__esModule","default","UnexpectedTokenError","Error","constructor","handler","token","name","exports","TokenHandler","onInfoMessage","onErrorMessage","onSSPI","onDatabaseChange","onLanguageChange","onCharsetChange","onSqlCollationChange","onRoutingChange","onPacketSizeChange","onResetConnection","onBeginTransaction","onCommitTransaction","onRollbackTransaction","onFedAuthInfo","onFeatureExtAck","onLoginAck","onColMetadata","onOrder","onRow","onReturnStatus","onReturnValue","onDoneProc","onDoneInProc","onDone","onDatabaseMirroringPartner","InitialSqlTokenHandler","connection","emit","newValue","databaseCollation","messageIo","packetSize","transactionDescriptors","push","inTransaction","length","close","Login7TokenHandler","loginAckReceived","error","ConnectionError","message","isLoginErrorTransient","transientErrorLookup","isTransientError","number","curTransientRetryCount","config","options","maxRetriesOnTransientErrors","isTransient","loginError","ntlmpacket","ntlmpacketBuffer","fedAuthInfoToken","authentication","type","fedAuth","undefined","utf8Support","tdsVersion","interface","server","split","routingData","port","RequestTokenHandler","request","errors","canceled","RequestError","state","class","serverName","procName","lineNumber","Request","AggregateError","useColumnNames","columns","Object","create","j","len","col","colName","orderColumns","rowCollectionOnRequestCompletion","rows","rowCollectionOnDone","rst","procReturnStatusValue","value","paramName","metadata","sqlError","rowCount","more","AttentionTokenHandler","attentionReceived","attention"],"mappings":"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","debugId":null}}]
}