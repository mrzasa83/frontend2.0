(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[739],{1014:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(1858).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},1844:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(1858).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},1858:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var l=s(2115);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},a=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim();var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,l.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:n="",children:c,iconNode:i,...d},m)=>(0,l.createElement)("svg",{ref:m,...o,width:t,height:t,stroke:e,strokeWidth:r?24*Number(s)/Number(t):s,className:a("lucide",n),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(d)&&{"aria-hidden":"true"},...d},[...i.map(([e,t])=>(0,l.createElement)(e,t)),...Array.isArray(c)?c:[c]])),c=(e,t)=>{let s=(0,l.forwardRef)(({className:s,...o},c)=>(0,l.createElement)(n,{ref:c,iconNode:t,className:a(`lucide-${r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,s),...o}));return s.displayName=r(e),s}},3492:(e,t,s)=>{Promise.resolve().then(s.bind(s,4931))},4593:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(1858).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4931:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var l=s(5155),r=s(2115),a=s(7257),o=s(1844),n=s(8079),c=s(1014);let i=(0,s(1858).A)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);function d({products:e,onView:t,onEdit:s,onSave:a,tableState:d,onTableStateChange:m,isAdmin:u}){let{search:x,sortKey:b,sortAsc:p,pageSize:h,page:f,typeFilter:g}=d,[y,j]=(0,r.useState)(null),[v,N]=(0,r.useState)({}),[w,_]=(0,r.useState)(!1),C=e=>{m({...d,...e})},k=Array.from(new Set(e.map(e=>e.item_type_name).filter(e=>null!=e))).sort(),S=e.filter(e=>{let t=e.apcPN.toLowerCase().includes(x.toLowerCase())||e.customer?.toLowerCase().includes(x.toLowerCase())||e.customerPN?.toLowerCase().includes(x.toLowerCase())||e.description?.toLowerCase().includes(x.toLowerCase()),s=!g||"all"===g||e.item_type_name===g;return t&&s}),P=[...S].sort((e,t)=>{let s=e[b]||"",l=t[b]||"";return p?String(s).localeCompare(String(l)):String(l).localeCompare(String(s))}).slice(f*h,(f+1)*h),A=Math.ceil(S.length/h),E=()=>{j(null),N({})},R=async e=>{_(!0);try{await a({...e,...v}),j(null),N({})}catch(e){console.error("Error saving:",e)}finally{_(!1)}},z=(e,t)=>{N(s=>({...s,[e]:t}))};return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4 gap-4",children:[(0,l.jsx)("input",{type:"text",placeholder:"Search products...",value:x,onChange:e=>C({search:e.target.value,page:0}),className:"border border-slate-300 px-3 py-2 rounded-lg flex-1 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"}),(0,l.jsxs)("select",{value:g||"all",onChange:e=>C({typeFilter:e.target.value,page:0}),className:"border border-slate-300 px-3 py-2 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",children:[(0,l.jsx)("option",{value:"all",children:"All Types"}),k.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]}),(0,l.jsx)("select",{value:h,onChange:e=>C({pageSize:Number(e.target.value),page:0}),className:"border border-slate-300 px-3 py-2 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",children:[25,50,100,250].map(e=>(0,l.jsxs)("option",{value:e,children:["Show ",e]},e))})]}),(0,l.jsx)("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:(0,l.jsxs)("table",{className:"w-full",children:[(0,l.jsx)("thead",{className:"bg-slate-100",children:(0,l.jsxs)("tr",{children:[(0,l.jsxs)("th",{className:"text-left px-4 py-3 font-medium text-sm text-slate-700 cursor-pointer hover:bg-slate-200",onClick:()=>"apcPN"===b?C({sortAsc:!p}):C({sortKey:"apcPN"}),children:["Part Number ","apcPN"===b&&(p?"▲":"▼")]}),(0,l.jsxs)("th",{className:"text-left px-4 py-3 font-medium text-sm text-slate-700 cursor-pointer hover:bg-slate-200",onClick:()=>"item_type_name"===b?C({sortAsc:!p}):C({sortKey:"item_type_name"}),children:["Type ","item_type_name"===b&&(p?"▲":"▼")]}),(0,l.jsxs)("th",{className:"text-left px-4 py-3 font-medium text-sm text-slate-700 cursor-pointer hover:bg-slate-200",onClick:()=>"customer"===b?C({sortAsc:!p}):C({sortKey:"customer"}),children:["Customer ","customer"===b&&(p?"▲":"▼")]}),(0,l.jsxs)("th",{className:"text-left px-4 py-3 font-medium text-sm text-slate-700 cursor-pointer hover:bg-slate-200",onClick:()=>"customerPN"===b?C({sortAsc:!p}):C({sortKey:"customerPN"}),children:["Customer PN ","customerPN"===b&&(p?"▲":"▼")]}),(0,l.jsxs)("th",{className:"text-left px-4 py-3 font-medium text-sm text-slate-700 cursor-pointer hover:bg-slate-200",onClick:()=>"currentRev"===b?C({sortAsc:!p}):C({sortKey:"currentRev"}),children:["Part Rev ","currentRev"===b&&(p?"▲":"▼")]}),(0,l.jsx)("th",{className:"text-left px-4 py-3 font-medium text-sm text-slate-700",children:"Actions"})]})}),(0,l.jsx)("tbody",{children:P.map(e=>{let r=y===e.id;return(0,l.jsxs)("tr",{className:`border-t border-slate-200 ${r?"bg-blue-50":"hover:bg-slate-50"} transition-colors`,children:[(0,l.jsx)("td",{className:"px-4 py-3 font-mono text-sm font-semibold",children:e.apcPN}),(0,l.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,l.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs",children:e.item_type_name||"Unknown"})}),(0,l.jsx)("td",{className:"px-4 py-3 text-sm",children:r?(0,l.jsx)("input",{type:"text",value:v.customer??e.customer??"",onChange:e=>z("customer",e.target.value),className:"w-full px-2 py-1 border border-slate-300 rounded text-sm focus:ring-2 focus:ring-blue-500 outline-none"}):e.customer||"-"}),(0,l.jsx)("td",{className:"px-4 py-3 text-sm",children:r?(0,l.jsx)("input",{type:"text",value:v.customerPN??e.customerPN??"",onChange:e=>z("customerPN",e.target.value),className:"w-full px-2 py-1 border border-slate-300 rounded text-sm font-mono focus:ring-2 focus:ring-blue-500 outline-none"}):(0,l.jsx)("span",{className:"font-mono",children:e.customerPN||"-"})}),(0,l.jsx)("td",{className:"px-4 py-3 text-sm",children:r?(0,l.jsx)("input",{type:"text",value:v.currentRev??e.currentRev??"",onChange:e=>z("currentRev",e.target.value),className:"w-full px-2 py-1 border border-slate-300 rounded text-sm focus:ring-2 focus:ring-blue-500 outline-none"}):e.currentRev||"-"}),(0,l.jsx)("td",{className:"px-4 py-3",children:r?(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{onClick:()=>R(e),disabled:w,className:"p-2 text-green-600 hover:bg-green-50 rounded transition-colors disabled:opacity-50",title:"Save Changes",children:(0,l.jsx)(o.A,{size:18})}),(0,l.jsx)("button",{onClick:E,disabled:w,className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors disabled:opacity-50",title:"Cancel",children:(0,l.jsx)(n.A,{size:18})})]}):(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{onClick:()=>t(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"View Product",children:(0,l.jsx)(c.A,{size:18})}),u&&(0,l.jsx)("button",{onClick:()=>{j(e.id),N({customer:e.customer,customerPN:e.customerPN,currentRev:e.currentRev,description:e.description})},className:"p-2 text-orange-600 hover:bg-orange-50 rounded transition-colors",title:"Quick Edit",children:(0,l.jsx)(i,{size:18})}),(0,l.jsx)("button",{onClick:()=>s(e),className:"p-2 text-green-600 hover:bg-green-50 rounded transition-colors",title:"Full Edit",children:(0,l.jsx)(i,{size:18})})]})})]},e.id)})})]})}),(0,l.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,l.jsxs)("p",{className:"text-sm text-slate-500",children:["Showing ",P.length," of ",S.length," products",g&&"all"!==g&&` (filtered by ${g})`]}),(0,l.jsxs)("div",{className:"flex gap-1",children:[(0,l.jsx)("button",{onClick:()=>C({page:Math.max(0,f-1)}),disabled:0===f,className:"px-3 py-1 rounded bg-slate-200 hover:bg-slate-300 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Previous"}),Array.from({length:Math.min(5,A)}).map((e,t)=>{let s=f<3?t:f-2+t;return s>=A?null:(0,l.jsx)("button",{onClick:()=>C({page:s}),className:`px-3 py-1 rounded text-sm ${s===f?"bg-slate-800 text-white":"bg-slate-200 hover:bg-slate-300"}`,children:s+1},s)}),(0,l.jsx)("button",{onClick:()=>C({page:Math.min(A-1,f+1)}),disabled:f>=A-1,className:"px-3 py-1 rounded bg-slate-200 hover:bg-slate-300 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Next"})]})]})]})}var m=s(9749);function u(e){let t,s,r,a,o,c,i,d,u,x,b,p,h,f,g,y,j,v,N,w,_,C,k,S,P,A=(0,m.c)(49),{product:E,onClose:R}=e;A[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-slate-800",children:"View Product"}),(0,l.jsx)("p",{className:"text-sm text-slate-600 mt-1",children:"Product information (read-only)"})]}),A[0]=t):t=A[0],A[1]===Symbol.for("react.memo_cache_sentinel")?(s=(0,l.jsx)(n.A,{size:24,className:"text-slate-600"}),A[1]=s):s=A[1],A[2]!==R?(r=(0,l.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[t,(0,l.jsx)("button",{onClick:R,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:s})]}),A[2]=R,A[3]=r):r=A[3],A[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"APC Part Number"}),A[4]=a):a=A[4],A[5]!==E.apcPN?(o=(0,l.jsxs)("div",{children:[a,(0,l.jsx)("input",{type:"text",value:E.apcPN,readOnly:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 cursor-not-allowed text-sm"})]}),A[5]=E.apcPN,A[6]=o):o=A[6],A[7]===Symbol.for("react.memo_cache_sentinel")?(c=(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Type"}),A[7]=c):c=A[7];let z=E.item_type_name||"Unknown";A[8]!==z?(i=(0,l.jsxs)("div",{children:[c,(0,l.jsx)("input",{type:"text",value:z,readOnly:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 cursor-not-allowed text-sm"})]}),A[8]=z,A[9]=i):i=A[9],A[10]===Symbol.for("react.memo_cache_sentinel")?(d=(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Customer Part Number"}),A[10]=d):d=A[10];let L=E.customerPN||"-";A[11]!==L?(u=(0,l.jsxs)("div",{children:[d,(0,l.jsx)("input",{type:"text",value:L,readOnly:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 cursor-not-allowed text-sm"})]}),A[11]=L,A[12]=u):u=A[12],A[13]===Symbol.for("react.memo_cache_sentinel")?(x=(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Customer"}),A[13]=x):x=A[13];let M=E.customer||"-";A[14]!==M?(b=(0,l.jsxs)("div",{children:[x,(0,l.jsx)("input",{type:"text",value:M,readOnly:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 cursor-not-allowed text-sm"})]}),A[14]=M,A[15]=b):b=A[15],A[16]===Symbol.for("react.memo_cache_sentinel")?(p=(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Part Revision"}),A[16]=p):p=A[16];let O=E.currentRev||"-";A[17]!==O?(h=(0,l.jsxs)("div",{children:[p,(0,l.jsx)("input",{type:"text",value:O,readOnly:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 cursor-not-allowed text-sm"})]}),A[17]=O,A[18]=h):h=A[18],A[19]===Symbol.for("react.memo_cache_sentinel")?(f=(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Build Revision"}),A[19]=f):f=A[19];let $=E.buildRev||"-";A[20]!==$?(g=(0,l.jsxs)("div",{children:[f,(0,l.jsx)("input",{type:"text",value:$,readOnly:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 cursor-not-allowed text-sm"})]}),A[20]=$,A[21]=g):g=A[21],A[22]===Symbol.for("react.memo_cache_sentinel")?(y=(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),A[22]=y):y=A[22];let F=E.description||"-";A[23]!==F?(j=(0,l.jsxs)("div",{className:"col-span-2",children:[y,(0,l.jsx)("textarea",{value:F,readOnly:!0,rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 cursor-not-allowed text-sm"})]}),A[23]=F,A[24]=j):j=A[24],A[25]===Symbol.for("react.memo_cache_sentinel")?(v=(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Full Path"}),A[25]=v):v=A[25];let T=E.fullPath||"-";return A[26]!==T?(N=(0,l.jsxs)("div",{className:"col-span-2",children:[v,(0,l.jsx)("input",{type:"text",value:T,readOnly:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 cursor-not-allowed text-sm"})]}),A[26]=T,A[27]=N):N=A[27],A[28]===Symbol.for("react.memo_cache_sentinel")?(w=(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Created At"}),A[28]=w):w=A[28],A[29]!==E.createdAt?(_=new Date(E.createdAt).toLocaleString(),A[29]=E.createdAt,A[30]=_):_=A[30],A[31]!==_?(C=(0,l.jsxs)("div",{children:[w,(0,l.jsx)("input",{type:"text",value:_,readOnly:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 cursor-not-allowed text-sm"})]}),A[31]=_,A[32]=C):C=A[32],A[33]!==u||A[34]!==b||A[35]!==h||A[36]!==g||A[37]!==j||A[38]!==N||A[39]!==C||A[40]!==o||A[41]!==i?(k=(0,l.jsx)("div",{className:"flex-1 overflow-auto p-6",children:(0,l.jsx)("div",{className:"space-y-4",children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[o,i,u,b,h,g,j,N,C]})})}),A[33]=u,A[34]=b,A[35]=h,A[36]=g,A[37]=j,A[38]=N,A[39]=C,A[40]=o,A[41]=i,A[42]=k):k=A[42],A[43]!==R?(S=(0,l.jsx)("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-slate-200",children:(0,l.jsx)("button",{onClick:R,className:"px-4 py-2 text-slate-700 hover:bg-slate-100 rounded-lg transition-colors",children:"Close"})}),A[43]=R,A[44]=S):S=A[44],A[45]!==r||A[46]!==k||A[47]!==S?(P=(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[r,k,S]})}),A[45]=r,A[46]=k,A[47]=S,A[48]=P):P=A[48],P}function x(e){let t,s,a,c,i,d,u,x,b,p,h,f,g,y,j,v,N,w,_,C,k,S,P,A,E,R,z,L,M,O,$,F,T,U,K,V,B,D=(0,m.c)(69),{product:J,onSave:Q,onCancel:W}=e,[H,I]=(0,r.useState)(J),[Z,Y]=(0,r.useState)(!1);D[0]===Symbol.for("react.memo_cache_sentinel")?(t=(e,t)=>{I(s=>({...s,[e]:t})),Y(!0)},D[0]=t):t=D[0];let q=t;D[1]!==H||D[2]!==Q?(s=()=>{Q(H),Y(!1)},D[1]=H,D[2]=Q,D[3]=s):s=D[3];let G=s;D[4]!==H.apcPN?(a=(0,l.jsxs)("h3",{className:"text-lg font-semibold text-slate-800",children:["Editing: ",H.apcPN]}),D[4]=H.apcPN,D[5]=a):a=D[5],D[6]!==Z?(c=Z&&(0,l.jsx)("p",{className:"text-sm text-orange-600 mt-1",children:"⚠ You have unsaved changes"}),D[6]=Z,D[7]=c):c=D[7],D[8]!==a||D[9]!==c?(i=(0,l.jsxs)("div",{children:[a,c]}),D[8]=a,D[9]=c,D[10]=i):i=D[10],D[11]===Symbol.for("react.memo_cache_sentinel")?(d=(0,l.jsx)(n.A,{size:18}),D[11]=d):d=D[11],D[12]!==W?(u=(0,l.jsxs)("button",{onClick:W,className:"px-4 py-2 text-slate-700 hover:bg-slate-100 rounded-lg transition-colors flex items-center gap-2",children:[d,"Cancel"]}),D[12]=W,D[13]=u):u=D[13];let X=!Z;D[14]===Symbol.for("react.memo_cache_sentinel")?(x=(0,l.jsx)(o.A,{size:18}),D[14]=x):x=D[14],D[15]!==G||D[16]!==X?(b=(0,l.jsxs)("button",{onClick:G,disabled:X,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[x,"Save Changes"]}),D[15]=G,D[16]=X,D[17]=b):b=D[17],D[18]!==b||D[19]!==u?(p=(0,l.jsxs)("div",{className:"flex gap-3",children:[u,b]}),D[18]=b,D[19]=u,D[20]=p):p=D[20],D[21]!==p||D[22]!==i?(h=(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-slate-200",children:[i,p]}),D[21]=p,D[22]=i,D[23]=h):h=D[23],D[24]===Symbol.for("react.memo_cache_sentinel")?(f=(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"APC Part Number"}),D[24]=f):f=D[24],D[25]!==H.apcPN?(g=(0,l.jsxs)("div",{children:[f,(0,l.jsx)("input",{type:"text",value:H.apcPN,readOnly:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-100 cursor-not-allowed",title:"Part number cannot be changed"})]}),D[25]=H.apcPN,D[26]=g):g=D[26],D[27]===Symbol.for("react.memo_cache_sentinel")?(y=(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Type"}),D[27]=y):y=D[27];let ee=H.item_type_name||"Unknown";D[28]!==ee?(j=(0,l.jsxs)("div",{children:[y,(0,l.jsx)("input",{type:"text",value:ee,readOnly:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-100 cursor-not-allowed",title:"Item type cannot be changed"})]}),D[28]=ee,D[29]=j):j=D[29],D[30]===Symbol.for("react.memo_cache_sentinel")?(v=(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Customer"}),D[30]=v):v=D[30];let et=H.customer||"";D[31]===Symbol.for("react.memo_cache_sentinel")?(N=e=>q("customer",e.target.value),D[31]=N):N=D[31],D[32]!==et?(w=(0,l.jsxs)("div",{children:[v,(0,l.jsx)("input",{type:"text",value:et,onChange:N,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Enter customer part number"})]}),D[32]=et,D[33]=w):w=D[33],D[34]===Symbol.for("react.memo_cache_sentinel")?(_=(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Customer Part Number"}),D[34]=_):_=D[34];let es=H.customerPN||"";D[35]===Symbol.for("react.memo_cache_sentinel")?(C=e=>q("customerPN",e.target.value),D[35]=C):C=D[35],D[36]!==es?(k=(0,l.jsxs)("div",{children:[_,(0,l.jsx)("input",{type:"text",value:es,onChange:C,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Enter customer name"})]}),D[36]=es,D[37]=k):k=D[37],D[38]===Symbol.for("react.memo_cache_sentinel")?(S=(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Part Revision"}),D[38]=S):S=D[38];let el=H.currentRev||"";D[39]===Symbol.for("react.memo_cache_sentinel")?(P=e=>q("currentRev",e.target.value),D[39]=P):P=D[39],D[40]!==el?(A=(0,l.jsxs)("div",{children:[S,(0,l.jsx)("input",{type:"text",value:el,onChange:P,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"e.g., A, B-1, Rev C"})]}),D[40]=el,D[41]=A):A=D[41],D[42]===Symbol.for("react.memo_cache_sentinel")?(E=(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Build Revision"}),D[42]=E):E=D[42];let er=H.buildRev||"";D[43]===Symbol.for("react.memo_cache_sentinel")?(R=e=>q("buildRev",e.target.value),D[43]=R):R=D[43],D[44]!==er?(z=(0,l.jsxs)("div",{children:[E,(0,l.jsx)("input",{type:"text",value:er,onChange:R,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"latest MCN ID"})]}),D[44]=er,D[45]=z):z=D[45],D[46]===Symbol.for("react.memo_cache_sentinel")?(L=(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),D[46]=L):L=D[46];let ea=H.description||"";D[47]===Symbol.for("react.memo_cache_sentinel")?(M=e=>q("description",e.target.value),D[47]=M):M=D[47],D[48]!==ea?(O=(0,l.jsxs)("div",{className:"col-span-2",children:[L,(0,l.jsx)("textarea",{value:ea,onChange:M,rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Enter product description (free-form)"})]}),D[48]=ea,D[49]=O):O=D[49],D[50]===Symbol.for("react.memo_cache_sentinel")?($=(0,l.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Full Path"}),D[50]=$):$=D[50];let eo=H.fullPath||"";return D[51]===Symbol.for("react.memo_cache_sentinel")?(F=e=>q("fullPath",e.target.value),D[51]=F):F=D[51],D[52]!==eo?(T=(0,l.jsxs)("div",{className:"col-span-2",children:[$,(0,l.jsx)("input",{type:"text",value:eo,onChange:F,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"/mnt/jdrive/APC EngJobs/..."})]}),D[52]=eo,D[53]=T):T=D[53],D[54]!==g||D[55]!==j||D[56]!==w||D[57]!==k||D[58]!==A||D[59]!==z||D[60]!==O||D[61]!==T?(U=(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[g,j,w,k,A,z,O,T]}),D[54]=g,D[55]=j,D[56]=w,D[57]=k,D[58]=A,D[59]=z,D[60]=O,D[61]=T,D[62]=U):U=D[62],D[63]===Symbol.for("react.memo_cache_sentinel")?(K=(0,l.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,l.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,l.jsx)("strong",{children:"Note:"})," Additional product information from other data sources (MS SQL, secondary MySQL, documents) will be displayed in separate tabs as we integrate them."]})}),D[63]=K):K=D[63],D[64]!==U?(V=(0,l.jsxs)("div",{className:"space-y-4",children:[U,K]}),D[64]=U,D[65]=V):V=D[65],D[66]!==h||D[67]!==V?(B=(0,l.jsxs)("div",{children:[h,V]}),D[66]=h,D[67]=V,D[68]=B):B=D[68],B}var b=s(4593),p=s(9319);function h(){let{data:e}=(0,p.useSession)(),[t,s]=(0,r.useState)([]),[o,n]=(0,r.useState)(!0),[c,i]=(0,r.useState)(null),[m,h]=(0,r.useState)(null),[f,g]=(0,r.useState)([]),[y,j]=(0,r.useState)("all"),[v,N]=(0,r.useState)({search:"",sortKey:"apcPN",sortAsc:!0,pageSize:25,page:0,typeFilter:"all"}),w=e?.user?.roles?.includes("admin")||!1;(0,r.useEffect)(()=>{_()},[]);let _=async()=>{try{n(!0),i(null);let e=await fetch("/api/products");if(!e.ok)throw Error(`Failed to fetch products: ${e.status}`);let t=await e.json();s(t)}catch(e){console.error("Error fetching products:",e),i(e instanceof Error?e.message:"Failed to load products")}finally{n(!1)}},C=e=>{g(t=>t.filter(t=>t.id!==e)),j("all")},k=async e=>{try{let t=await fetch(`/api/products/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to save product")}await _()}catch(e){throw console.error("Error saving product:",e),alert(`Failed to save product: ${e instanceof Error?e.message:"Unknown error"}`),e}},S=async e=>{try{let t=await fetch(`/api/products/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to save product")}await _(),C(e.id)}catch(e){console.error("Error saving product:",e),alert(`Failed to save product: ${e instanceof Error?e.message:"Unknown error"}`)}};if(o)return(0,l.jsx)("div",{className:"p-6",children:(0,l.jsxs)("div",{className:"animate-pulse",children:[(0,l.jsx)("div",{className:"h-8 bg-slate-200 rounded w-1/4 mb-4"}),(0,l.jsx)("div",{className:"h-64 bg-slate-200 rounded"})]})});if(c)return(0,l.jsx)("div",{className:"p-6",children:(0,l.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:[(0,l.jsx)("p",{className:"font-semibold",children:"Error loading products"}),(0,l.jsx)("p",{className:"text-sm",children:c}),(0,l.jsx)("button",{onClick:_,className:"mt-2 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"})]})});let P=[{id:"all",label:"All Products",content:(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsxs)("h3",{className:"text-lg font-semibold text-slate-800",children:["All Products (",t.length,")"]}),(0,l.jsxs)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[(0,l.jsx)(b.A,{size:18}),"Add Product"]})]}),(0,l.jsx)(d,{products:t,onView:e=>{h(e)},onEdit:e=>{f.find(t=>t.id===e.id)||g(t=>[...t,e]),j(`edit-${e.id}`)},onSave:k,tableState:v,onTableStateChange:N,isAdmin:w})]}),closeable:!1},...f.map(e=>({id:`edit-${e.id}`,label:e.apcPN,content:(0,l.jsx)(x,{product:e,onSave:S,onCancel:()=>C(e.id)}),closeable:!0,onClose:()=>C(e.id)}))];return(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Products"}),(0,l.jsx)("p",{className:"text-slate-600 mb-6",children:"Manage product catalog and specifications"}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow",children:(0,l.jsx)("div",{className:"p-6",children:(0,l.jsx)(a.A,{tabs:P,activeTab:y,onTabChange:j})})}),m&&(0,l.jsx)(u,{product:m,onClose:()=>h(null)})]})}},7257:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var l=s(5155),r=s(9749),a=s(8079);function o(e){let t,s,o,n,c,i,d=(0,r.c)(19),{tabs:m,activeTab:u,onTabChange:x}=e,b=u||m[0]?.id;d[0]!==b||d[1]!==m?(t=m.find(e=>e.id===b)?.content,d[0]=b,d[1]=m,d[2]=t):t=d[2];let p=t;d[3]!==x?(s=e=>{x&&x(e)},d[3]=x,d[4]=s):s=d[4];let h=s;if(d[5]!==b||d[6]!==h||d[7]!==m){let e;d[9]!==b||d[10]!==h?(e=e=>(0,l.jsxs)("div",{className:`flex items-center gap-2 px-6 py-3 font-medium text-sm transition-colors relative whitespace-nowrap cursor-pointer ${b===e.id?"text-blue-600 border-b-2 border-blue-600":"text-slate-600 hover:text-slate-800"}`,onClick:()=>h(e.id),children:[(0,l.jsx)("span",{children:e.label}),e.closeable&&(0,l.jsx)("button",{onClick:t=>(function(e,t){e.stopPropagation(),t.onClose&&t.onClose()})(t,e),className:"hover:bg-slate-200 rounded p-0.5 transition-colors",title:"Close tab",children:(0,l.jsx)(a.A,{size:14})})]},e.id),d[9]=b,d[10]=h,d[11]=e):e=d[11],o=m.map(e),d[5]=b,d[6]=h,d[7]=m,d[8]=o}else o=d[8];return d[12]!==o?(n=(0,l.jsx)("div",{className:"border-b border-slate-200",children:(0,l.jsx)("div",{className:"flex space-x-1 overflow-x-auto",children:o})}),d[12]=o,d[13]=n):n=d[13],d[14]!==p?(c=(0,l.jsx)("div",{className:"py-6",children:p}),d[14]=p,d[15]=c):c=d[15],d[16]!==n||d[17]!==c?(i=(0,l.jsxs)("div",{className:"w-full",children:[n,c]}),d[16]=n,d[17]=c,d[18]=i):i=d[18],i}},8079:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(1858).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},e=>{e.O(0,[375,441,826,358],()=>e(e.s=3492)),_N_E=e.O()}]);