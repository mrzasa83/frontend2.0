(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[211],{487:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1858).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},1014:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1858).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},1190:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1858).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},1480:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1858).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},1844:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1858).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},1858:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(2115);let l=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},a=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim();var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:l,className:i="",children:n,iconNode:d,...c},m)=>(0,r.createElement)("svg",{ref:m,...o,width:t,height:t,stroke:e,strokeWidth:l?24*Number(s)/Number(t):s,className:a("lucide",i),...!n&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(c)&&{"aria-hidden":"true"},...c},[...d.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(n)?n:[n]])),n=(e,t)=>{let s=(0,r.forwardRef)(({className:s,...o},n)=>(0,r.createElement)(i,{ref:n,iconNode:t,className:a(`lucide-${l(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,s),...o}));return s.displayName=l(e),s}},2063:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var r=s(5155),l=s(2115),a=s(9319),o=s(2222),i=s(7257),n=s(9749),d=s(487),c=s(1014),m=s(1480),x=s(1190);function h(e){let t,s,a,o,i,h,u,p,b,f,j,y=(0,n.c)(36),{roles:g,onView:v,onEdit:N,onDelete:w}=e,[k,A]=(0,l.useState)("");if(y[0]!==w||y[1]!==N||y[2]!==v||y[3]!==g||y[4]!==k){let e,l,n;y[11]!==k?(e=e=>e.name.toLowerCase().includes(k.toLowerCase()),y[11]=k,y[12]=e):e=y[12],t=g.filter(e),y[13]===Symbol.for("react.memo_cache_sentinel")?(l=e=>A(e.target.value),y[13]=l):l=y[13],y[14]!==k?(h=(0,r.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,r.jsx)("input",{type:"text",placeholder:"Search roles...",value:k,onChange:l,className:"border border-slate-300 px-3 py-2 rounded-lg w-1/3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})}),y[14]=k,y[15]=h):h=y[15],i="border border-slate-200 rounded-lg overflow-hidden",a="w-full",y[16]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)("thead",{className:"bg-slate-100",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"text-left px-4 py-3 font-medium text-sm text-slate-700",children:"Role Name"}),(0,r.jsx)("th",{className:"text-left px-4 py-3 font-medium text-sm text-slate-700",children:"Users"}),(0,r.jsx)("th",{className:"text-left px-4 py-3 font-medium text-sm text-slate-700",children:"Created"}),(0,r.jsx)("th",{className:"text-left px-4 py-3 font-medium text-sm text-slate-700",children:"Actions"})]})}),y[16]=o):o=y[16],y[17]!==w||y[18]!==N||y[19]!==v?(n=e=>(0,r.jsxs)("tr",{className:"border-t border-slate-200 hover:bg-slate-50 transition-colors",children:[(0,r.jsx)("td",{className:"px-4 py-3 text-sm font-semibold text-slate-800",children:e.name}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(d.A,{size:16,className:"text-slate-400"}),(0,r.jsx)("span",{children:e.userCount})]})}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-slate-600",children:new Date(e.createdAt).toLocaleDateString()}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>v(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"View Role",children:(0,r.jsx)(c.A,{size:18})}),(0,r.jsx)("button",{onClick:()=>N(e),className:"p-2 text-green-600 hover:bg-green-50 rounded transition-colors",title:"Edit Role",children:(0,r.jsx)(m.A,{size:18})}),(0,r.jsx)("button",{onClick:()=>w(e),className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete Role",children:(0,r.jsx)(x.A,{size:18})})]})})]},e.id),y[17]=w,y[18]=N,y[19]=v,y[20]=n):n=y[20],s=t.map(n),y[0]=w,y[1]=N,y[2]=v,y[3]=g,y[4]=k,y[5]=t,y[6]=s,y[7]=a,y[8]=o,y[9]=i,y[10]=h}else t=y[5],s=y[6],a=y[7],o=y[8],i=y[9],h=y[10];return y[21]!==s?(u=(0,r.jsx)("tbody",{children:s}),y[21]=s,y[22]=u):u=y[22],y[23]!==a||y[24]!==o||y[25]!==u?(p=(0,r.jsxs)("table",{className:a,children:[o,u]}),y[23]=a,y[24]=o,y[25]=u,y[26]=p):p=y[26],y[27]!==i||y[28]!==p?(b=(0,r.jsx)("div",{className:i,children:p}),y[27]=i,y[28]=p,y[29]=b):b=y[29],y[30]!==t.length?(f=0===t.length&&(0,r.jsx)("div",{className:"text-center py-12 text-slate-500",children:"No roles found"}),y[30]=t.length,y[31]=f):f=y[31],y[32]!==h||y[33]!==b||y[34]!==f?(j=(0,r.jsxs)("div",{children:[h,b,f]}),y[32]=h,y[33]=b,y[34]=f,y[35]=j):j=y[35],j}var u=s(8079);function p(e){let t,s,l,a,o,i,d,c,m,x,h,p,f,j,y,g,v,N,w,k,A,C,E=(0,n.c)(45),{role:S,onClose:_}=e;return E[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-slate-800",children:"View Role"}),(0,r.jsx)("p",{className:"text-sm text-slate-600 mt-1",children:"Role details (read-only)"})]}),E[0]=t):t=E[0],E[1]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.jsx)(u.A,{size:24,className:"text-slate-600"}),E[1]=s):s=E[1],E[2]!==_?(l=(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[t,(0,r.jsx)("button",{onClick:_,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:s})]}),E[2]=_,E[3]=l):l=E[3],E[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Role Name"}),E[4]=a):a=E[4],E[5]!==S.name?(o=(0,r.jsxs)("div",{children:[a,(0,r.jsx)("div",{className:"px-4 py-3 bg-slate-50 border border-slate-300 rounded-lg text-slate-800 font-semibold",children:S.name})]}),E[5]=S.name,E[6]=o):o=E[6],E[7]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Created At"}),E[7]=i):i=E[7],E[8]!==S.createdAt?(d=new Date(S.createdAt).toLocaleString(),E[8]=S.createdAt,E[9]=d):d=E[9],E[10]!==d?(c=(0,r.jsxs)("div",{children:[i,(0,r.jsx)("div",{className:"px-4 py-3 bg-slate-50 border border-slate-300 rounded-lg text-slate-600 text-sm",children:d})]}),E[10]=d,E[11]=c):c=E[11],E[12]===Symbol.for("react.memo_cache_sentinel")?(m=(0,r.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Updated At"}),E[12]=m):m=E[12],E[13]!==S.updatedAt?(x=new Date(S.updatedAt).toLocaleString(),E[13]=S.updatedAt,E[14]=x):x=E[14],E[15]!==x?(h=(0,r.jsxs)("div",{children:[m,(0,r.jsx)("div",{className:"px-4 py-3 bg-slate-50 border border-slate-300 rounded-lg text-slate-600 text-sm",children:x})]}),E[15]=x,E[16]=h):h=E[16],E[17]!==h||E[18]!==c?(p=(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[c,h]}),E[17]=h,E[18]=c,E[19]=p):p=E[19],E[20]!==S.users.length?(f=(0,r.jsxs)("h3",{className:"font-semibold text-slate-800 mb-3",children:["Users in this Role (",S.users.length,")"]}),E[20]=S.users.length,E[21]=f):f=E[21],E[22]===Symbol.for("react.memo_cache_sentinel")?(j=(0,r.jsx)("thead",{className:"bg-slate-100",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"text-left px-4 py-2 text-sm font-medium text-slate-700",children:"Name"}),(0,r.jsx)("th",{className:"text-left px-4 py-2 text-sm font-medium text-slate-700",children:"Username"}),(0,r.jsx)("th",{className:"text-left px-4 py-2 text-sm font-medium text-slate-700",children:"Email"})]})}),E[22]=j):j=E[22],E[23]!==S.users?(y=S.users.map(b),E[23]=S.users,E[24]=y):y=E[24],E[25]!==y?(g=(0,r.jsxs)("table",{className:"w-full",children:[j,(0,r.jsx)("tbody",{children:y})]}),E[25]=y,E[26]=g):g=E[26],E[27]!==S.users.length?(v=0===S.users.length&&(0,r.jsx)("div",{className:"text-center py-8 text-slate-500 text-sm",children:"No users assigned to this role"}),E[27]=S.users.length,E[28]=v):v=E[28],E[29]!==g||E[30]!==v?(N=(0,r.jsxs)("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[g,v]}),E[29]=g,E[30]=v,E[31]=N):N=E[31],E[32]!==f||E[33]!==N?(w=(0,r.jsxs)("div",{children:[f,N]}),E[32]=f,E[33]=N,E[34]=w):w=E[34],E[35]!==p||E[36]!==w||E[37]!==o?(k=(0,r.jsx)("div",{className:"flex-1 overflow-auto p-6",children:(0,r.jsxs)("div",{className:"space-y-6",children:[o,p,w]})}),E[35]=p,E[36]=w,E[37]=o,E[38]=k):k=E[38],E[39]!==_?(A=(0,r.jsx)("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-slate-200",children:(0,r.jsx)("button",{onClick:_,className:"px-4 py-2 text-slate-700 hover:bg-slate-100 rounded-lg transition-colors",children:"Close"})}),E[39]=_,E[40]=A):A=E[40],E[41]!==k||E[42]!==A||E[43]!==l?(C=(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[l,k,A]})}),E[41]=k,E[42]=A,E[43]=l,E[44]=C):C=E[44],C}function b(e){return(0,r.jsxs)("tr",{className:"border-t border-slate-200",children:[(0,r.jsx)("td",{className:"px-4 py-2 text-sm",children:e.name}),(0,r.jsx)("td",{className:"px-4 py-2 text-sm font-mono",children:e.username}),(0,r.jsx)("td",{className:"px-4 py-2 text-sm",children:e.email})]},e.id)}var f=s(1844),j=s(3245);let y=(0,s(1858).A)("user-minus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);function g({role:e,onSave:t,onCancel:s,onAddUser:a,onRemoveUser:o}){let[i,n]=(0,l.useState)(e),[d,c]=(0,l.useState)(!1),[m,x]=(0,l.useState)([]),[h,p]=(0,l.useState)(!1),[b,g]=(0,l.useState)(null),[v,N]=(0,l.useState)(!1);(0,l.useEffect)(()=>{w()},[]);let w=async()=>{try{let e=await fetch("/api/users");if(e.ok){let t=await e.json();x(t)}}catch(e){console.error("Error fetching users:",e)}},k=async()=>{if(b){N(!0);try{await a(e.id,b),p(!1),g(null)}catch(e){console.error("Error adding user:",e)}finally{N(!1)}}},A=async t=>{if(confirm("Remove this user from the role?")){N(!0);try{await o(e.id,t)}catch(e){console.error("Error removing user:",e)}finally{N(!1)}}},C=m.filter(e=>!i.users.some(t=>t.id===e.id));return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-slate-200",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-slate-800",children:["Editing: ",i.name]}),d&&(0,r.jsx)("p",{className:"text-sm text-orange-600 mt-1",children:"âš  You have unsaved changes"})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsxs)("button",{onClick:s,className:"px-4 py-2 text-slate-700 hover:bg-slate-100 rounded-lg transition-colors flex items-center gap-2",children:[(0,r.jsx)(u.A,{size:18}),"Cancel"]}),(0,r.jsxs)("button",{onClick:()=>{t(i),c(!1)},disabled:!d,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,r.jsx)(f.A,{size:18}),"Save Changes"]})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Role Name"}),(0,r.jsx)("input",{type:"text",value:i.name,onChange:e=>{var t;return t=e.target.value,void(n(e=>({...e,name:t})),c(!0))},className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Enter role name"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h4",{className:"font-semibold text-slate-800",children:["Users in this Role (",i.users.length,")"]}),(0,r.jsxs)("button",{onClick:()=>p(!h),className:"px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 text-sm",children:[(0,r.jsx)(j.A,{size:16}),"Add User"]})]}),h&&(0,r.jsx)("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsxs)("select",{value:b||"",onChange:e=>g(Number(e.target.value)),className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-green-500 outline-none",children:[(0,r.jsx)("option",{value:"",children:"Select a user..."}),C.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.name," (",e.username,")"]},e.id))]}),(0,r.jsx)("button",{onClick:k,disabled:!b||v,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:"Add"}),(0,r.jsx)("button",{onClick:()=>p(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:"Cancel"})]})}),(0,r.jsxs)("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-slate-100",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"text-left px-4 py-2 text-sm font-medium text-slate-700",children:"Name"}),(0,r.jsx)("th",{className:"text-left px-4 py-2 text-sm font-medium text-slate-700",children:"Username"}),(0,r.jsx)("th",{className:"text-left px-4 py-2 text-sm font-medium text-slate-700",children:"Email"}),(0,r.jsx)("th",{className:"text-left px-4 py-2 text-sm font-medium text-slate-700",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:i.users.map(e=>(0,r.jsxs)("tr",{className:"border-t border-slate-200 hover:bg-slate-50",children:[(0,r.jsx)("td",{className:"px-4 py-2 text-sm",children:e.name}),(0,r.jsx)("td",{className:"px-4 py-2 text-sm font-mono",children:e.username}),(0,r.jsx)("td",{className:"px-4 py-2 text-sm",children:e.email}),(0,r.jsx)("td",{className:"px-4 py-2",children:(0,r.jsx)("button",{onClick:()=>A(e.id),disabled:v,className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors disabled:opacity-50",title:"Remove from role",children:(0,r.jsx)(y,{size:16})})})]},e.id))})]}),0===i.users.length&&(0,r.jsx)("div",{className:"text-center py-8 text-slate-500 text-sm",children:"No users assigned to this role"})]})]})]})}var v=s(4593);function N(){let{data:e}=(0,a.useSession)(),t=(0,o.useRouter)(),[s,n]=(0,l.useState)([]),[d,c]=(0,l.useState)(!0),[m,x]=(0,l.useState)(null),[u,b]=(0,l.useState)(null),[f,j]=(0,l.useState)([]),[y,N]=(0,l.useState)("all"),w=e?.user?.roles?.includes("admin")||!1;(0,l.useEffect)(()=>{w?k():t.push("/users")},[w,t]);let k=async()=>{try{c(!0),x(null);let e=await fetch("/api/roles");if(!e.ok)throw Error(`Failed to fetch roles: ${e.status}`);let t=await e.json();n(t)}catch(e){console.error("Error fetching roles:",e),x(e instanceof Error?e.message:"Failed to load roles")}finally{c(!1)}},A=async e=>{let t=await fetch(`/api/roles/${e}`);if(!t.ok)throw Error("Failed to fetch role details");return t.json()},C=async e=>{try{let t=await A(e.id);b(t)}catch(e){console.error("Error:",e),alert("Failed to load role details")}},E=async e=>{try{let t=await A(e.id);f.find(e=>e.id===t.id)||j(e=>[...e,t]),N(`edit-${t.id}`)}catch(e){console.error("Error:",e),alert("Failed to load role details")}},S=e=>{j(t=>t.filter(t=>t.id!==e)),N("all")},_=async e=>{try{if(!(await fetch(`/api/roles/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.name})})).ok)throw Error("Failed to save role");await k(),S(e.id)}catch(e){console.error("Error saving role:",e),alert("Failed to save role")}},R=async(e,t)=>{try{let s=await fetch(`/api/roles/${e}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t})});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to add user")}let r=await A(e);j(t=>t.map(t=>t.id===e?r:t))}catch(e){console.error("Error adding user:",e),alert(e instanceof Error?e.message:"Failed to add user")}},M=async(e,t)=>{try{if(!(await fetch(`/api/roles/${e}/users?userId=${t}`,{method:"DELETE"})).ok)throw Error("Failed to remove user");let s=await A(e);j(t=>t.map(t=>t.id===e?s:t))}catch(e){console.error("Error removing user:",e),alert("Failed to remove user")}},z=async e=>{if(confirm(`Delete role "${e.name}"? This will remove all user associations.`))try{if(!(await fetch(`/api/roles/${e.id}`,{method:"DELETE"})).ok)throw Error("Failed to delete role");await k(),alert("Role deleted successfully")}catch(e){console.error("Error deleting role:",e),alert("Failed to delete role")}},F=async()=>{let e=prompt("Enter role name:");if(e&&e.trim())try{let t=await fetch("/api/roles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.trim()})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to create role")}await k(),alert("Role created successfully")}catch(e){console.error("Error creating role:",e),alert(e instanceof Error?e.message:"Failed to create role")}};if(!w)return null;if(d)return(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 bg-slate-200 rounded w-1/4 mb-4"}),(0,r.jsx)("div",{className:"h-64 bg-slate-200 rounded"})]})});if(m)return(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:[(0,r.jsx)("p",{className:"font-semibold",children:"Error loading roles"}),(0,r.jsx)("p",{className:"text-sm",children:m}),(0,r.jsx)("button",{onClick:k,className:"mt-2 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"})]})});let $=[{id:"all",label:"All Roles",content:(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-slate-800",children:["All Roles (",s.length,")"]}),(0,r.jsxs)("button",{onClick:F,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[(0,r.jsx)(v.A,{size:18}),"Add Role"]})]}),(0,r.jsx)(h,{roles:s,onView:C,onEdit:E,onDelete:z})]}),closeable:!1},...f.map(e=>({id:`edit-${e.id}`,label:e.name,content:(0,r.jsx)(g,{role:e,onSave:_,onCancel:()=>S(e.id),onAddUser:R,onRemoveUser:M}),closeable:!0,onClose:()=>S(e.id)}))];return(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Roles"}),(0,r.jsx)("p",{className:"text-slate-600 mb-6",children:"Manage user roles and permissions"}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow",children:(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)(i.A,{tabs:$,activeTab:y,onTabChange:N})})}),u&&(0,r.jsx)(p,{role:u,onClose:()=>b(null)})]})}},2222:(e,t,s)=>{"use strict";var r=s(5042);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},3245:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1858).A)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},4593:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1858).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7257:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(5155),l=s(9749),a=s(8079);function o(e){let t,s,o,i,n,d,c=(0,l.c)(19),{tabs:m,activeTab:x,onTabChange:h}=e,u=x||m[0]?.id;c[0]!==u||c[1]!==m?(t=m.find(e=>e.id===u)?.content,c[0]=u,c[1]=m,c[2]=t):t=c[2];let p=t;c[3]!==h?(s=e=>{h&&h(e)},c[3]=h,c[4]=s):s=c[4];let b=s;if(c[5]!==u||c[6]!==b||c[7]!==m){let e;c[9]!==u||c[10]!==b?(e=e=>(0,r.jsxs)("div",{className:`flex items-center gap-2 px-6 py-3 font-medium text-sm transition-colors relative whitespace-nowrap cursor-pointer ${u===e.id?"text-blue-600 border-b-2 border-blue-600":"text-slate-600 hover:text-slate-800"}`,onClick:()=>b(e.id),children:[(0,r.jsx)("span",{children:e.label}),e.closeable&&(0,r.jsx)("button",{onClick:t=>(function(e,t){e.stopPropagation(),t.onClose&&t.onClose()})(t,e),className:"hover:bg-slate-200 rounded p-0.5 transition-colors",title:"Close tab",children:(0,r.jsx)(a.A,{size:14})})]},e.id),c[9]=u,c[10]=b,c[11]=e):e=c[11],o=m.map(e),c[5]=u,c[6]=b,c[7]=m,c[8]=o}else o=c[8];return c[12]!==o?(i=(0,r.jsx)("div",{className:"border-b border-slate-200",children:(0,r.jsx)("div",{className:"flex space-x-1 overflow-x-auto",children:o})}),c[12]=o,c[13]=i):i=c[13],c[14]!==p?(n=(0,r.jsx)("div",{className:"py-6",children:p}),c[14]=p,c[15]=n):n=c[15],c[16]!==i||c[17]!==n?(d=(0,r.jsxs)("div",{className:"w-full",children:[i,n]}),c[16]=i,c[17]=n,c[18]=d):d=c[18],d}},8079:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(1858).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9788:(e,t,s)=>{Promise.resolve().then(s.bind(s,2063))}},e=>{e.O(0,[375,441,826,358],()=>e(e.s=9788)),_N_E=e.O()}]);