(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[377],{1858:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var a=s(2115);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim();var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:i="",children:c,iconNode:d,...o},x)=>(0,a.createElement)("svg",{ref:x,...n,width:t,height:t,stroke:e,strokeWidth:r?24*Number(s)/Number(t):s,className:l("lucide",i),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(o)&&{"aria-hidden":"true"},...o},[...d.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(c)?c:[c]])),c=(e,t)=>{let s=(0,a.forwardRef)(({className:s,...n},c)=>(0,a.createElement)(i,{ref:c,iconNode:t,className:l(`lucide-${r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,s),...n}));return s.displayName=r(e),s}},2173:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1858).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},2512:(e,t,s)=>{Promise.resolve().then(s.bind(s,9391))},7036:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1858).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},9391:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(5155),r=s(2115),l=s(2173),n=s(1858);let i=(0,n.A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);var c=s(7036);let d=(0,n.A)("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),o=(0,n.A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),x=(0,n.A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),m={1:"Piece Part",2:"Connector",3:"Test Vehicle",4:"Circuit Card Assembly",5:"Printed Circuit Board"},h=e=>`${e.apcPN}|${e.fullPath}`;function p(){let[e,t]=(0,r.useState)(!1),[s,n]=(0,r.useState)(!1),[p,u]=(0,r.useState)(null),[g,N]=(0,r.useState)(new Set),[b,j]=(0,r.useState)("new"),[f,y]=(0,r.useState)(""),w=async()=>{t(!0),u(null),N(new Set);try{let e=await fetch("/api/admin/scan-parts");if(!e.ok)throw Error("Failed to scan parts");let t=await e.json();u(t);let s=t.parts.filter(e=>!e.existsInDB);N(new Set(s.map(e=>h(e))))}catch(e){console.error("Error scanning:",e),alert("Failed to scan parts. Check console for details.")}finally{t(!1)}},v=async()=>{if(!p||0===g.size)return;let e=p.parts.filter(e=>g.has(h(e)));n(!0);try{let t=await fetch("/api/admin/import-parts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({parts:e})});if(!t.ok)throw Error("Failed to import parts");let s=await t.json(),a=`Import complete!
Imported: ${s.imported}
Skipped: ${s.skipped}`;s.errors.length>0&&(a+=`

Errors (${s.errors.length}):
${s.errors.slice(0,5).join("\n")}`,s.errors.length>5&&(a+=`
... and ${s.errors.length-5} more`)),alert(a),w()}catch(e){console.error("Error importing:",e),alert("Failed to import parts. Check console for details.")}finally{n(!1)}},k=()=>{if(!p)return[];let e=p.parts;if("new"===b?e=e.filter(e=>!e.existsInDB):"existing"===b&&(e=e.filter(e=>e.existsInDB)),f){let t=f.toLowerCase();e=e.filter(e=>e.apcPN.toLowerCase().includes(t)||e.folderName.toLowerCase().includes(t)||e.customer?.toLowerCase().includes(t)||e.customerPN?.toLowerCase().includes(t))}return e},C=k();return(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Import Parts"}),(0,a.jsx)("p",{className:"text-slate-600 mb-6",children:"Scan network drive and import parts into the database"}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("button",{onClick:w,disabled:e,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.A,{size:18,className:"animate-spin"}),"Scanning..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i,{size:18}),"Scan Network Drive"]})}),p&&(0,a.jsx)("button",{onClick:v,disabled:s||0===g.size,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.A,{size:18,className:"animate-spin"}),"Importing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{size:18}),"Import Selected (",g.size,")"]})})]}),p&&(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d,{className:"text-slate-400",size:16}),(0,a.jsxs)("span",{className:"text-slate-600",children:["Total: ",p.total]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o,{className:"text-green-600",size:16}),(0,a.jsxs)("span",{className:"text-slate-600",children:["New: ",p.new]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x,{className:"text-orange-600",size:16}),(0,a.jsxs)("span",{className:"text-slate-600",children:["Existing: ",p.existing]})]})]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,a.jsx)("strong",{children:"Scan Path:"})," /mnt/jdrive/APC EngJobs/"]}),(0,a.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:"Only folders matching pattern #####-##### will be scanned. Part folders must start with 5 digits."})]})]}),p&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b border-slate-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search parts...",value:f,onChange:e=>y(e.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg w-80 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>j("all"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${"all"===b?"bg-blue-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:["All (",p.total,")"]}),(0,a.jsxs)("button",{onClick:()=>j("new"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${"new"===b?"bg-green-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:["New (",p.new,")"]}),(0,a.jsxs)("button",{onClick:()=>j("existing"),className:`px-4 py-2 rounded-lg text-sm transition-colors ${"existing"===b?"bg-orange-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:["Existing (",p.existing,")"]})]})]})}),(0,a.jsxs)("div",{className:"overflow-x-auto",children:[(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-slate-100",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left",children:(0,a.jsx)("input",{type:"checkbox",checked:C.length>0&&g.size===C.length,onChange:()=>{let e=k(),t=e.map(e=>h(e));g.size===e.length?N(new Set):N(new Set(t))},className:"rounded border-slate-300"})}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Status"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"APC PN"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Type"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Customer"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Customer PN"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Rev"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Folder Name"})]})}),(0,a.jsx)("tbody",{children:C.map((e,t)=>{let s=h(e);return(0,a.jsxs)("tr",{className:`border-t border-slate-200 hover:bg-slate-50 ${e.existsInDB?"bg-orange-50":""}`,children:[(0,a.jsx)("td",{className:"px-4 py-3",children:(0,a.jsx)("input",{type:"checkbox",checked:g.has(s),onChange:()=>{let e;(e=new Set(g)).has(s)?e.delete(s):e.add(s),N(e)},disabled:e.existsInDB,className:"rounded border-slate-300"})}),(0,a.jsx)("td",{className:"px-4 py-3",children:e.existsInDB?(0,a.jsx)("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 rounded text-xs",children:"Exists"}):(0,a.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs",children:"New"})}),(0,a.jsx)("td",{className:"px-4 py-3 font-mono text-sm",children:e.apcPN}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-slate-600",children:m[e.item_type_id]}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm",children:e.customer||"-"}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm font-mono",children:e.customerPN||"-"}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm",children:e.currentRev||"-"}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-slate-500 max-w-md truncate",title:e.folderName,children:e.folderName})]},s)})})]}),0===C.length&&(0,a.jsx)("div",{className:"text-center py-12 text-slate-500",children:"No parts found matching current filters"})]})]}),!p&&!e&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[(0,a.jsx)(d,{className:"mx-auto text-slate-300 mb-4",size:64}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"No Scan Results"}),(0,a.jsx)("p",{className:"text-slate-600 mb-4",children:'Click "Scan Network Drive" to begin scanning for parts'})]})]})}}},e=>{e.O(0,[441,826,358],()=>e(e.s=2512)),_N_E=e.O()}]);